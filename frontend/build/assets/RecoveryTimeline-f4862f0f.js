import{j as e,h as W,i as X,g as J}from"./index-68cd4404.js";import{r as j,c as Z}from"./vendor-c778fe58.js";import{d as ee}from"./analytics-f7964037.js";import{R as Q,L as te,c as E,X as H,Y as k,T,d as U,b as z,I as se,J as re,C as ie,B as ne,S as le,a1 as oe,e as ae}from"./ui-87255102.js";import"./three-1c465152.js";const ce=s=>{const m=x=>x!=null&&x!==0&&!isNaN(x);let D=50;m(s.hrv_night)&&(s.hrv_night>=70?D=100:s.hrv_night>=60?D=90:s.hrv_night>=50?D=80:s.hrv_night>=40?D=60:s.hrv_night>=30?D=40:D=20);let u=50;m(s.resting_hr)&&(s.resting_hr<=45?u=100:s.resting_hr<=50?u=90:s.resting_hr<=55?u=80:s.resting_hr<=60?u=70:s.resting_hr<=65?u=60:s.resting_hr<=70?u=50:s.resting_hr<=75?u=40:u=30);let _=50;m(s.sleep_duration_h)&&(s.sleep_duration_h>=9?_=100:s.sleep_duration_h>=8.5?_=95:s.sleep_duration_h>=8?_=90:s.sleep_duration_h>=7.5?_=80:s.sleep_duration_h>=7?_=70:s.sleep_duration_h>=6.5?_=60:s.sleep_duration_h>=6?_=50:_=40);let d=50;const N=m(s.deep_sleep_pct),y=m(s.rem_sleep_pct);if(N||y){const x=N&&y?(s.deep_sleep_pct+s.rem_sleep_pct)/2:N?s.deep_sleep_pct:s.rem_sleep_pct;x>=30?d=100:x>=27?d=90:x>=25?d=85:x>=22?d=75:x>=20?d=70:x>=17?d=60:x>=15?d=50:d=40}let S=50;m(s.spo2_night)&&(s.spo2_night>=98?S=100:s.spo2_night>=97?S=95:s.spo2_night>=96?S=90:s.spo2_night>=95?S=85:s.spo2_night>=94?S=75:s.spo2_night>=93?S=65:s.spo2_night>=92?S=55:S=45);let v=50;m(s.temp_trend_c)&&(s.temp_trend_c<=36.2?v=100:s.temp_trend_c<=36.4?v=90:s.temp_trend_c<=36.6?v=80:s.temp_trend_c<=36.8?v=70:s.temp_trend_c<=37?v=60:s.temp_trend_c<=37.2?v=50:s.temp_trend_c<=37.5?v=40:v=30);let $=50;m(s.resp_rate_night)&&(s.resp_rate_night<=12?$=100:s.resp_rate_night<=13?$=95:s.resp_rate_night<=14?$=90:s.resp_rate_night<=15?$=80:s.resp_rate_night<=16?$=70:s.resp_rate_night<=17?$=60:s.resp_rate_night<=18?$=50:$=40);const w=Math.round(D*.25+u*.2+_*.2+d*.15+S*.1+v*.05+$*.05);let L=50;m(s.hrv_night)&&m(s.resting_hr)&&s.resting_hr>0&&(L=Math.round(s.hrv_night/s.resting_hr*10),L=Math.max(0,Math.min(100,L)));let M=30;m(s.temp_trend_c)&&m(s.hrv_night)&&(M=s.temp_trend_c>37&&s.hrv_night<40?80:s.temp_trend_c>37||s.hrv_night<40?60:30);let R=20;if(m(s.training_load_pct)){const x=s.training_load_pct/Math.max(w,1);R=Math.min(100,Math.max(0,(x-.8)*100))}const g=[];if(m(s.hrv_night)&&(s.hrv_night<50?g.push("Low HRV detected - prioritize stress reduction and recovery"):s.hrv_night<60&&g.push("Moderate HRV - consider additional recovery modalities")),m(s.resting_hr)&&(s.resting_hr>65?g.push("Elevated resting HR - monitor for fatigue accumulation"):s.resting_hr>60&&g.push("Resting HR slightly elevated - ensure adequate recovery")),m(s.sleep_duration_h)&&(s.sleep_duration_h<7?g.push(`Sleep duration: ${s.sleep_duration_h}h - aim for 8+ hours nightly`):s.sleep_duration_h<7.5&&g.push("Sleep duration adequate but could be optimized")),N||y){const x=N&&y?(s.deep_sleep_pct+s.rem_sleep_pct)/2:N?s.deep_sleep_pct:s.rem_sleep_pct;x<20&&g.push(`Sleep quality: ${x.toFixed(1)}% - focus on sleep environment`)}return m(s.spo2_night)&&s.spo2_night<95&&g.push(`SpO2: ${s.spo2_night}% - monitor breathing quality during sleep`),m(s.temp_trend_c)&&s.temp_trend_c>37&&g.push(`Body temp: ${s.temp_trend_c}Â°C - possible inflammation, monitor closely`),m(s.training_load_pct)&&(s.training_load_pct>80&&g.push(`High training load: ${s.training_load_pct}% - balance with recovery`),R>50&&g.push(`Fatigue level: ${R.toFixed(0)}% - consider load reduction`)),w>=90?g.push("Excellent recovery status - maintain current protocols"):w>=80?g.push("Good recovery - continue monitoring key metrics"):w>=70?g.push("Moderate recovery - focus on high-priority recovery factors"):g.push("Recovery needs attention - prioritize rest and recovery modalities"),g.length===0&&g.push("All metrics within optimal ranges - maintain current recovery protocols"),{overallRecovery:w,sleepQuality:d,autonomicBalance:L,inflammationRisk:M,fatigueLevel:R,recommendations:g}},fe=({athleteId:s})=>{const[m,D]=j.useState("30"),[u,_]=j.useState("line"),[d,N]=j.useState([]),[y,S]=j.useState([]),[v,$]=j.useState([]),[w,L]=j.useState([]),[M,R]=j.useState(!0),[g,x]=j.useState(null),[B,Y]=j.useState(!1);j.useEffect(()=>{(async()=>{try{const i=await W.getAllAthletes();let n=[];i&&typeof i=="object"&&(i.athletes?Array.isArray(i.athletes)?n=i.athletes:i.athletes.$values&&Array.isArray(i.athletes.$values)&&(n=i.athletes.$values):i.$values&&Array.isArray(i.$values)?n=i.$values:Array.isArray(i)&&(n=i));const c=n.map(r=>{const o=r.DateOfBirth?new Date().getFullYear()-new Date(r.DateOfBirth).getFullYear():0;let l="";return r.FirstName&&r.LastName?l=`${r.FirstName} ${r.LastName}`.trim():r.FirstName?l=r.FirstName:r.LastName?l=r.LastName:r.Name?l=r.Name:r.FullName?l=r.FullName:l=`Athlete ${r.Id||r.UnionId||"Unknown"}`,{id:r.Id||r.UnionId,athlete_id:(r.Id||r.UnionId)?.toString()||"",name:l,sport:r.Sport||r.SportName||"General",age:o,team:r.Team||r.TeamName||"Default Team",baseline_start_date:void 0,date_of_birth:r.DateOfBirth}});if(S(c),!s&&c.length>0){const r=c[0].athlete_id;N([r])}else s&&N([s])}catch{x("Failed to load athletes data")}})()},[s]),j.useEffect(()=>{(async()=>{if(d.length!==0)try{R(!0),x(null);const i=[],n=[];for(const c of d){const r=parseInt(c,10);if(!isNaN(r))try{const o=await X.getBiometricDataByAthlete(r);Array.isArray(o)&&(i.push(...o),o.length>0);const l=await J.getGeneticProfileByAthlete(r);Array.isArray(l)&&n.push(...l)}catch{}}$(i),L(n)}catch{x("Failed to load recovery data")}finally{R(!1)}})()},[d]);const{athleteDataMap:F,lineChartData:G,recoveryMetrics:K,geneticInsights:O}=j.useMemo(()=>{const t={},i=new Set,n={};if(!v||!Array.isArray(v)||!y||!Array.isArray(y)||!d||!Array.isArray(d))return{athleteDataMap:{},lineChartData:[],recoveryMetrics:{},geneticInsights:[]};d.forEach(b=>{const h=v.filter(a=>a?(a.athlete_id||a.AthleteId||a.athleteId||"")?.toString()===b?.toString():!1);h.length>0,h.forEach(a=>{(a.date||a.Date)&&i.add(a.date||a.Date)})});const c=parseInt(m),r=new Date;r.setDate(r.getDate()-c);const o=Array.from(i).filter(b=>new Date(b)>=r).sort((b,h)=>new Date(b).getTime()-new Date(h).getTime()),l=[];o.forEach(b=>{const h={date:b};d.forEach(a=>{const p=v.find(f=>{const C=f.athlete_id||f.AthleteId||f.athleteId||"",I=f.date||f.Date||"";return C?.toString()===a?.toString()&&I===b}),q=y.find(f=>[f.athlete_id,f.id?.toString(),f.Id?.toString(),f.UnionId?.toString()].filter(Boolean).some(I=>I===a));if(p){const f=ce(p),C=f.overallRecovery,V=p.hrv_night>0||p.resting_hr>0||p.sleep_duration_h>0||p.spo2_night>0?C:0;h[`${a}_recovery`]=V,h[`${a}_hrv`]=p.hrv_night,h[`${a}_sleepQuality`]=f.sleepQuality,h[`${a}_fatigue`]=f.fatigueLevel,h[`${a}_events`]=[],p.training_load_pct>90&&h[`${a}_events`].push("High Training Load"),p.hrv_night<40&&h[`${a}_events`].push("Poor Autonomic Recovery"),p.sleep_duration_h<6&&h[`${a}_events`].push("Insufficient Sleep Duration"),p.resting_hr>70&&h[`${a}_events`].push("Elevated Resting HR"),f.inflammationRisk>60&&h[`${a}_events`].push("Inflammation Risk"),f.fatigueLevel>70&&h[`${a}_events`].push("High Fatigue Level"),t[a]||(t[a]=[]),t[a].push({date:b,readinessScore:V,hrv:p.hrv_night,restingHr:p.resting_hr,sleepDuration:p.sleep_duration_h,spo2:p.spo2_night,trainingLoad:p.training_load_pct,events:h[`${a}_events`],athleteId:a,athleteName:q?.name||`Athlete ${a}`,recoveryScore:V,sleepQuality:f.sleepQuality,stressIndex:f.autonomicBalance,fatigueLevel:f.fatigueLevel}),n[a]||(n[a]=f)}else h[`${a}_recovery`]=null,h[`${a}_hrv`]=null,h[`${a}_sleepQuality`]=null,h[`${a}_fatigue`]=null,h[`${a}_events`]=[]}),l.push(h)});const A=ee(w);return{athleteDataMap:t,lineChartData:l,recoveryMetrics:n,geneticInsights:A}},[d,m,v,w]),P=t=>new Date(t).toLocaleDateString("en-US",{month:"short",day:"numeric"});return M?e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Recovery Timeline"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Interactive timeline showing recovery progression"}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading recovery data..."})]})]})}):g?e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Recovery Timeline"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Interactive timeline showing recovery progression"}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-red-600 mb-2",children:"âš ï¸ Error loading data"}),e.jsx("p",{className:"text-sm text-gray-500",children:g})]})]})}):e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Recovery Timeline"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Interactive timeline showing recovery progression"}),!s&&e.jsxs("div",{className:"mb-8",children:[e.jsx("label",{className:"block text-lg font-semibold text-gray-800 mb-4",children:"Select Athletes to Compare"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-6 gap-3 max-h-48 overflow-y-auto p-4 bg-gray-50 rounded-lg border",children:y.map(t=>{const i=d.includes(t.athlete_id);return e.jsxs("label",{className:`
                      flex items-center p-3 rounded-lg border cursor-pointer transition-all duration-200 hover:shadow-md
                      ${i?"bg-blue-100 border-blue-400 shadow-sm":"bg-white border-gray-200 hover:bg-gray-50 hover:border-gray-300"}
                    `,children:[e.jsx("input",{type:"checkbox",className:"sr-only",checked:i,onChange:n=>{n.target.checked?N([...d,t.athlete_id]):N(d.filter(c=>c!==t.athlete_id))}}),e.jsx("div",{className:`
                      w-5 h-5 rounded border-2 mr-3 flex items-center justify-center transition-colors
                      ${i?"bg-blue-600 border-blue-600":"border-gray-300"}
                    `,children:i&&e.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),e.jsx("span",{className:`text-sm font-medium truncate ${i?"text-blue-900":"text-gray-700"}`,children:t.name})]},t.athlete_id)})}),e.jsxs("div",{className:"mt-3 text-sm text-gray-600 bg-white px-3 py-2 rounded-md border",children:[e.jsx("span",{className:"font-medium",children:d.length})," of ",e.jsx("span",{className:"font-medium",children:y.length})," athletes selected"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-6 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Time Range"}),e.jsx("div",{className:"flex gap-2",children:["7","14","30","90"].map(t=>e.jsxs("button",{className:`px-4 py-2 text-sm rounded-lg font-medium transition-colors ${m===t?"bg-blue-500 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>D(t),children:[t," days"]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Chart Type"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:`px-4 py-2 text-sm rounded-lg font-medium transition-colors ${u==="line"?"bg-blue-500 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>_("line"),children:"ðŸ“ˆ Recovery Trend"}),e.jsx("button",{className:`px-4 py-2 text-sm rounded-lg font-medium transition-colors ${u==="area"?"bg-blue-500 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>_("area"),children:"ðŸ“Š Recovery Areas"}),e.jsx("button",{className:`px-4 py-2 text-sm rounded-lg font-medium transition-colors ${u==="composed"?"bg-blue-500 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>_("composed"),children:"ðŸ“ˆ Multi-Metric"}),e.jsx("button",{className:`px-4 py-2 text-sm rounded-lg font-medium transition-colors ${u==="scatter"?"bg-blue-500 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>_("scatter"),children:"ðŸ” Recovery State"})]})]}),w.length>0&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Genetic Insights"}),e.jsxs("button",{className:`px-4 py-2 text-sm rounded-lg font-medium transition-colors ${B?"bg-purple-500 text-white shadow-sm":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>Y(!B),children:["ðŸ§¬ ",B?"Hide":"Show"," Insights"]})]})]}),e.jsxs("div",{className:"h-96",children:[(()=>null)(),u==="line"?e.jsx(Q,{width:"100%",height:"100%",children:e.jsxs(te,{data:G,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(H,{dataKey:"date",tickFormatter:P,interval:"preserveStartEnd",type:"category",scale:"point"}),e.jsx(k,{yAxisId:"left",domain:[0,100]}),e.jsx(k,{yAxisId:"right",orientation:"right",domain:[0,100]}),e.jsx(T,{formatter:(t,i)=>{const n=String(i);return n.includes("_recovery")?[t===0?"No Data":`${t}%`,"Recovery Score"]:n.includes("_hrv")?[t,"HRV (ms)"]:n.includes("_sleepQuality")?[`${t}%`,"Sleep Quality"]:n.includes("_fatigue")?[`${t}%`,"Fatigue Level"]:[t,n]},labelFormatter:t=>`Date: ${new Date(t).toLocaleDateString()}`}),e.jsx(U,{}),d.map((t,i)=>{const n=y.find(o=>[o.athlete_id,o.id?.toString(),o.Id?.toString(),o.UnionId?.toString()].filter(Boolean).some(b=>b===t)),c=["#6366f1","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"],r=c[i%c.length];return e.jsx(z,{yAxisId:"left",type:"monotone",dataKey:`${t}_recovery`,name:`${n?.name||`Athlete ${t}`} - Recovery`,stroke:r,strokeWidth:3,dot:{r:4},activeDot:{r:6},connectNulls:!1},`recovery-${t}`)})]})}):u==="area"?e.jsx(Q,{width:"100%",height:"100%",children:e.jsxs(se,{data:G,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(H,{dataKey:"date",tickFormatter:P,interval:"preserveStartEnd",type:"category",scale:"point"}),e.jsx(k,{domain:[0,100]}),e.jsx(T,{formatter:(t,i)=>{const n=String(i);return n.includes("_recovery")?[t===0?"No Data":`${t}%`,"Recovery Score"]:n.includes("_sleepQuality")?[`${t}%`,"Sleep Quality"]:n.includes("_fatigue")?[`${t}%`,"Fatigue Level"]:[t,n]},labelFormatter:t=>`Date: ${new Date(t).toLocaleDateString()}`}),e.jsx(U,{}),d.map((t,i)=>{const n=y.find(o=>[o.athlete_id,o.id?.toString(),o.Id?.toString(),o.UnionId?.toString()].filter(Boolean).some(A=>A===t)),c=["#6366f1","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"],r=c[i%c.length];return e.jsx(re,{type:"monotone",dataKey:`${t}_recovery`,name:`${n?.name||`Athlete ${t}`} - Recovery`,stroke:r,fill:r,fillOpacity:.3,strokeWidth:2},`area-${t}`)})]})}):u==="composed"?e.jsx(Q,{width:"100%",height:"100%",children:e.jsxs(ie,{data:G,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(E,{strokeDasharray:"3 3"}),e.jsx(H,{dataKey:"date",tickFormatter:P,interval:"preserveStartEnd",type:"category",scale:"point"}),e.jsx(k,{yAxisId:"left",domain:[0,100]}),e.jsx(k,{yAxisId:"right",orientation:"right",domain:[0,100]}),e.jsx(T,{formatter:(t,i)=>{const n=String(i);return n.includes("_recovery")?[t===0?"No Data":`${t}%`,"Recovery Score"]:n.includes("_hrv")?[t,"HRV (ms)"]:n.includes("_sleepQuality")?[`${t}%`,"Sleep Quality"]:n.includes("_fatigue")?[`${t}%`,"Fatigue Level"]:[t,n]},labelFormatter:t=>`Date: ${new Date(t).toLocaleDateString()}`}),e.jsx(U,{}),d.map((t,i)=>{const n=y.find(o=>[o.athlete_id,o.id?.toString(),o.Id?.toString(),o.UnionId?.toString()].filter(Boolean).some(A=>A===t)),c=["#6366f1","#10b981","#f59e0b","#ef4444","#8b5cf6","#06b6d4"],r=c[i%c.length];return e.jsxs(Z.Fragment,{children:[e.jsx(z,{yAxisId:"left",type:"monotone",dataKey:`${t}_recovery`,name:`${n?.name||`Athlete ${t}`} - Recovery`,stroke:r,strokeWidth:3,dot:{r:3}}),e.jsx(ne,{yAxisId:"right",dataKey:`${t}_fatigue`,name:`${n?.name||`Athlete ${t}`} - Fatigue`,fill:r,fillOpacity:.3})]},`composed-${t}`)})]})}):e.jsx(Q,{width:"100%",height:"100%",children:e.jsxs(le,{margin:{top:20,right:20,bottom:20,left:20},children:[e.jsx(E,{}),e.jsx(H,{type:"number",dataKey:"hrv",name:"HRV",unit:"ms",domain:[20,90]}),e.jsx(k,{type:"number",dataKey:"fatigueLevel",name:"Fatigue Level",unit:"%",domain:[0,100],reversed:!0}),e.jsx(oe,{type:"number",dataKey:"recoveryScore",range:[100,1e3],name:"Recovery Score"}),e.jsx(T,{cursor:{strokeDasharray:"3 3"},formatter:(t,i)=>i==="hrv"?[`${t} ms`,"HRV"]:i==="fatigueLevel"?[`${t}%`,"Fatigue Level"]:i==="recoveryScore"?[`${t}%`,"Recovery Score"]:i==="sleepQuality"?[`${t}%`,"Sleep Quality"]:[t,i]}),e.jsx(U,{}),d.map((t,i)=>{const n=y.find(l=>[l.athlete_id,l.id?.toString(),l.Id?.toString(),l.UnionId?.toString()].filter(Boolean).some(b=>b===t)),c=["#8884d8","#82ca9d","#ffc658","#ff7c7c","#8dd1e1","#d084d0"],r=c[i%c.length],o=F[t]||[];return e.jsx(ae,{name:`${n?.name||`Athlete ${t}`} - Recovery State`,data:o,fill:r},`scatter-${t}`)})]})})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recovery Events & Alerts"}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-4 top-0 bottom-0 w-0.5 bg-gray-200"}),e.jsx("div",{className:"space-y-6",children:d.map(t=>{const i=y.find(r=>[r.athlete_id,r.id?.toString(),r.Id?.toString(),r.UnionId?.toString()].filter(Boolean).some(l=>l===t)),c=(F[t]||[]).filter(r=>r.events.length>0).sort((r,o)=>new Date(o.date).getTime()-new Date(r.date).getTime());return c.length===0?null:e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-gray-800 border-b pb-2",children:i?.name||`Athlete ${t}`}),c.map((r,o)=>e.jsxs("div",{className:"relative flex items-start",children:[e.jsx("div",{className:`absolute left-2 w-4 h-4 rounded-full border-4 border-white shadow ${r.events.some(l=>l.includes("High Training Load")||l.includes("Inflammation Risk"))?"bg-red-500":r.events.some(l=>l.includes("Poor Autonomic")||l.includes("High Fatigue"))?"bg-orange-500":"bg-yellow-500"}`}),e.jsxs("div",{className:"ml-10 min-w-0 flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:new Date(r.date).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),e.jsx("div",{className:"mt-1 flex flex-wrap gap-2",children:r.events.map((l,A)=>e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${l.includes("High Training Load")||l.includes("Inflammation Risk")?"bg-red-100 text-red-800":l.includes("Poor Autonomic")||l.includes("High Fatigue")?"bg-orange-100 text-orange-800":l.includes("Low")||l.includes("Short")||l.includes("Elevated")?"bg-yellow-100 text-yellow-800":"bg-blue-100 text-blue-800"}`,children:l},A))}),e.jsxs("div",{className:"mt-2 grid grid-cols-2 md:grid-cols-4 gap-4 text-sm text-gray-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Recovery:"})," ",r.recoveryScore===0?"No Data":`${r.recoveryScore}%`]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"HRV:"})," ",r.hrv," ms"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Sleep:"})," ",r.sleepDuration.toFixed(1),"h"]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Fatigue:"})," ",r.fatigueLevel,"%"]})]})]})]},`${t}-${o}`))]},t)})})]}),d.every(t=>(F[t]||[]).filter(n=>n.events.length>0).length===0)&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-4xl mb-4",children:"âœ…"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Recovery Alerts"}),e.jsx("p",{className:"text-gray-600",children:"All selected athletes are maintaining good recovery patterns within the selected time range."})]})]}),e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Recovery Metrics Dashboard"}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8",children:d.map(t=>{const i=y.find(c=>[c.athlete_id,c.id?.toString(),c.Id?.toString(),c.UnionId?.toString()].filter(Boolean).some(o=>o===t)),n=K[t];return F[t],n?e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:i?.name||`Athlete ${t}`}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-600",children:n.overallRecovery===0?"No Data":`${n.overallRecovery}%`}),e.jsx("div",{className:"text-sm text-gray-600",children:"Recovery Score"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-green-600",children:[n.sleepQuality,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Sleep Quality"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-600",children:n.autonomicBalance}),e.jsx("div",{className:"text-sm text-gray-600",children:"Autonomic Balance"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-orange-600",children:[n.fatigueLevel,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Fatigue Level"})]})]}),n.recommendations.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h5",{className:"text-sm font-medium text-gray-700 mb-2",children:"Recovery Recommendations:"}),e.jsx("ul",{className:"text-sm text-gray-600 space-y-1",children:n.recommendations.slice(0,3).map((c,r)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx("span",{className:"text-blue-500 mr-2",children:"â€¢"}),c]},r))})]})]},t):null})}),(()=>{Object.values(F).flat();const t=Object.values(K),i=t.length>0?Math.round(t.reduce((o,l)=>o+l.overallRecovery,0)/t.length):0,n=t.length>0?Math.round(t.reduce((o,l)=>o+l.sleepQuality,0)/t.length):0,c=t.filter(o=>o.fatigueLevel>70).length,r=t.filter(o=>o.inflammationRisk>60).length;return e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-8",children:[e.jsxs("div",{className:"card-enhanced p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i===0?"No Data":`${i}%`}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Recovery Score"})]}),e.jsxs("div",{className:"card-enhanced p-4 text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[n,"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Sleep Quality"})]}),e.jsxs("div",{className:"card-enhanced p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:c}),e.jsx("div",{className:"text-sm text-gray-600",children:"High Fatigue Athletes"})]}),e.jsxs("div",{className:"card-enhanced p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:r}),e.jsx("div",{className:"text-sm text-gray-600",children:"Inflammation Risk"})]})]})})()]}),B&&O.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Genetic Recovery Insights"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:O.map((t,i)=>e.jsxs("div",{className:"card-enhanced p-5",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900",children:t.gene}),e.jsx("div",{className:"mt-1 flex items-center",children:e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:t.trait})})]}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.priority==="high"?"bg-red-100 text-red-800":t.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:t.priority.charAt(0).toUpperCase()+t.priority.slice(1)})]}),e.jsxs("div",{className:"mt-3",children:[e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Impact:"})," ",t.impact]}),e.jsxs("p",{className:"text-sm text-gray-700 mt-2 bg-blue-50 p-3 rounded-md",children:[e.jsx("span",{className:"font-medium",children:"Protocol:"})," ",t.recoveryProtocol]})]})]},i))})]})]})})};export{fe as RecoveryTimeline};
