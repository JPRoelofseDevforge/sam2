import{j as e}from"./index-436f242b.js";import{r as x}from"./vendor-c778fe58.js";import{g as A,w as _}from"./weatherUtils-fe320b1d.js";import{Z as k,D as R,N as E,H as D,n as V,a1 as B,a2 as G,a3 as Y,z as Q,q as W,r as z,_ as K,U as X,y as $,a4 as Z,s as L,a5 as J}from"./ui-bab03d6d.js";const re=({athleteId:ee,geneticData:m})=>{const[a,w]=x.useState(null),[M,b]=x.useState(!0),[u,U]=x.useState("overview"),[q,F]=x.useState(new Date),C={}.VITE_CITY||"Stellenbosch",I={}.VITE_STATE||"Western Cape",T={}.VITE_COUNTRY||"South Africa";x.useEffect(()=>{const s=async()=>{try{b(!0);const l=await _.getCurrentWeather(C,I,T);if(!l.success||!l.data)throw new Error(l.error||l.message||"Failed to fetch weather data");const r=l.data;w({temperature:r.current.temperature,humidity:r.current.humidity,aqi:r.current.air_quality_index||0,co:0,pm25:0,pm10:0,windSpeed:r.current.wind_speed,pressure:r.current.pressure,weatherCondition:r.current.weather_condition,lastUpdated:new Date().toLocaleTimeString(),uvIndex:r.current.uv_index,visibility:r.current.visibility,dewPoint:r.current.dew_point}),F(new Date)}catch{w(null)}finally{b(!1)}};s();const i=setInterval(s,3e5);return()=>clearInterval(i)},[C,I,T]);const P=s=>{if(!s)return"☁️";switch(s){case"01d":return"☀️";case"01n":return"🌙";case"02d":return"⛅";case"02n":return"☁️";case"03d":case"03n":return"☁️";case"04d":case"04n":return"☁️";case"09d":case"09n":return"🌧️";case"10d":case"10n":return"🌧️";case"11d":case"11n":return"⛈️";case"13d":case"13n":return"❄️";case"50d":case"50n":return"🌫️";default:return"☁️"}},O=s=>{if(!s)return"Unknown";switch(s){case"01d":case"01n":return"Clear";case"02d":case"02n":return"Few Clouds";case"03d":case"03n":return"Scattered Clouds";case"04d":case"04n":return"Broken Clouds";case"09d":case"09n":return"Shower Rain";case"10d":case"10n":return"Rain";case"11d":case"11n":return"Thunderstorm";case"13d":case"13n":return"Snow";case"50d":case"50n":return"Mist";default:return"Cloudy"}},v=x.useMemo(()=>{if(!m||!a)return[];const s=[],{temperature:i,humidity:l,windSpeed:r,aqi:n,uvIndex:d}=a,c=m.find(t=>t.gene==="ACTN3")?.genotype;c&&i&&i>28&&(c==="XX"?s.push({gene:"ACTN3",genotype:c,impact:"Reduced power output in heat",severity:"high",recommendation:"Focus on endurance work, avoid high-intensity efforts",icon:e.jsx(k,{className:"w-5 h-5"}),category:"power"}):c==="RR"&&s.push({gene:"ACTN3",genotype:c,impact:"Better heat tolerance for power activities",severity:"low",recommendation:"Can maintain power training in moderate heat",icon:e.jsx(k,{className:"w-5 h-5"}),category:"power"}));const h=m.find(t=>t.gene==="ADRB2")?.genotype;h&&l&&l>70&&h==="Gly16Gly"&&s.push({gene:"ADRB2",genotype:h,impact:"Reduced sweat efficiency in high humidity",severity:"medium",recommendation:"Monitor hydration closely, use cooling strategies",icon:e.jsx(R,{className:"w-5 h-5"}),category:"recovery"});const p=m.find(t=>t.gene==="CFTR")?.genotype;p&&i&&i>25&&p.includes("del")&&s.push({gene:"CFTR",genotype:p,impact:"Increased dehydration risk in heat",severity:"high",recommendation:"Aggressive hydration protocol, electrolyte monitoring",icon:e.jsx(E,{className:"w-5 h-5"}),category:"recovery"});const N=m.find(t=>t.gene==="PPARGC1A")?.genotype;N&&i&&i<10&&N.includes("Ser")&&s.push({gene:"PPARGC1A",genotype:N,impact:"Better cold adaptation and fat metabolism",severity:"low",recommendation:"Can train effectively in cold conditions",icon:e.jsx(D,{className:"w-5 h-5"}),category:"metabolism"});const j=m.find(t=>t.gene==="ACE")?.genotype;j&&i&&i>30&&j==="DD"&&s.push({gene:"ACE",genotype:j,impact:"Higher heat stress risk due to vascular response",severity:"medium",recommendation:"Monitor blood pressure, avoid extreme heat exposure",icon:e.jsx(V,{className:"w-5 h-5"}),category:"stress"});const g=m.find(t=>t.gene==="NOS3")?.genotype;g&&n&&n>100&&g==="TT"&&s.push({gene:"NOS3",genotype:g,impact:"Reduced blood vessel dilation in poor air quality",severity:"medium",recommendation:"Consider indoor training during high pollution",icon:e.jsx(B,{className:"w-5 h-5"}),category:"endurance"});const y=m.find(t=>t.gene==="COL5A1")?.genotype;y&&r&&r>15&&y==="CC"&&s.push({gene:"COL5A1",genotype:y,impact:"Increased soft tissue injury risk in windy conditions",severity:"medium",recommendation:"Focus on stability work, use wind protection",icon:e.jsx(E,{className:"w-5 h-5"}),category:"recovery"});const f=m.find(t=>t.gene==="HFE")?.genotype;return f&&d&&d>7&&f.includes("C282Y")&&s.push({gene:"HFE",genotype:f,impact:"Iron absorption affected by UV exposure",severity:"low",recommendation:"Monitor iron levels, consider sun protection",icon:e.jsx(G,{className:"w-5 h-5"}),category:"metabolism"}),s},[m,a]),H=x.useMemo(()=>{if(!a)return{score:50,category:"moderate",factors:[],recommendations:[]};const{temperature:s,humidity:i,windSpeed:l,aqi:r}=a;let n=100;const d=[],c=[];s&&s>35?(n-=40,d.push("Extreme heat reduces performance by ~15-25%"),c.push("Consider indoor training or early morning sessions")):s&&s>30?(n-=25,d.push("High heat impacts endurance and power output"),c.push("Increase hydration, use cooling strategies")):s&&s<5?(n-=20,d.push("Cold weather reduces muscle performance"),c.push("Extended warm-up, appropriate layering")):s&&s>=15&&s<=25&&(n+=10,d.push("Optimal temperature range for performance")),i&&i>85?(n-=20,d.push("High humidity impairs heat dissipation"),c.push("Monitor core temperature, use fans")):i&&i<30&&(n-=10,d.push("Low humidity increases respiratory stress"),c.push("Stay well hydrated")),l&&l>15&&(n-=15,d.push("Strong winds affect pacing and energy expenditure"),c.push("Adjust pacing strategy, consider protected routes")),r&&r>150?(n-=30,d.push("Poor air quality reduces lung function"),c.push("Consider indoor training, use air filtration")):r&&r>100&&(n-=15,d.push("Moderate air pollution affects respiratory performance"),c.push("Monitor breathing rate, consider masks")),v.forEach(p=>{p.severity==="high"?n-=15:p.severity==="medium"&&(n-=8)}),n=Math.max(0,Math.min(100,n));let h;return n>=80?h="optimal":n>=65?h="good":n>=45?h="moderate":n>=25?h="challenging":h="dangerous",{score:n,category:h,factors:d,recommendations:c}},[a,v]);if(M)return e.jsxs("div",{className:"space-y-6 animate-pulse",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-white-900",children:"🌤️ Weather Impact Analysis"}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(Y,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Updating..."})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsxs("div",{className:"card-enhanced p-4",children:[e.jsx("div",{className:"h-16 bg-gray-300 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"})]},s))}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("div",{className:"h-6 bg-gray-300 rounded w-1/3 mb-4"}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>e.jsx("div",{className:"h-4 bg-gray-300 rounded"},s))})]})]});const o=H,S=v;return e.jsxs("div",{className:"weather-impact-container",children:[e.jsxs("div",{className:"weather-impact-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsxs("div",{className:"weather-indicator-enhanced",children:[e.jsx("div",{className:"indicator-pulse-enhanced"}),e.jsx("div",{className:"indicator-dot-enhanced"})]}),e.jsxs("div",{className:"header-content",children:[e.jsx("h2",{className:"weather-impact-title",children:"Weather Impact Analysis"}),e.jsx("p",{className:"weather-impact-subtitle",children:"Genetic × Environmental Performance Factors"})]})]}),e.jsxs("div",{className:"header-status",children:[e.jsxs("div",{className:"live-indicator",children:[e.jsx("span",{className:"live-dot"}),e.jsx("span",{className:"live-text",children:"LIVE"})]}),e.jsxs("div",{className:"update-time",children:[e.jsx(Q,{className:"w-4 h-4"}),e.jsxs("span",{children:["Updated ",q.toLocaleTimeString()]})]})]})]}),e.jsxs("div",{className:"performance-overview-card",children:[e.jsxs("div",{className:"performance-header",children:[e.jsx("h3",{className:"performance-title",children:"Performance Impact Score"}),e.jsx("div",{className:`performance-badge ${o.category}`,children:o.category.toUpperCase()})]}),e.jsxs("div",{className:"performance-content",children:[e.jsx("div",{className:"performance-gauge",children:e.jsxs("div",{className:"gauge-container",children:[e.jsxs("svg",{className:"performance-gauge-svg",viewBox:"0 0 120 120",children:[e.jsx("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"currentColor",strokeWidth:"8",className:"gauge-background"}),e.jsx("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"currentColor",strokeWidth:"8",strokeDasharray:`${3.14*o.score} 314`,className:`gauge-progress ${o.category}`,strokeLinecap:"round",transform:"rotate(-90 60 60)"})]}),e.jsxs("div",{className:"gauge-value",children:[e.jsx("span",{className:"gauge-number",children:o.score}),e.jsx("span",{className:"gauge-percent",children:"%"})]})]})}),e.jsx("div",{className:"performance-factors",children:e.jsx("div",{className:"factors-list",children:o.factors?.slice(0,3).map((s,i)=>e.jsxs("div",{className:"factor-item",children:[e.jsx(W,{className:"w-4 h-4 text-amber-500 flex-shrink-0"}),e.jsx("span",{className:"factor-text",children:s})]},i))})})]})]}),e.jsx("div",{className:"weather-tabs-container",children:e.jsx("div",{className:"weather-tabs",children:[{id:"overview",label:"Overview",icon:"📊",color:"blue"},{id:"genetics",label:"Genetics",icon:"🧬",color:"purple"},{id:"performance",label:"Performance",icon:"⚡",color:"green"}].map(s=>e.jsxs("button",{onClick:()=>U(s.id),className:`weather-tab ${u===s.id?"active":""}`,children:[e.jsx("span",{className:"tab-icon",children:s.icon}),e.jsx("span",{className:"tab-label",children:s.label}),u===s.id&&e.jsx("div",{className:`tab-indicator ${s.color}`})]},s.id))})}),e.jsxs("div",{className:"weather-tab-content",children:[u==="overview"&&e.jsxs("div",{className:"overview-tab",children:[e.jsxs("div",{className:"conditions-grid",children:[e.jsxs("div",{className:"condition-card primary",children:[e.jsx("div",{className:"condition-icon",children:a?P(a.weatherCondition):"❓"}),e.jsxs("div",{className:"condition-info",children:[e.jsx("div",{className:"condition-name",children:a?O(a.weatherCondition):"Weather Unavailable"}),e.jsx("div",{className:"condition-label",children:"Current Conditions"})]})]}),e.jsxs("div",{className:"condition-card",children:[e.jsx(z,{className:"w-6 h-6 text-orange-500"}),e.jsxs("div",{className:"condition-info",children:[e.jsx("div",{className:"condition-value temp-value-enhanced",children:a?`${a.temperature}°C`:"--°C"}),e.jsx("div",{className:"condition-label",children:"Temperature"})]}),e.jsx("div",{className:"condition-trend",children:a&&a.temperature>25?e.jsx(K,{className:"w-4 h-4 text-red-500"}):a&&a.temperature<15?e.jsx(X,{className:"w-4 h-4 text-blue-500"}):e.jsx($,{className:"w-4 h-4 text-green-500"})})]}),e.jsxs("div",{className:"condition-card",children:[e.jsx(R,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"condition-info",children:[e.jsx("div",{className:"condition-value humidity-value-enhanced",children:a?`${a.humidity}%`:"--%"}),e.jsx("div",{className:"condition-label",children:"Humidity"})]}),e.jsx("div",{className:"condition-bar",children:e.jsx("div",{className:"condition-progress humidity-progress",style:{width:`${a?a.humidity:0}%`}})})]}),e.jsxs("div",{className:"condition-card",children:[e.jsx(Z,{className:"w-6 h-6 text-gray-500"}),e.jsxs("div",{className:"condition-info",children:[e.jsx("div",{className:"condition-value wind-value-enhanced",children:a?`${a.windSpeed} km/h`:"-- km/h"}),e.jsx("div",{className:"condition-label",children:"Wind Speed"})]}),e.jsx("div",{className:"wind-intensity",children:a&&a.windSpeed<5?"Calm":a&&a.windSpeed<15?"Light":a&&a.windSpeed<25?"Moderate":"Strong"})]})]}),e.jsxs("div",{className:"secondary-metrics",children:[e.jsxs("div",{className:"metric-secondary",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("h4",{className:"metric-title",children:"Air Quality"}),e.jsx("div",{className:`aqi-badge ${A(a?.aqi||0).class}`,children:A(a?.aqi||0).label})]}),e.jsx("div",{className:"metric-value-large aqi-value-enhanced",children:a?a.aqi:"--"}),e.jsx("div",{className:"metric-subtitle",children:"AQI Index"})]}),e.jsxs("div",{className:"metric-secondary",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("h4",{className:"metric-title",children:"UV Index"}),e.jsx("div",{className:`uv-badge ${a&&(a.uvIndex||0)<=2?"low":a&&(a.uvIndex||0)<=5?"moderate":a&&(a.uvIndex||0)<=7?"high":"extreme"}`,children:a&&(a.uvIndex||0)<=2?"Low":a&&(a.uvIndex||0)<=5?"Moderate":a&&(a.uvIndex||0)<=7?"High":"Extreme"})]}),e.jsx("div",{className:"metric-value-large",children:a?a.uvIndex||0:"--"}),e.jsx("div",{className:"metric-subtitle",children:"UV Index"})]}),e.jsxs("div",{className:"metric-secondary",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("h4",{className:"metric-title",children:"Visibility"}),e.jsx(G,{className:"w-5 h-5 text-gray-600"})]}),e.jsx("div",{className:"metric-value-large",children:a?`${a.visibility||10} km`:"-- km"}),e.jsx("div",{className:"metric-subtitle",children:"Visibility Range"})]})]})]}),u==="genetics"&&e.jsxs("div",{className:"genetics-tab",children:[e.jsxs("div",{className:"genetics-header",children:[e.jsx(L,{className:"w-8 h-8 text-purple-500"}),e.jsx("h3",{className:"genetics-title",children:"Genetic Impact Analysis"}),e.jsx("p",{className:"genetics-subtitle",children:"Weather-responsive genetic factors"})]}),S.length>0?e.jsx("div",{className:"genetic-impacts-grid",children:S.map((s,i)=>e.jsxs("div",{className:`genetic-impact-card ${s.category}`,children:[e.jsxs("div",{className:"impact-header",children:[e.jsx("div",{className:"impact-icon-container",children:s.icon}),e.jsxs("div",{className:"impact-gene-info",children:[e.jsx("h4",{className:"impact-gene",children:s.gene}),e.jsxs("p",{className:"impact-genotype",children:["Genotype: ",s.genotype]})]}),e.jsx("div",{className:`impact-severity ${s.severity}`,children:s.severity.toUpperCase()})]}),e.jsxs("div",{className:"impact-content",children:[e.jsx("p",{className:"impact-description",children:s.impact}),e.jsxs("div",{className:"impact-recommendation",children:[e.jsx(J,{className:"w-4 h-4"}),e.jsx("span",{children:s.recommendation})]})]}),e.jsx("div",{className:`impact-category-badge ${s.category}`,children:s.category})]},i))}):e.jsxs("div",{className:"no-genetic-impacts",children:[e.jsx(L,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h4",{className:"no-impacts-title",children:"No Genetic Impacts Detected"}),e.jsx("p",{className:"no-impacts-text",children:"Current weather conditions don't trigger any significant genetic responses for this athlete."})]})]}),u==="performance"&&e.jsx("div",{className:"performance-tab",children:e.jsxs("div",{className:"performance-recommendations",children:[e.jsxs("div",{className:"recommendations-section",children:[e.jsx("h3",{className:"section-title",children:"Training Recommendations"}),e.jsxs("div",{className:"recommendations-grid",children:[e.jsxs("div",{className:"recommendation-card",children:[e.jsx($,{className:"w-6 h-6 text-green-500"}),e.jsx("h4",{className:"rec-title",children:"Recommended Actions"}),e.jsx("ul",{className:"rec-list",children:o.recommendations?.map((s,i)=>e.jsx("li",{className:"rec-item",children:s},i))})]}),e.jsxs("div",{className:"recommendation-card",children:[e.jsx(W,{className:"w-6 h-6 text-red-500"}),e.jsx("h4",{className:"rec-title",children:"Avoid These"}),e.jsxs("ul",{className:"rec-list",children:[e.jsx("li",{className:"rec-item",children:"Ignore hydration needs"}),e.jsx("li",{className:"rec-item",children:"Push through extreme discomfort"}),e.jsx("li",{className:"rec-item",children:"Train without monitoring vital signs"}),e.jsx("li",{className:"rec-item",children:"Skip warm-up in cold conditions"})]})]})]})]}),e.jsxs("div",{className:"training-intensity-section",children:[e.jsx("h3",{className:"section-title",children:"Training Intensity Guide"}),e.jsxs("div",{className:"intensity-cards",children:[e.jsxs("div",{className:"intensity-card",children:[e.jsx("div",{className:"intensity-icon",children:"🏃‍♂️"}),e.jsxs("div",{className:"intensity-info",children:[e.jsx("div",{className:"intensity-name",children:"Cardiovascular"}),e.jsx("div",{className:"intensity-level",children:o.score>70?"High intensity OK":o.score>50?"Moderate intensity":"Low intensity only"})]})]}),e.jsxs("div",{className:"intensity-card",children:[e.jsx("div",{className:"intensity-icon",children:"💪"}),e.jsxs("div",{className:"intensity-info",children:[e.jsx("div",{className:"intensity-name",children:"Strength Training"}),e.jsx("div",{className:"intensity-level",children:o.score>60?"Full strength work":"Light weights only"})]})]}),e.jsxs("div",{className:"intensity-card",children:[e.jsx("div",{className:"intensity-icon",children:"🎯"}),e.jsxs("div",{className:"intensity-info",children:[e.jsx("div",{className:"intensity-name",children:"Skill Work"}),e.jsx("div",{className:"intensity-level",children:o.score>40?"Technical training OK":"Focus on recovery"})]})]})]})]})]})}),u==="forecast"&&e.jsx("div",{className:"forecast-tab",children:e.jsxs("div",{className:"forecast-placeholder",children:[e.jsx("div",{className:"forecast-icon",children:"🔮"}),e.jsx("h3",{className:"forecast-title",children:"Advanced Weather Forecasting"}),e.jsx("p",{className:"forecast-description",children:"5-day weather predictions and trend analysis"}),e.jsxs("div",{className:"forecast-features",children:[e.jsxs("div",{className:"forecast-feature",children:[e.jsx("span",{className:"feature-icon",children:"📈"}),e.jsx("span",{className:"feature-text",children:"Performance trend analysis"})]}),e.jsxs("div",{className:"forecast-feature",children:[e.jsx("span",{className:"feature-icon",children:"🎯"}),e.jsx("span",{className:"feature-text",children:"Optimal training windows"})]}),e.jsxs("div",{className:"forecast-feature",children:[e.jsx("span",{className:"feature-icon",children:"⚠️"}),e.jsx("span",{className:"feature-text",children:"Weather risk alerts"})]})]}),e.jsx("div",{className:"forecast-coming-soon",children:"Coming Soon - Q2 2024"})]})})]})]})};export{re as W};
