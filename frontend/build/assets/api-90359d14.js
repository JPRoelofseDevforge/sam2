const f="https://samintelligeneapi.azurewebsites.net/api",h={"Content-Type":"application/json"};class s extends Error{constructor(t,a,e){super(t),this.status=a,this.data=e,this.name="ApiError"}}const u=async r=>{if(!r.ok){let a=`HTTP ${r.status}: ${r.statusText}`,e;try{e=await r.json(),e.Info&&e.Code!==1?a=e.Info:e.error&&(a=e.error)}catch{}throw new s(a,r.status,e)}const t=await r.json();if(t&&typeof t=="object"&&"Code"in t&&"Info"in t){if(t.Code!==1)throw new s(t.Info||"API Error",r.status,t);return t.Data}return t},l=async(r,t)=>{const a=new URL(`${f}${r}`);t&&Object.entries(t).forEach(([c,o])=>{o!=null&&a.searchParams.append(c,String(o))});const e=localStorage.getItem("authToken"),n={...h,...e&&{Authorization:`Bearer ${e}`}},i=await fetch(a.toString(),{headers:n});return u(i)};export{l as a};
