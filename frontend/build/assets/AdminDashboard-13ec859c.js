import{k as T,j as e}from"./index-2fe32897.js";import{r as o}from"./vendor-26c3c1d8.js";import"./three-f2a0a5ce.js";const v=[{name:"users",displayName:"Users",readEndpoint:"users",primaryKey:"Id",fields:[{name:"Username",displayName:"Username",type:"text",required:!0},{name:"Email",displayName:"Email",type:"text",required:!0},{name:"IsActive",displayName:"Active",type:"boolean"},{name:"CreatedAt",displayName:"Created At",type:"date",required:!1},{name:"UpdatedAt",displayName:"Updated At",type:"date",required:!1}]},{name:"roles",displayName:"Roles",readEndpoint:"roles",primaryKey:"Id",fields:[{name:"Name",displayName:"Name",type:"text",required:!0},{name:"Description",displayName:"Description",type:"text",required:!0},{name:"IsActive",displayName:"Active",type:"boolean"}]},{name:"organizations",displayName:"Organizations",readEndpoint:"organizations",writeEndpoint:"admin/organizations",primaryKey:"Id",fields:[{name:"Name",displayName:"Name",type:"text",required:!0},{name:"Description",displayName:"Description",type:"text",required:!0},{name:"IsActive",displayName:"Active",type:"boolean"},{name:"CreatedAt",displayName:"Created At",type:"date"},{name:"UpdatedAt",displayName:"Updated At",type:"date"}]},{name:"athletes",displayName:"Athletes",readEndpoint:"athletes",primaryKey:"Id",fields:[{name:"UnionId",displayName:"Union ID",type:"text",required:!0},{name:"FirstName",displayName:"First Name",type:"text",required:!0},{name:"LastName",displayName:"Last Name",type:"text",required:!0},{name:"DateOfBirth",displayName:"Date of Birth",type:"date",required:!0},{name:"Gender",displayName:"Gender",type:"dropdown",required:!0,dropdownOptions:[{value:"Male",label:"Male"},{value:"Female",label:"Female"},{value:"Other",label:"Other"}]},{name:"SportId",displayName:"Sport",type:"dropdown",dropdownEndpoint:"sports",dropdownValueField:"Id",dropdownLabelField:"Name"},{name:"Sport",displayName:"Sport Name (if no SportId)",type:"text"},{name:"CreatedAt",displayName:"Created At",type:"date"},{name:"UpdatedAt",displayName:"Updated At",type:"date"}]},{name:"sports",displayName:"Sports",readEndpoint:"sports",writeEndpoint:"admin/sports",primaryKey:"Id",fields:[{name:"Name",displayName:"Name",type:"text",required:!0},{name:"Description",displayName:"Description",type:"text",required:!0},{name:"CategoryId",displayName:"Category",type:"dropdown",required:!0,dropdownEndpoint:"sport-categories",dropdownValueField:"Id",dropdownLabelField:"Name"},{name:"IsActive",displayName:"Active",type:"boolean"},{name:"CreatedAt",displayName:"Created At",type:"date"},{name:"UpdatedAt",displayName:"Updated At",type:"date"}]},{name:"sportcategories",displayName:"Sport Categories",readEndpoint:"sport-categories",writeEndpoint:"admin/sport-categories",primaryKey:"Id",fields:[{name:"Name",displayName:"Name",type:"text",required:!0},{name:"Description",displayName:"Description",type:"text",required:!0},{name:"IsActive",displayName:"Active",type:"boolean"},{name:"CreatedAt",displayName:"Created At",type:"date"},{name:"UpdatedAt",displayName:"Updated At",type:"date"}]},{name:"alerttypes",displayName:"Alert Types",readEndpoint:"alerttypes",primaryKey:"Id",fields:[{name:"Name",displayName:"Name",type:"text",required:!0},{name:"Description",displayName:"Description",type:"text",required:!0},{name:"Category",displayName:"Category",type:"text",required:!0},{name:"Severity",displayName:"Severity",type:"dropdown",required:!0,dropdownOptions:[{value:"Low",label:"Low"},{value:"Medium",label:"Medium"},{value:"High",label:"High"},{value:"Critical",label:"Critical"}]},{name:"IsActive",displayName:"Active",type:"boolean"},{name:"CreatedAt",displayName:"Created At",type:"date"},{name:"UpdatedAt",displayName:"Updated At",type:"date"}]},{name:"bloodtesttypes",displayName:"Blood Test Types",readEndpoint:"bloodtesttypes",primaryKey:"Id",fields:[{name:"Name",displayName:"Name",type:"text",required:!0},{name:"Description",displayName:"Description",type:"text",required:!0},{name:"Category",displayName:"Category",type:"text",required:!0},{name:"IsActive",displayName:"Active",type:"boolean"}]},{name:"genetictesttypes",displayName:"Genetic Test Types",readEndpoint:"genetictesttypes",primaryKey:"Id",fields:[{name:"Name",displayName:"Name",type:"text",required:!0},{name:"Description",displayName:"Description",type:"text",required:!0},{name:"Category",displayName:"Category",type:"text",required:!0},{name:"Methodology",displayName:"Methodology",type:"text",required:!0},{name:"Cost",displayName:"Cost",type:"number",required:!0},{name:"IsActive",displayName:"Active",type:"boolean"},{name:"CreatedAt",displayName:"Created At",type:"date"},{name:"UpdatedAt",displayName:"Updated At",type:"date"}]},{name:"genes",displayName:"Genes",readEndpoint:"genes",primaryKey:"Id",fields:[{name:"Name",displayName:"Name",type:"text",required:!0},{name:"Symbol",displayName:"Symbol",type:"text",required:!0},{name:"Description",displayName:"Description",type:"text",required:!0},{name:"Category",displayName:"Category",type:"text",required:!0},{name:"Chromosome",displayName:"Chromosome",type:"text",required:!0},{name:"CreatedAt",displayName:"Created At",type:"date"},{name:"UpdatedAt",displayName:"Updated At",type:"date"}]},{name:"metricconfigs",displayName:"Metric Configurations",readEndpoint:"metrics/config",primaryKey:"Id",fields:[{name:"MetricName",displayName:"Metric Name",type:"text",required:!0},{name:"Unit",displayName:"Unit",type:"text",required:!0},{name:"MinValue",displayName:"Min Value",type:"number"},{name:"MaxValue",displayName:"Max Value",type:"number"},{name:"AlertThreshold",displayName:"Alert Threshold",type:"number"}]},{name:"predictiverules",displayName:"Predictive Rules",readEndpoint:"rules/predictive",primaryKey:"Id",fields:[{name:"Name",displayName:"Name",type:"text",required:!0},{name:"Description",displayName:"Description",type:"text",required:!0},{name:"Conditions",displayName:"Conditions",type:"text",required:!0},{name:"Actions",displayName:"Actions",type:"text",required:!0},{name:"IsActive",displayName:"Active",type:"boolean"}]},{name:"biometricdaily",displayName:"Biometric Daily",readEndpoint:"biometric-daily",primaryKey:"Id",fields:[{name:"AthleteId",displayName:"Athlete",type:"dropdown",required:!0,dropdownEndpoint:"athletes",dropdownValueField:"Id",dropdownLabelField:"FirstName"},{name:"Date",displayName:"Date",type:"date",required:!0},{name:"RestingHeartRate",displayName:"Resting Heart Rate",type:"number"},{name:"HeartRateVariability",displayName:"Heart Rate Variability",type:"number"},{name:"SleepQuality",displayName:"Sleep Quality",type:"number"},{name:"RecoveryScore",displayName:"Recovery Score",type:"number"},{name:"FatigueLevel",displayName:"Fatigue Level",type:"number"}]},{name:"bloodresults",displayName:"Blood Results",readEndpoint:"blood-results",primaryKey:"Id",fields:[{name:"AthleteId",displayName:"Athlete",type:"dropdown",required:!0,dropdownEndpoint:"athletes",dropdownValueField:"Id",dropdownLabelField:"FirstName"},{name:"TestDate",displayName:"Test Date",type:"date",required:!0},{name:"LabName",displayName:"Lab Name",type:"text",required:!0},{name:"Notes",displayName:"Notes",type:"text",required:!0},{name:"CreatedAt",displayName:"Created At",type:"date"},{name:"UpdatedAt",displayName:"Updated At",type:"date"}]},{name:"bodycompositions",displayName:"Body Compositions",readEndpoint:"body-composition",writeEndpoint:"body-composition/admin",primaryKey:"Id",fields:[{name:"AthleteId",displayName:"Athlete",type:"dropdown",required:!0,dropdownEndpoint:"athletes",dropdownValueField:"Id",dropdownLabelField:"FirstName"},{name:"MeasurementDate",displayName:"Measurement Date",type:"date",required:!0},{name:"Weight",displayName:"Weight (kg)",type:"number",required:!0},{name:"BodyFat",displayName:"Body Fat (%)",type:"number",required:!0},{name:"MuscleMass",displayName:"Muscle Mass (kg)",type:"number",required:!0},{name:"BoneDensity",displayName:"Bone Density",type:"number",required:!0}]},{name:"genetictestresults",displayName:"Genetic Test Results",readEndpoint:"genetic-test-results",primaryKey:"Id",fields:[{name:"AthleteId",displayName:"Athlete",type:"dropdown",required:!0,dropdownEndpoint:"athletes",dropdownValueField:"Id",dropdownLabelField:"FirstName"},{name:"TestTypeId",displayName:"Test Type",type:"dropdown",required:!0,dropdownEndpoint:"genetictesttypes",dropdownValueField:"Id",dropdownLabelField:"Name"},{name:"TestDate",displayName:"Test Date",type:"date",required:!0},{name:"ResultSummary",displayName:"Result Summary",type:"text"},{name:"Recommendations",displayName:"Recommendations",type:"text"},{name:"CreatedAt",displayName:"Created At",type:"date"},{name:"UpdatedAt",displayName:"Updated At",type:"date"}]},{name:"geneticprofiles",displayName:"Genetic Profiles",readEndpoint:"geneticprofiles",primaryKey:"Id",fields:[{name:"AthleteId",displayName:"Athlete",type:"dropdown",required:!0,dropdownEndpoint:"athletes",dropdownValueField:"Id",dropdownLabelField:"FirstName"},{name:"GeneId",displayName:"Gene",type:"dropdown",dropdownEndpoint:"genes",dropdownValueField:"Id",dropdownLabelField:"Name"},{name:"GeneticTestTypeId",displayName:"Test Type",type:"dropdown",dropdownEndpoint:"genetictesttypes",dropdownValueField:"Id",dropdownLabelField:"Name"},{name:"Genotype",displayName:"Genotype",type:"text"},{name:"Phenotype",displayName:"Phenotype",type:"text"},{name:"RiskLevel",displayName:"Risk Level",type:"text"},{name:"CreatedAt",displayName:"Created At",type:"date"},{name:"UpdatedAt",displayName:"Updated At",type:"date"}]}],M=()=>{const{token:p}=T(),[s,D]=o.useState(null),[b,g]=o.useState([]),[j,w]=o.useState(!1),[A,i]=o.useState(null),[l,m]=o.useState(null),[q,y]=o.useState(!1),[f,u]=o.useState({}),[x,E]=o.useState({}),c="https://samintelligeneapi.azurewebsites.net/api";o.useEffect(()=>{s&&(h(),C())},[s]);const h=async()=>{if(!(!s||!p)){w(!0),i(null);try{const a=await fetch(`${c}/${s.readEndpoint}`,{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(a.ok){const d=await a.json();let t=[];if(d.Code===1&&d.Data){if(Array.isArray(d.Data))t=d.Data;else if(d.Data&&d.Data.$values)t=d.Data.$values;else if(d.Data&&d.Data.records)t=d.Data.records;else if(typeof d.Data=="object")if(s.name in d.Data){const r=d.Data[s.name];t=Array.isArray(r)?r:r?.$values||[]}else if(s.name+"s"in d.Data){const r=d.Data[s.name+"s"];t=Array.isArray(r)?r:r?.$values||[]}else"values"in d.Data?t=Array.isArray(d.Data.values)?d.Data.values:[]:t=[]}else Array.isArray(d)?t=d:t=[];Array.isArray(t)||(t=[]),g(t)}else i(`Failed to load ${s.displayName}`)}catch{i(`Error loading ${s.displayName}`)}finally{w(!1)}}},C=async()=>{if(!s)return;const a={};for(const d of s.fields)if(d.type==="dropdown"&&d.dropdownEndpoint)try{const t=await fetch(`${c}/${d.dropdownEndpoint}`,{headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}});if(t.ok){const r=await t.json();let n=[];if(r.Code===1&&r.Data)if(Array.isArray(r.Data))n=r.Data;else if(r.Data&&r.Data.$values)n=r.Data.$values;else if(r.Data&&r.Data.records)n=r.Data.records;else if(typeof r.Data=="object")if(d.dropdownEndpoint in r.Data){const N=r.Data[d.dropdownEndpoint];n=Array.isArray(N)?N:N?.$values||[]}else"values"in r.Data?n=Array.isArray(r.Data.values)?r.Data.values:[]:n=[];else n=[];else Array.isArray(r)?n=r:n=[];Array.isArray(n)||(n=[]),a[d.dropdownEndpoint]=n}}catch{}E(a)},I=()=>{m(null),u({}),y(!0)},F=a=>{m(a),u({...a}),y(!0)},S=async a=>{if(!(!s||!confirm(`Are you sure you want to delete this ${s.displayName.toLowerCase()}?`)))try{const d=s.writeEndpoint||s.readEndpoint;(await fetch(`${c}/${d}/${a[s.primaryKey]}`,{method:"DELETE",headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"}})).ok?h():i(`Failed to delete ${s.displayName}`)}catch{i(`Error deleting ${s.displayName}`)}},U=async a=>{if(a.preventDefault(),!!s)try{const d=l?"PUT":"POST",t=s.writeEndpoint||s.readEndpoint,r=l?`${c}/${t}/${l[s.primaryKey]}`:`${c}/${t}`,n=await fetch(r,{method:d,headers:{Authorization:`Bearer ${p}`,"Content-Type":"application/json"},body:JSON.stringify(f)});if(n.ok)y(!1),u({}),m(null),h();else{const N=await n.json();i(N.Info||`Failed to ${l?"update":"create"} ${s.displayName}`)}}catch{i(`Error ${l?"updating":"creating"} ${s.displayName}`)}},$=(a,d,t)=>{switch(a.type){case"text":return e.jsx("input",{type:"text",value:d||"",onChange:r=>t(r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:a.required});case"number":return e.jsx("input",{type:"number",value:d||"",onChange:r=>t(r.target.value?parseFloat(r.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:a.required});case"date":return e.jsx("input",{type:"datetime-local",value:d?new Date(d).toISOString().slice(0,16):"",onChange:r=>t(r.target.value?new Date(r.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:a.required});case"boolean":return e.jsx("input",{type:"checkbox",checked:d||!1,onChange:r=>t(r.target.checked),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"});case"dropdown":if(a.dropdownOptions)return e.jsxs("select",{value:d||"",onChange:r=>t(r.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:a.required,children:[e.jsxs("option",{value:"",children:["Select ",a.displayName]}),a.dropdownOptions.map(r=>e.jsx("option",{value:r.value,children:r.label},r.value))]});if(a.dropdownEndpoint&&x[a.dropdownEndpoint]){const r=x[a.dropdownEndpoint];return e.jsxs("select",{value:d||"",onChange:n=>t(n.target.value?parseInt(n.target.value):null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",required:a.required,children:[e.jsxs("option",{value:"",children:["Select ",a.displayName]}),r.map(n=>e.jsx("option",{value:n[a.dropdownValueField||"Id"],children:n[a.dropdownLabelField||"Name"]},n[a.dropdownValueField||"Id"]))]})}return e.jsx("div",{children:"Loading options..."});default:return e.jsx("div",{children:"Unsupported field type"})}};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-900 via-blue-900 to-purple-900",children:[e.jsx("div",{className:"bg-white/10 backdrop-blur-md border-b border-white/20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between h-16",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Admin Dashboard"}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("select",{value:s?.name||"",onChange:a=>{const d=v.find(t=>t.name===a.target.value);D(d||null),g([]),i(null),y(!1),m(null)},className:"px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:[e.jsx("option",{value:"",children:"Select Table"}),v.map(a=>e.jsx("option",{value:a.name,children:a.displayName},a.name))]})})]})})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:e.jsxs("div",{className:"bg-white/90 backdrop-blur-sm rounded-xl shadow-lg p-6",children:[A&&e.jsxs("div",{className:"mb-4 p-4 bg-red-100 border border-red-400 text-red-700 rounded-lg",children:[A,e.jsx("button",{onClick:()=>i(null),className:"ml-2 text-red-900 hover:text-red-700",children:"×"})]}),s&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:[s.displayName," Management"]}),e.jsxs("button",{onClick:I,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:["Add New ",s.displayName]})]}),q&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold mb-4",children:[l?"Edit":"Add New"," ",s.displayName]}),e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:s.fields.map(a=>e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[a.displayName,a.required&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),$(a,f[a.name],d=>{u(t=>({...t,[a.name]:d}))})]},a.name))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[l?"Update":"Create"," ",s.displayName]}),e.jsx("button",{type:"button",onClick:()=>{y(!1),u({}),m(null)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:"Cancel"})]})]})]}),j?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[s.fields.map(a=>e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:a.displayName},a.name)),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:s.fields.length+1,className:"px-6 py-4 text-center text-gray-500",children:["No ",s.displayName.toLowerCase()," found"]})}):(Array.isArray(b)?b:[]).map((a,d)=>e.jsxs("tr",{children:[s.fields.map(t=>e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:t.type==="boolean"?e.jsx("span",{className:`px-2 py-1 text-xs rounded-full ${a[t.name]?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:a[t.name]?"Yes":"No"}):t.type==="date"&&a[t.name]?new Date(a[t.name]).toLocaleDateString():t.type==="dropdown"&&t.dropdownEndpoint&&x[t.dropdownEndpoint]?x[t.dropdownEndpoint].find(r=>r[t.dropdownValueField||"Id"]===a[t.name])?.[t.dropdownLabelField||"Name"]||a[t.name]:String(a[t.name]||"")},t.name)),e.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[e.jsx("button",{onClick:()=>F(a),className:"text-blue-600 hover:text-blue-900 mr-3",children:"Edit"}),e.jsx("button",{onClick:()=>S(a),className:"text-red-600 hover:text-red-900",children:"Delete"})]})]},a[s.primaryKey]||d))})]})})]}),!s&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-6xl mb-4",children:"⚙️"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Admin Dashboard"}),e.jsx("p",{className:"text-gray-600",children:"Select a table from the dropdown above to start managing data"})]})]})})]})};export{M as AdminDashboard};
