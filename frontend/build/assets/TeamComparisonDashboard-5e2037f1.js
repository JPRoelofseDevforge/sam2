import{j as e,d as C}from"./index-094af1c7.js";import{r}from"./vendor-c778fe58.js";import{c as _,a as A}from"./analytics-f7964037.js";import{R as b,m as H,c as L,X as F,Y as M,T as N,B as P,f as T,P as B,g as G,h as E,i as K}from"./ui-658ae121.js";import"./three-f2a0a5ce.js";const I=()=>{const[c,m]=r.useState([]),[o,f]=r.useState("readiness"),[d,v]=r.useState([]),[h,w]=r.useState([]),[p,S]=r.useState([]),[k,g]=r.useState(!0),[j,u]=r.useState(null);r.useEffect(()=>{(async()=>{try{g(!0),u(null);const a=await C.getData();v(a.athletes),w(a.biometricData),S(a.geneticProfiles)}catch{u("Failed to load team comparison data")}finally{g(!1)}})()},[]);const y=r.useMemo(()=>d.length?d.map(s=>{const a=h.filter(x=>x.athlete_id===s.athlete_id),t=p.filter(x=>x.athlete_id===s.athlete_id),l=a[a.length-1];return{athlete_id:s.athlete_id,name:s.name,readinessScore:l?_(l):0,hrv:l?.hrv_night||0,restingHr:l?.resting_hr||0,sleepDuration:l?.sleep_duration_h||0,spo2:l?.spo2_night||0,trainingLoad:l?.training_load_pct||0,geneticInsights:A(t)}}):[],[d,h,p]),R=s=>{c.includes(s)?m(c.filter(a=>a!==s)):m([...c,s])},i=y.filter(s=>c.includes(s.athlete_id)),n=i.map(s=>{let a=0,t="";switch(o){case"readiness":a=s.readinessScore,t="Readiness Score";break;case"hrv":a=s.hrv,t="HRV (ms)";break;case"restingHr":a=s.restingHr,t="Resting HR (bpm)";break;case"sleep":a=s.sleepDuration,t="Sleep (h)";break;case"spo2":a=s.spo2,t="SpO2 (%)";break;case"trainingLoad":a=s.trainingLoad,t="Training Load (%)";break;default:a=s.readinessScore,t="Readiness Score"}return{name:s.name,value:a,label:t}});i.map(s=>{const a=s.geneticInsights.length;return{name:s.name,insights:a,fullMark:10}});const D=i.map(s=>{let a=0;switch(o){case"readiness":a=s.readinessScore;break;case"hrv":a=s.hrv;break;case"restingHr":a=s.restingHr;break;case"sleep":a=s.sleepDuration;break;case"spo2":a=s.spo2;break;case"trainingLoad":a=s.trainingLoad;break;default:a=s.readinessScore}return{name:s.name,value:a,fullMark:100}});return k?e.jsx("div",{className:"space-y-8",children:e.jsx("div",{className:"card-enhanced p-6",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading team comparison data..."})]})})})}):j?e.jsx("div",{className:"space-y-8",children:e.jsx("div",{className:"card-enhanced p-6",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-4xl mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Failed to Load Data"}),e.jsx("p",{className:"text-gray-600 mb-4",children:j}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Retry"})]})})})}):d.length?e.jsx("div",{className:"space-y-8",children:e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Team Comparison Dashboard"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Compare athletes side-by-side across key metrics"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Athletes to Compare"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:y.map(s=>e.jsxs("div",{className:`p-3 rounded-lg border cursor-pointer transition-all ${c.includes(s.athlete_id)?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>R(s.athlete_id),children:[e.jsx("div",{className:"font-medium text-sm text-gray-900 truncate",children:s.name}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[s.readinessScore.toFixed(0),"% ready"]})]},s.athlete_id))})]}),i.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Metric"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[{id:"readiness",label:"Readiness Score"},{id:"hrv",label:"HRV (ms)"},{id:"restingHr",label:"Resting HR (bpm)"},{id:"sleep",label:"Sleep Duration (h)"},{id:"spo2",label:"SpO2 (%)"},{id:"trainingLoad",label:"Training Load (%)"}].map(s=>e.jsx("button",{className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${o===s.id?"bg-blue-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,onClick:()=>f(s.id),children:s.label},s.id))})]}),i.length>0?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"card-enhanced p-5",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[n[0]?.label||"Metric"," Comparison"]}),e.jsx("div",{className:"h-80",children:e.jsx(b,{width:"100%",height:"100%",children:e.jsxs(H,{data:n,children:[e.jsx(L,{strokeDasharray:"3 3"}),e.jsx(F,{dataKey:"name"}),e.jsx(M,{}),e.jsx(N,{}),e.jsx(P,{dataKey:"value",fill:"#6366f1"})]})})})]}),e.jsxs("div",{className:"card-enhanced p-5",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:[n[0]?.label||"Metric"," Comparison (Spider Chart)"]}),e.jsx("div",{className:"h-80",children:e.jsx(b,{width:"100%",height:"100%",children:e.jsxs(T,{cx:"50%",cy:"50%",outerRadius:"80%",data:D,children:[e.jsx(B,{}),e.jsx(G,{dataKey:"name"}),e.jsx(E,{domain:[0,100]}),e.jsx(K,{name:n[0]?.label||"Metric",dataKey:"value",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),e.jsx(N,{})]})})})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"👥"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Select Athletes to Compare"}),e.jsx("p",{className:"text-gray-600",children:"Choose athletes from the grid above to see detailed comparisons"})]}),i.length>0&&e.jsxs("div",{className:"mt-8 card-enhanced p-5 overflow-x-auto",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Detailed Metrics Comparison"}),e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Athlete"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Readiness"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"HRV (ms)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Resting HR"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Sleep (h)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SpO2 (%)"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Training Load"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(s=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[s.readinessScore.toFixed(0),"%"]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.hrv.toFixed(0)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.restingHr.toFixed(0)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.sleepDuration.toFixed(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("div",{className:"text-sm text-gray-900",children:s.spo2.toFixed(1)})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"text-sm text-gray-900",children:[s.trainingLoad.toFixed(0),"%"]})})]},s.athlete_id))})]})]})]})}):e.jsx("div",{className:"space-y-8",children:e.jsx("div",{className:"card-enhanced p-6",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"👥"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Athletes Available"}),e.jsx("p",{className:"text-gray-600",children:"No athlete data found in the system."})]})})})})};export{I as TeamComparisonDashboard};
