import{j as e,b as Sr,g as Ke,d as Nt,a as Ts,c as Ar,e as Mr,u as Rr,D as Cr}from"./index-2fe32897.js";import{r as I,c as Dr,b as Tt,g as Fs}from"./vendor-26c3c1d8.js";import{a as Rn}from"./api-90359d14.js";import{c as Ft,g as Tr,a as Fr,b as He}from"./analytics-ac2fb86e.js";import{c as Lr,u as _r,f as Pr,d as Cn,e as Er}from"./athleteUtils-f52ec51e.js";import{R as ie,L as Me,X as oe,Y as Z,T as ae,a as pe,b as J,C as Se,c as ce,d as de,B as Te,S as mn,e as un,f as Ls,P as _s,g as Ps,h as Es,i as Is,j as Os,k as Gs,l as Lt,m as Hs,A as Ir,n as Or,o as lt,p as $e,q as Gr,F as Hr,r as Dn,H as $r,s as Tn,t as zr,u as Wr,M as Kr,v as Vr,w as Br,x as Ur}from"./ui-8425ddff.js";import{W as qr}from"./WeatherImpact-78a1836c.js";import"./three-f2a0a5ce.js";import"./weatherUtils-fe320b1d.js";const Le=({title:t,value:n,unit:s,icon:r,subtitle:i,trend:a,data:l=[],teamAverage:o,goalValue:c,goalLabel:m="Goal"})=>{const d=n??0,x=a==="up"?"text-green-600":a==="down"?"text-red-600":"text-gray-500",g=[...l].sort((E,M)=>new Date(E.date).getTime()-new Date(M.date).getTime()),u=g.map((E,M)=>({...E,index:M,name:new Date(E.date).toLocaleDateString("en",{month:"short",day:"numeric"})})),p=[...g.map(E=>E.value),d,o,c].filter(Boolean),h=Math.min(...p)*.98,v=Math.max(...p)*1.02,y=(()=>d>=c?"good":d>=c*.85?"warning":"alert")(),k=y==="good"?"bg-green-500":y==="warning"?"bg-yellow-500":"bg-red-500";return e.jsxs("div",{className:"card-enhanced p-5 h-full flex flex-col",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"text-2xl",children:r}),e.jsx("div",{className:`w-3 h-3 rounded-full ${k}`,title:`Status: ${y}`})]}),e.jsxs("div",{className:"flex items-baseline mb-2",children:[e.jsx("span",{className:"text-2xl font-bold text-gray-900",children:d.toFixed(1)}),e.jsx("span",{className:"text-sm text-gray-500 ml-1",children:s})]}),e.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:t}),e.jsx("div",{className:"flex-1 min-h-[70px] mb-3",children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(Me,{data:u,margin:{top:4,right:8,left:0,bottom:4},children:[e.jsx(oe,{hide:!0,dataKey:"name"}),e.jsx(Z,{hide:!0,domain:[h,v]}),e.jsx(ae,{content:({active:E,payload:M,label:A})=>{if(E&&M&&M.length){const V=M[0].payload,C=new Date(V.date).toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"}),S={"HRV (Night)":"ms","Resting HR":"bpm","Avg Heart Rate":"bpm","SpO₂ (Night)":"%","Sleep Duration":"h","Deep Sleep":"%","REM Sleep":"%","Respiratory Rate":"/min","Body Temp":"°C","Training Load":"%"},T=M[0].name||"Metric",D=S[T]||"",G=M[0].value;return e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsx("p",{className:"font-medium text-gray-900 mb-1",children:C}),e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsxs("span",{className:"font-medium",children:[T,":"]})," ",G?.toFixed(1)," ",D]})]})}return null}}),c&&e.jsx(pe,{y:c,stroke:"#6c00ff",strokeDasharray:"3 3",label:{value:m,position:"left",fill:"#6c00ff",fontSize:10,offset:5}}),o&&e.jsx(pe,{y:o,stroke:"#38bdf8",strokeDasharray:"4 2",label:{value:"Team Avg",position:"right",fill:"#38bdf8",fontSize:10,offset:5}}),e.jsx(J,{type:"monotone",dataKey:"value",stroke:a==="up"?"#10b981":a==="down"?"#ef4444":"#6b7280",strokeWidth:2,dot:!1,animationDuration:600,isAnimationActive:!0})]})})}),(c&&m||o)&&e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs text-gray-500 mt-1",children:[c&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-0.5 bg-[#6c00ff] mr-1 border-dashed"}),e.jsx("span",{children:m})]}),o&&e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-3 h-0.5 bg-[#38bdf8] mr-1 border-dashed border-0.5"}),e.jsx("span",{children:"Team Avg"})]})]}),i&&e.jsxs("p",{className:`text-xs ${x} flex items-center mt-auto`,children:[a==="up"&&e.jsx("span",{children:"↑"}),a==="down"&&e.jsx("span",{children:"↓"}),a==="neutral"&&e.jsx("span",{children:"•"}),e.jsx("span",{className:"ml-1",children:i})]})]})},Xe=t=>new Date(t),Fn=t=>Xe(t).toLocaleDateString("en",{month:"short",day:"numeric"}),Yr=({data:t,bodyCompData:n=[],geneticData:s=[],trainingLoadDaily:r=[]})=>{if(!t||t.length===0)return e.jsx("div",{className:"text-center py-8 text-gray-600",children:"No biometric data available"});const i=new Map;(r||[]).forEach(x=>{const g=(x?.date||"").slice(0,10),u=Number(x?.compositeLoad??x?.load??0);g&&i.set(g,u)});const a=[...t].filter(x=>x.date&&!isNaN(Xe(x.date).getTime())).sort((x,g)=>Xe(x.date).getTime()-Xe(g.date).getTime()).map(x=>({...x,readiness:Ft(x),compositeLoad:Number(i.get(x.date)??x.training_load_pct??0),dateLabel:Fn(x.date),dayOfWeek:Xe(x.date).getDay()})),l=n&&n.length>0,o=l?[...n].sort((x,g)=>Xe(x.date).getTime()-Xe(g.date).getTime()):[],c={ACTN3:0,PPARGC1A:0,PER3:0,CLOCK:0,BDNF:0,ADRB2:0};s.forEach(x=>{switch(x.gene){case"ACTN3":c[x.gene]=x.genotype==="RR"?1:x.genotype==="RX"?.6:.3;break;case"PPARGC1A":c[x.gene]=x.genotype.includes("Gly")?.9:.4;break;case"PER3":c[x.gene]=x.genotype==="long"?.8:.3;break;case"CLOCK":c[x.gene]=x.genotype==="AA"?.9:x.genotype==="AG"?.6:.3;break;case"BDNF":c[x.gene]=x.genotype==="Val66Val"?.9:x.genotype==="Val/Met"?.6:.3;break;case"ADRB2":c[x.gene]=x.genotype==="Arg16Arg"?.9:x.genotype==="Gly16Gly"?.4:.6;break}});const m=Object.entries(c).map(([x,g])=>({subject:x,A:g,fullMark:1})),d=new Date;return Array.from({length:49},(x,g)=>{const u=new Date(d);u.setDate(d.getDate()-48+g);const p=u.toISOString().split("T")[0],h=a.find(N=>N.date===p),v=h?Math.round(Ft(h)):null;return{date:p,value:v}}),e.jsxs("div",{className:"space-y-12 py-6 px-2",children:[e.jsxs("section",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"📊 Key Performance Metrics"}),e.jsx(ie,{width:"100%",height:300,children:e.jsxs(Se,{data:a,margin:{top:10,right:30,left:0,bottom:0},children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"dateLabel",stroke:"#6b7280"}),e.jsx(Z,{yAxisId:"left",stroke:"#6b7280"}),e.jsx(Z,{yAxisId:"right",orientation:"right",stroke:"#6b7280"}),e.jsx(ae,{contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px",color:"#1f2937"}}),e.jsx(de,{}),e.jsx(J,{yAxisId:"left",type:"monotone",dataKey:"hrv_night",name:"HRV (ms)",stroke:"#6366f1",strokeWidth:3}),e.jsx(J,{yAxisId:"left",type:"monotone",dataKey:"resting_hr",name:"RHR (bpm)",stroke:"#10b981",strokeWidth:3}),e.jsx(J,{yAxisId:"right",type:"monotone",dataKey:"sleep_duration_h",name:"Sleep (h)",stroke:"#3b82f6",strokeWidth:3}),e.jsx(J,{yAxisId:"left",type:"monotone",dataKey:"spo2_night",name:"SpO₂ (%)",stroke:"#f97316",strokeWidth:3}),e.jsx(J,{yAxisId:"right",type:"monotone",dataKey:"training_load_pct",name:"Load (%)",stroke:"#8b5cf6",strokeWidth:3,dot:!1})]})})]}),e.jsxs("section",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🌙 Sleep Stage Breakdown"}),e.jsx(ie,{width:"100%",height:300,children:e.jsxs(Me,{data:a,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"dateLabel",stroke:"#6b7280"}),e.jsx(Z,{domain:[0,100],stroke:"#6b7280"}),e.jsx(ae,{formatter:x=>`${x.toFixed(1)}%`,contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px",color:"#1f2937"}}),e.jsx(de,{}),e.jsx(J,{type:"monotone",dataKey:"deep_sleep_pct",name:"Deep Sleep",stroke:"#059669",strokeWidth:4,dot:{r:4}}),e.jsx(J,{type:"monotone",dataKey:"rem_sleep_pct",name:"REM Sleep",stroke:"#7c3aed",strokeWidth:4,dot:{r:4}}),e.jsx(J,{type:"monotone",dataKey:"light_sleep_pct",name:"Light Sleep",stroke:"#d97706",strokeWidth:4,strokeDasharray:"5 5",dot:!1})]})})]}),e.jsxs("section",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🔁 Recovery vs. Training Load"}),e.jsx(ie,{width:"100%",height:300,children:e.jsxs(Se,{data:a,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"dateLabel",stroke:"#6b7280",label:{value:"Date",position:"insideBottom",offset:-5}}),e.jsx(Z,{yAxisId:"left",stroke:"#6b7280",label:{value:"Composite Load",angle:-90,position:"insideLeft"}}),e.jsx(Z,{yAxisId:"right",orientation:"right",domain:[0,100],stroke:"#6b7280",label:{value:"Readiness (%)",angle:90,position:"insideRight"}}),e.jsx(ae,{formatter:(x,g)=>{const u=Number(x);return g&&String(g).toLowerCase().includes("readiness")?[`${isFinite(u)?u.toFixed(0):"0"}%`,"Readiness"]:g&&String(g).toLowerCase().includes("load")?[isFinite(u)?u.toFixed(0):"0","Composite Load"]:[x,g]},labelFormatter:x=>`Date: ${x}`,contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:6,color:"#1f2937"}}),e.jsx(de,{}),e.jsx(Te,{yAxisId:"left",dataKey:"compositeLoad",name:"Composite Load",fill:"#e74c3c"}),e.jsx(J,{yAxisId:"right",type:"monotone",dataKey:"readiness",name:"Readiness (%)",stroke:"#10b981",strokeWidth:4,dot:{r:2}})]})}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[e.jsx("p",{children:"This chart shows the relationship between training load and recovery (composite Readiness):"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 mt-2",children:[e.jsx("li",{children:"Readiness reflects HRV, RHR, Sleep (duration + stages), and SpO₂ on a 0–100 scale"}),e.jsx("li",{children:"High loads with persistently low readiness can indicate under-recovery/overreaching"}),e.jsx("li",{children:"Aim for balanced progression: challenging load with stable or improving readiness"})]})]})]}),e.jsxs("section",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"🔄 HRV vs. Resting HR (Recovery State)"}),e.jsx(ie,{width:"100%",height:350,children:e.jsxs(mn,{margin:{top:20,right:30,left:0,bottom:0},children:[e.jsx(ce,{}),e.jsx(oe,{type:"number",dataKey:"hrv_night",name:"HRV",unit:"ms",domain:[30,70]}),e.jsx(Z,{type:"number",dataKey:"resting_hr",name:"RHR",unit:"bpm",reversed:!0,domain:[40,80]}),e.jsx(ae,{cursor:{strokeDasharray:"3 3"},content:({active:x,payload:g,label:u})=>{if(x&&g&&g.length){const p=g[0].payload;return e.jsxs("div",{className:"bg-white border border-gray-200 p-3 rounded shadow-sm",children:[e.jsx("p",{className:"font-semibold text-gray-800",children:"Recovery State"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["HRV: ",p.hrv_night," ms"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["RHR: ",p.resting_hr," bpm"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Date: ",p.dateLabel]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["SpO2: ",p.spo2_night?`${p.spo2_night}%`:"N/A"]})]})}return null}}),e.jsx(un,{name:"Recovery State",data:a,fill:"#3498db",shape:"circle"})]})}),e.jsxs("div",{className:"mt-4 text-sm text-gray-600",children:[e.jsx("p",{className:"mb-2",children:"This chart shows the relationship between Heart Rate Variability (HRV) and Resting Heart Rate (RHR):"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"Higher HRV (right) indicates better recovery and parasympathetic nervous system activity"}),e.jsx("li",{children:"Lower RHR (top) indicates better cardiovascular fitness and recovery"}),e.jsx("li",{children:"Points in the top-right quadrant represent optimal recovery state"}),e.jsx("li",{children:"Points in the bottom-left quadrant may indicate fatigue or overtraining"})]})]})]}),l&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"⚖️ Body Composition Over Time"}),e.jsx(ie,{width:"100%",height:300,children:e.jsxs(Me,{data:o,children:[e.jsx(ce,{strokeDasharray:"3 3"}),e.jsx(oe,{dataKey:"date",tickFormatter:x=>Fn(x)}),e.jsx(Z,{yAxisId:"left",label:{value:"Weight (kg)",angle:-90,position:"insideLeft"}}),e.jsx(Z,{yAxisId:"right",orientation:"right",label:{value:"Mass (kg)",angle:90,position:"insideRight"}}),e.jsx(ae,{}),e.jsx(de,{}),e.jsx(J,{yAxisId:"left",type:"monotone",dataKey:"weight_kg",name:"Weight",stroke:"#3498db",strokeWidth:3}),e.jsx(J,{yAxisId:"right",type:"monotone",dataKey:"muscle_mass_kg",name:"Muscle Mass",stroke:"#2ecc71",strokeWidth:3}),e.jsx(J,{yAxisId:"right",type:"monotone",dataKey:"fat_mass_kg",name:"Fat Mass",stroke:"#e67e22",strokeWidth:3,strokeDasharray:"5 5"})]})})]}),s.length>0&&e.jsxs("section",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"🧬 Genetic Predisposition Profile"}),e.jsx(ie,{width:"100%",height:400,children:e.jsxs(Ls,{outerRadius:"80%",data:m,children:[e.jsx(_s,{}),e.jsx(Ps,{dataKey:"subject"}),e.jsx(Es,{angle:30,domain:[0,1],tickFormatter:x=>x.toFixed(1)}),e.jsx(Is,{name:"Athlete",dataKey:"A",stroke:"#8884d8",fill:"#8884d8",fillOpacity:.6}),e.jsx(ae,{formatter:x=>[`${(x*100).toFixed(0)}%`,"Predisposition"]})]})})]})]})},Xr=({loading:t,error:n,hasData:s})=>t?e.jsxs("div",{className:"space-y-8 text-gray-900",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-white mb-8",children:"⚖️ Body Composition Analysis"}),e.jsxs("div",{className:"text-center py-12 card-enhanced rounded-xl",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-600",children:"Loading body composition data..."})]})]}):n?e.jsxs("div",{className:"space-y-8 text-gray-900",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-white mb-8",children:"⚖️ Body Composition Analysis"}),e.jsxs("div",{className:"text-center py-12 card-enhanced rounded-xl",children:[e.jsx("p",{className:"text-red-600 mb-2",children:"⚠️ Error loading data"}),e.jsx("p",{className:"text-sm text-gray-500",children:n})]})]}):s?e.jsx("div",{className:"space-y-8 text-gray-900",children:e.jsx("h1",{className:"text-3xl font-bold text-center text-white mb-8",children:"⚖️ Body Composition Analysis"})}):e.jsxs("div",{className:"space-y-8 text-gray-900",children:[e.jsx("h1",{className:"text-3xl font-bold text-center text-white mb-8",children:"⚖️ Body Composition Analysis"}),e.jsxs("div",{className:"text-center py-12 card-enhanced rounded-xl",children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"⚖️ No body composition data available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Please ensure body composition measurements are recorded"})]})]}),j=t=>typeof t=="number"&&!isNaN(t)?t:0,Qr=({athleteBodyComp:t})=>{const n=parseFloat(j(t.bodyFat).toFixed(1)),s=parseFloat((j(t.muscleMass)/j(t.weight)*100).toFixed(1)),r=parseFloat((j(t.muscleMass+t.boneDensity)/j(t.weight)*100-j(t.bodyFat)).toFixed(1)),i=parseFloat((j(t.muscleMass)*.2/j(t.weight)*100).toFixed(1)),a=15,l=n+s+r+i+a,o=n/l*100,c=s/l*100,m=r/l*100,d=i/l*100,x=a/l*100,g=[{name:"Fat Mass",value:o,weight:`${(j(t.weight)*j(t.bodyFat)/100).toFixed(1)}kg`},{name:"Muscle Mass",value:c,weight:`${j(t.muscleMass).toFixed(1)}kg`},{name:"Water Weight",value:m,weight:`${j(t.muscleMass+t.boneDensity).toFixed(1)}kg`},{name:"Protein Mass",value:d,weight:`${(j(t.muscleMass)*.2).toFixed(1)}kg`},{name:"Bone Mass",value:x,weight:`${(j(t.weight)*.15).toFixed(1)}kg`}],u=["#f97316","#10b981","#3b82f6","#8b5cf6","#f59e0b"];return e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"📈 Body Composition Breakdown"}),e.jsx("div",{className:"flex justify-center",children:e.jsx(ie,{width:"100%",height:300,children:e.jsxs(Os,{children:[e.jsx(Gs,{data:g,cx:"50%",cy:"50%",labelLine:!0,outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:p,percent:h})=>`${p}: ${(h?h*100:0).toFixed(0)}%`,children:g.map((p,h)=>e.jsx(Lt,{fill:u[h%u.length]},`cell-${h}`))}),e.jsx(ae,{formatter:(p,h,v)=>[`${Number(p).toFixed(1)}% (${v.payload.weight})`,h],contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px",color:"#1f2937"}}),e.jsx(de,{})]})})})]})},Zr=({athleteBodyComp:t})=>e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"📈 Muscle Fat Analysis"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-600 mb-4",children:"⚖️ Weight Analysis"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current:"}),e.jsxs("span",{className:"font-bold text-purple-600",children:[j(t.weight).toFixed(1)," kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Target Weight:"}),e.jsx("span",{className:"font-bold text-green-600",children:t.targetWeight?j(t.targetWeight).toFixed(1)+" kg":"N/A"})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Healthy Range:"}),e.jsx("span",{className:"font-bold text-blue-600",children:t.weightRangeMin&&t.weightRangeMax?`${j(t.weightRangeMin)}-${j(t.weightRangeMax)} kg`:"N/A"})]})]}),e.jsxs("div",{className:"mt-4 relative",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-purple-500 transition-all duration-300",style:{width:`${t.weightRangeMin&&t.weightRangeMax&&t.weightRangeMax!==t.weightRangeMin?Math.min(100,Math.max(0,(j(t.weight)-j(t.weightRangeMin))/(j(t.weightRangeMax)-j(t.weightRangeMin))*100)):50}%`}})}),e.jsx("div",{className:"absolute top-0 w-0 h-0",style:{left:`${t.weightRangeMin&&t.weightRangeMax&&t.weightRangeMax!==t.weightRangeMin?Math.min(100,Math.max(0,(j(t.weight)-j(t.weightRangeMin))/(j(t.weightRangeMax)-j(t.weightRangeMin))*100)):50}%`,transform:"translateX(-50%)"},children:e.jsx("div",{className:"w-0 h-0 border-l-2 border-r-2 border-b-3 border-l-transparent border-r-transparent border-b-purple-600 mx-auto"})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:t.weightRangeMin?`${j(t.weightRangeMin)}kg`:"N/A"}),e.jsx("span",{children:t.weightRangeMax?`${j(t.weightRangeMax)}kg`:"N/A"})]})]}),e.jsxs("div",{className:"mt-3 p-2 bg-purple-50 rounded text-center",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Status"}),e.jsx("div",{className:`text-sm font-semibold ${t.weightRangeMin&&t.weightRangeMax&&t.weight>=t.weightRangeMin&&t.weight<=t.weightRangeMax?"text-green-600":"text-orange-600"}`,children:t.weightRangeMin&&t.weightRangeMax&&t.weight>=t.weightRangeMin&&t.weight<=t.weightRangeMax?"Optimal":"Needs Adjustment"})]})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-600 mb-4",children:"💪 Skeletal Muscle Analysis"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current:"}),e.jsxs("span",{className:"font-bold text-green-600",children:[j(t.muscleMass).toFixed(1)," kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Standard Range:"}),e.jsx("span",{className:"font-bold text-blue-600",children:"30.2-37.0 kg"})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Muscle Mass:"}),e.jsxs("span",{className:"font-bold text-green-600",children:[j(t.muscleMass).toFixed(1)," kg"]})]})]}),e.jsxs("div",{className:"mt-4 relative",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-green-500 transition-all duration-300",style:{width:`${Math.min(100,(j(t.muscleMass)-30.2)/(37-30.2)*100)}%`}})}),e.jsx("div",{className:"absolute top-0 w-0 h-0",style:{left:`${Math.min(100,Math.max(0,(j(t.muscleMass)-30.2)/(37-30.2)*100))}%`,transform:"translateX(-50%)"},children:e.jsx("div",{className:"w-0 h-0 border-l-2 border-r-2 border-b-3 border-l-transparent border-r-transparent border-b-green-600 mx-auto"})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"30.2kg"}),e.jsx("span",{children:"37.0kg"})]})]}),e.jsxs("div",{className:"mt-3 p-2 bg-green-50 rounded text-center",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Muscle Status"}),e.jsx("div",{className:`text-sm font-semibold ${t.muscleMass>=30.2&&t.muscleMass<=37?"text-green-600":"text-orange-600"}`,children:t.muscleMass>=30.2&&t.muscleMass<=37?"Excellent":"Needs Work"})]})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-600 mb-4",children:"🔥 Fat Mass Analysis"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Current:"}),e.jsxs("span",{className:"font-bold text-orange-600",children:[(j(t.weight)*j(t.bodyFat)/100).toFixed(1)," kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Body Fat %:"}),e.jsxs("span",{className:"font-bold text-orange-600",children:[j(t.bodyFat).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center text-sm",children:[e.jsx("span",{className:"text-gray-600",children:"Healthy Range:"}),e.jsx("span",{className:"font-bold text-blue-600",children:"8-20%"})]})]}),e.jsxs("div",{className:"mt-4 relative",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-orange-500 transition-all duration-300",style:{width:`${Math.min(100,j(t.bodyFat)/20*100)}%`}})}),e.jsx("div",{className:"absolute top-0 w-0 h-0",style:{left:`${Math.min(100,Math.max(0,j(t.bodyFat)/20*100))}%`,transform:"translateX(-50%)"},children:e.jsx("div",{className:"w-0 h-0 border-l-2 border-r-2 border-b-3 border-l-transparent border-r-transparent border-b-orange-600 mx-auto"})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsx("span",{children:"8%"}),e.jsx("span",{children:"20%"})]})]}),e.jsxs("div",{className:"mt-3 p-2 bg-orange-50 rounded text-center",children:[e.jsx("div",{className:"text-xs text-gray-600",children:"Fat Status"}),e.jsx("div",{className:`text-sm font-semibold ${t.bodyFat>=8&&t.bodyFat<=20?"text-green-600":t.bodyFat<8?"text-blue-600":"text-red-600"}`,children:t.bodyFat>=8&&t.bodyFat<=20?"Healthy":t.bodyFat<8?"Low":"High"})]})]})]})]}),Jr=({athleteBodyComp:t})=>e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"⚖️ Obesity Analysis"}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-blue-100 p-4 rounded-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"📊"}),"BMI Analysis"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex mb-2 relative",children:[e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-1 bg-blue-200"}),e.jsx("div",{className:"flex-1 bg-green-200"}),e.jsx("div",{className:"flex-1 bg-yellow-200"}),e.jsx("div",{className:"flex-1 bg-orange-200"}),e.jsx("div",{className:"flex-1 bg-red-200"})]}),e.jsxs("div",{className:"relative w-full flex",children:[e.jsx("div",{className:"flex-1 h-8 flex items-center justify-center text-xs font-medium text-blue-800",children:"Underweight"}),e.jsx("div",{className:"flex-1 h-8 flex items-center justify-center text-xs font-medium text-green-800",children:"Normal"}),e.jsx("div",{className:"flex-1 h-8 flex items-center justify-center text-xs font-medium text-yellow-800",children:"Overweight"}),e.jsx("div",{className:"flex-1 h-8 flex items-center justify-center text-xs font-medium text-orange-800",children:"Obese"}),e.jsx("div",{className:"flex-1 h-8 flex items-center justify-center text-xs font-medium text-red-800",children:"Severely Obese"})]}),e.jsxs("div",{className:"absolute top-0 w-0 h-0",style:{left:`${Math.min(100,Math.max(0,(j(t.bmi)-0)/40*100))}%`,transform:"translateX(-50%)"},children:[e.jsx("div",{className:"w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-blue-600 mx-auto"}),e.jsx("div",{className:"w-1 h-8 bg-blue-600 mx-auto"})]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-2",children:[e.jsx("span",{children:"0"}),e.jsx("span",{children:"18.5"}),e.jsx("span",{children:"25"}),e.jsx("span",{children:"30"}),e.jsx("span",{children:"35"}),e.jsx("span",{children:"40+"})]})]}),e.jsxs("div",{className:"text-center p-3 bg-white rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Your BMI"}),e.jsx("div",{className:"text-3xl font-bold text-blue-600 mb-1",children:j(t.bmi).toFixed(1)}),e.jsx("div",{className:"text-sm font-medium text-gray-700",children:j(t.bmi)<18.5?"Underweight":j(t.bmi)<25?"Normal Weight":j(t.bmi)<30?"Overweight":j(t.bmi)<35?"Obese":"Severely Obese"})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-purple-100 p-4 rounded-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-purple-700 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"🔥"}),"Body Fat Analysis"]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex mb-2 relative",children:[e.jsxs("div",{className:"absolute inset-0 flex",children:[e.jsx("div",{className:"flex-1 bg-blue-200"}),e.jsx("div",{className:"flex-1 bg-green-200"}),e.jsx("div",{className:"flex-1 bg-yellow-200"}),e.jsx("div",{className:"flex-1 bg-orange-200"}),e.jsx("div",{className:"flex-1 bg-red-200"})]}),e.jsxs("div",{className:"relative w-full flex",children:[e.jsx("div",{className:"flex-1 h-8 flex items-center justify-center text-xs font-medium text-blue-800",children:"Essential"}),e.jsx("div",{className:"flex-1 h-8 flex items-center justify-center text-xs font-medium text-green-800",children:"Athletic"}),e.jsx("div",{className:"flex-1 h-8 flex items-center justify-center text-xs font-medium text-yellow-800",children:"Average"}),e.jsx("div",{className:"flex-1 h-8 flex items-center justify-center text-xs font-medium text-orange-800",children:"High"}),e.jsx("div",{className:"flex-1 h-8 flex items-center justify-center text-xs font-medium text-red-800",children:"Obese"})]}),e.jsxs("div",{className:"absolute top-0 w-0 h-0",style:{left:`${Math.min(100,Math.max(0,j(t.bodyFat)/40*100))}%`,transform:"translateX(-50%)"},children:[e.jsx("div",{className:"w-0 h-0 border-l-4 border-r-4 border-b-4 border-l-transparent border-r-transparent border-b-purple-600 mx-auto"}),e.jsx("div",{className:"w-1 h-8 bg-purple-600 mx-auto"})]})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-2",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"6%"}),e.jsx("span",{children:"14%"}),e.jsx("span",{children:"24%"}),e.jsx("span",{children:"32%"}),e.jsx("span",{children:"40%+"})]})]}),e.jsxs("div",{className:"text-center p-3 bg-white rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Your Body Fat"}),e.jsxs("div",{className:"text-3xl font-bold text-purple-600 mb-1",children:[j(t.bodyFat).toFixed(1),"%"]}),e.jsx("div",{className:"text-sm font-medium text-gray-700",children:j(t.bodyFat)<6?"Essential Fat":j(t.bodyFat)<14?"Athletic":j(t.bodyFat)<24?"Average":j(t.bodyFat)<32?"High":"Obese"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"💡 Health Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mt-1 ${j(t.bmi)<18.5?"bg-blue-500":j(t.bmi)<25?"bg-green-500":j(t.bmi)<30?"bg-yellow-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"BMI Status"}),e.jsx("div",{className:"text-gray-600",children:j(t.bmi)<18.5?"Consider gaining weight for optimal health":j(t.bmi)<25?"Excellent BMI range for health":j(t.bmi)<30?"Consider weight management":"Focus on weight reduction for better health"})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:`w-3 h-3 rounded-full mt-1 ${j(t.bodyFat)<6?"bg-blue-500":j(t.bodyFat)<14?"bg-green-500":j(t.bodyFat)<24?"bg-yellow-500":"bg-red-500"}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Body Fat Status"}),e.jsx("div",{className:"text-gray-600",children:j(t.bodyFat)<6?"Essential fat level - monitor closely":j(t.bodyFat)<14?"Optimal for athletic performance":j(t.bodyFat)<24?"Average range - room for improvement":"Consider fat reduction strategies"})]})]})]})]})]})]}),ei=({athleteBodyComp:t})=>e.jsxs("div",{className:"card-enhanced p-6 mt-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"📊 Body Composition Metrics"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-50",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Measurement (kg)"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Proportion of weight (%)"}),e.jsx("th",{className:"border border-gray-300 px-4 py-2 text-left font-semibold",children:"Evaluation"})]})}),e.jsx("tbody",{children:[{label:"Weight",value:`${j(t.weight)} (${j(t.weightRangeMin)}-${j(t.weightRangeMax)})`,percent:"100.0",eval:"Standard"},{label:"Fat mass",value:`${(j(t.weight)*j(t.bodyFat)/100).toFixed(1)} (${(j(t.weightRangeMin)*8/100).toFixed(1)}-${(j(t.weightRangeMax)*20/100).toFixed(1)})`,percent:j(t.bodyFat).toFixed(1),eval:"Standard"},{label:"Muscle mass",value:`${j(t.muscleMass).toFixed(1)} (${(j(t.weightRangeMin)*30.2/100).toFixed(1)}-${(j(t.weightRangeMax)*37/100).toFixed(1)})`,percent:(j(t.muscleMass)/j(t.weight)*100).toFixed(1),eval:"Standard"},{label:"Skeletal muscle",value:`${j(t.muscleMass).toFixed(1)} (30.2-37.0)`,percent:(j(t.muscleMass)/j(t.weight)*100).toFixed(1),eval:"Standard"},{label:"Water weight",value:`${j(t.muscleMass+t.boneDensity).toFixed(1)} (37.7-47.0)`,percent:(j(t.muscleMass+t.boneDensity)/j(t.weight)*100-j(t.bodyFat)).toFixed(1),eval:"Standard"},{label:"Protein mass",value:`${(j(t.muscleMass)*.2).toFixed(1)} (10.3-12.8)`,percent:(j(t.muscleMass)*.2/j(t.weight)*100).toFixed(1),eval:"Standard"},{label:"Bone Mass",value:`${(j(t.weight)*.15).toFixed(1)} (3.4-4.3)`,percent:"15.0",eval:"Standard"}].map((n,s)=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border border-gray-300 px-4 py-2 font-semibold bg-gray-50",children:n.label}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:n.value}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:n.percent}),e.jsx("td",{className:"border border-gray-300 px-4 py-2",children:n.eval})]},s))})]})})]}),ti=({athleteBodyComp:t})=>e.jsxs("div",{className:"card-enhanced p-6 mt-8",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"🏋️ Body Type Assessment"}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-purple-50 p-6 rounded-lg",children:[e.jsxs("div",{className:"mb-4 text-center",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Your Current Position"}),e.jsxs("div",{className:"text-lg font-semibold text-indigo-700",children:["BMI: ",j(t.bmi).toFixed(1)," | Body Fat: ",j(t.bodyFat).toFixed(1),"%"]})]}),e.jsxs("div",{className:"relative bg-white rounded-lg p-4 shadow-sm",children:[e.jsxs("div",{className:"relative w-full h-96 border border-gray-200 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 grid grid-cols-3 grid-rows-3",children:[e.jsx("div",{className:"bg-gray-100 border-r border-b border-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-gray-700 text-center",children:"Too thin"})}),e.jsx("div",{className:"bg-gray-100 border-r border-b border-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-gray-700 text-center",children:"Thin"})}),e.jsx("div",{className:"bg-gray-100 border-b border-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-gray-700 text-center",children:"Invisible fat"})}),e.jsx("div",{className:"bg-gray-100 border-r border-b border-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-gray-700 text-center",children:"Muscular slim"})}),e.jsxs("div",{className:"bg-teal-100 border-r border-b border-gray-200 flex items-center justify-center relative",children:[e.jsx("span",{className:"text-xs font-semibold text-teal-800 text-center",children:"Fit"}),e.jsx("div",{className:"absolute inset-0 border-2 border-teal-300 rounded-sm"})]}),e.jsx("div",{className:"bg-gray-100 border-b border-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-gray-700 text-center",children:"Slightly fat"})}),e.jsx("div",{className:"bg-gray-100 border-r border-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-gray-700 text-center",children:"Athletes"})}),e.jsx("div",{className:"bg-gray-100 border-r border-gray-200 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-gray-700 text-center",children:"Muscle"})}),e.jsx("div",{className:"bg-gray-100 flex items-center justify-center",children:e.jsx("span",{className:"text-xs font-medium text-gray-700 text-center",children:"Overweight"})})]}),(()=>{const n=j(t.bmi),s=j(t.bodyFat),r=Math.min(100,Math.max(0,s/30*100)),i=Math.min(100,Math.max(0,100-(n-15)/15*100));return e.jsx("div",{className:"absolute w-4 h-4 bg-red-500 rounded-full border-2 border-white shadow-lg z-10",style:{left:`${r}%`,top:`${i}%`,transform:"translate(-50%, -50%)"},children:e.jsx("div",{className:"absolute inset-0 bg-red-500 rounded-full animate-pulse"})})})()]}),e.jsxs("div",{className:"flex justify-between mt-2 text-xs text-gray-600",children:[e.jsx("span",{children:"Body Fat Rate (%)"}),e.jsx("span",{children:"BMI (kg/m²)"})]}),e.jsxs("div",{className:"flex justify-between mt-1 text-xs text-gray-500",children:[e.jsx("span",{children:"0"}),e.jsx("span",{children:"10"}),e.jsx("span",{children:"20"}),e.jsx("span",{children:"30"})]}),e.jsxs("div",{className:"absolute right-2 top-4 bottom-4 flex flex-col justify-between text-xs text-gray-500",children:[e.jsx("span",{children:"30"}),e.jsx("span",{children:"25"}),e.jsx("span",{children:"20"}),e.jsx("span",{children:"15"})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-white rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-gray-800 mb-2",children:"📍 Your Position"}),e.jsxs("div",{className:"flex items-center space-x-2 text-sm",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:"text-gray-700",children:"Current BMI & Body Fat position"})]}),e.jsx("div",{className:"mt-2 text-xs text-gray-600",children:'💡 The highlighted "Fit" region represents the optimal balance of BMI and body fat for health and fitness.'})]})]})]}),ni=({athleteBodyComp:t})=>{const n=j(t.bodyFat)/100*j(t.weight),s=j(t.muscleMass),r=n*.025,i=n*.5,a=n*.225,l=s*.05,o=s*.4,c=s*.25,m=(x,g)=>{const u=j(x);return g===0?"0.0":(u/g*100).toFixed(1)},d=(x,g)=>{const p={arm:{min:80,max:115},trunk:{min:90,max:110},leg:{min:90,max:110}}[g];return x>=p.min&&x<=p.max?"text-green-600 bg-green-100":"text-yellow-600 bg-yellow-100"};return e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"🔍 Segmental Analysis"}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-center text-gray-900 mb-6",children:"Body Composition Distribution"}),e.jsx("div",{className:"flex justify-center",children:e.jsxs("div",{className:"relative inline-block",style:{padding:"40px"},children:[e.jsx("img",{src:"/humanmodel.png",alt:"Human Body Model",className:"max-w-full h-auto drop-shadow-lg",style:{maxHeight:"400px"}}),e.jsxs("svg",{className:"absolute inset-0 w-full h-full pointer-events-none",style:{top:"-60px",left:"-60px",width:"calc(100% + 120px)",height:"calc(100% + 120px)"},viewBox:"0 0 120 120",preserveAspectRatio:"none",children:[e.jsx("line",{x1:"25",y1:"30",x2:"35",y2:"35",stroke:"#f97316",strokeWidth:"0.3",markerEnd:"url(#arrowhead)"}),e.jsx("line",{x1:"95",y1:"30",x2:"85",y2:"35",stroke:"#f97316",strokeWidth:"0.3",markerEnd:"url(#arrowhead)"}),e.jsx("line",{x1:"60",y1:"25",x2:"60",y2:"40",stroke:"#f97316",strokeWidth:"0.3",markerEnd:"url(#arrowhead)"}),e.jsx("line",{x1:"20",y1:"45",x2:"30",y2:"50",stroke:"#10b981",strokeWidth:"0.3",markerEnd:"url(#arrowhead)"}),e.jsx("line",{x1:"100",y1:"45",x2:"90",y2:"50",stroke:"#10b981",strokeWidth:"0.3",markerEnd:"url(#arrowhead)"}),e.jsx("line",{x1:"60",y1:"55",x2:"60",y2:"65",stroke:"#10b981",strokeWidth:"0.3",markerEnd:"url(#arrowhead)"}),e.jsx("line",{x1:"30",y1:"95",x2:"40",y2:"85",stroke:"#f97316",strokeWidth:"0.3",markerEnd:"url(#arrowhead)"}),e.jsx("line",{x1:"90",y1:"95",x2:"80",y2:"85",stroke:"#f97316",strokeWidth:"0.3",markerEnd:"url(#arrowhead)"}),e.jsx("line",{x1:"35",y1:"85",x2:"45",y2:"75",stroke:"#10b981",strokeWidth:"0.3",markerEnd:"url(#arrowhead)"}),e.jsx("line",{x1:"85",y1:"85",x2:"75",y2:"75",stroke:"#10b981",strokeWidth:"0.3",markerEnd:"url(#arrowhead)"}),e.jsx("line",{x1:"40",y1:"105",x2:"50",y2:"95",stroke:"#10b981",strokeWidth:"0.3",markerEnd:"url(#arrowhead)"}),e.jsx("line",{x1:"80",y1:"105",x2:"70",y2:"95",stroke:"#10b981",strokeWidth:"0.3",markerEnd:"url(#arrowhead)"}),e.jsx("defs",{children:e.jsx("marker",{id:"arrowhead",markerWidth:"3",markerHeight:"2",refX:"2",refY:"1",orient:"auto",children:e.jsx("polygon",{points:"0 0, 3 1, 0 2",fill:"#666"})})}),e.jsxs("text",{x:"22",y:"28","font-size":"2.5",fill:"white",stroke:"black","stroke-width":"0.1","text-anchor":"middle",children:["Right Arm Fat: ",j(t.ArmMassRightFatKg).toFixed(1),"kg"]}),e.jsxs("text",{x:"98",y:"28","font-size":"2.5",fill:"white",stroke:"black","stroke-width":"0.1","text-anchor":"middle",children:["Left Arm Fat: ",j(t.ArmMassLeftFatKg).toFixed(1),"kg"]}),e.jsxs("text",{x:"57",y:"23","font-size":"2.5",fill:"white",stroke:"black","stroke-width":"0.1","text-anchor":"middle",children:["Trunk Fat: ",j(t.TrunkMassFatKg).toFixed(1),"kg"]}),e.jsxs("text",{x:"17",y:"43","font-size":"2.5",fill:"white",stroke:"black","stroke-width":"0.1","text-anchor":"middle",children:["Right Arm Muscle: ",t.armMassRightKg?j(t.armMassRightKg).toFixed(1):"N/A","kg"]}),e.jsxs("text",{x:"103",y:"43","font-size":"2.5",fill:"white",stroke:"black","stroke-width":"0.1","text-anchor":"middle",children:["Left Arm Muscle: ",t.armMassLeftKg?j(t.armMassLeftKg).toFixed(1):"N/A","kg"]}),e.jsxs("text",{x:"57",y:"53","font-size":"2.5",fill:"white",stroke:"black","stroke-width":"0.1","text-anchor":"middle",children:["Trunk Muscle: ",t.trunkMassKg?j(t.trunkMassKg).toFixed(1):"N/A","kg"]}),e.jsxs("text",{x:"27",y:"97","font-size":"2.5",fill:"white",stroke:"black","stroke-width":"0.1","text-anchor":"middle",children:["Right Leg Fat: ",j(t.LegMassRightFatKg).toFixed(1),"kg"]}),e.jsxs("text",{x:"93",y:"97","font-size":"2.5",fill:"white",stroke:"black","stroke-width":"0.1","text-anchor":"middle",children:["Left Leg Fat: ",j(t.LegMassLeftFatKg).toFixed(1),"kg"]}),e.jsxs("text",{x:"32",y:"87","font-size":"2.5",fill:"white",stroke:"black","stroke-width":"0.1","text-anchor":"middle",children:["Right Leg Muscle: ",t.legMassRightKg?j(t.legMassRightKg).toFixed(1):"N/A","kg"]}),e.jsxs("text",{x:"88",y:"87","font-size":"2.5",fill:"white",stroke:"black","stroke-width":"0.1","text-anchor":"middle",children:["Left Leg Muscle: ",t.legMassLeftKg?j(t.legMassLeftKg).toFixed(1):"N/A","kg"]})]})]})}),e.jsxs("div",{className:"flex justify-center mt-4 space-x-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-orange-500 rounded mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Fat Mass"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded mr-2"}),e.jsx("span",{className:"text-sm text-gray-700",children:"Muscle Mass"})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-orange-600 mb-4",children:"Fat Mass Distribution"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg border-2 border-orange-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Right Arm"}),e.jsxs("div",{className:"text-xl font-bold text-orange-600",children:[t.ArmMassRightFatKg,"kg"]}),e.jsxs("div",{className:`text-xs ${d(parseFloat(m(t.ArmMassRightFatKg,r)),"arm")} px-2 py-1 rounded mt-1`,children:[m(t.ArmMassRightFatKg,r),"% Standard"]})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg border-2 border-orange-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Left Arm"}),e.jsxs("div",{className:"text-xl font-bold text-orange-600",children:[t.ArmMassLeftFatKg,"kg"]}),e.jsxs("div",{className:`text-xs ${d(parseFloat(m(t.ArmMassLeftFatKg,r)),"arm")} px-2 py-1 rounded mt-1`,children:[m(t.ArmMassLeftFatKg,r),"% Standard"]})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg border-2 border-orange-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Right Leg"}),e.jsxs("div",{className:"text-xl font-bold text-orange-600",children:[t.LegMassRightFatKg,"kg"]}),e.jsxs("div",{className:`text-xs ${d(parseFloat(m(t.LegMassRightFatKg,a)),"leg")} px-2 py-1 rounded mt-1`,children:[m(t.LegMassRightFatKg,a),"% Standard"]})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg border-2 border-orange-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Left Leg"}),e.jsxs("div",{className:"text-xl font-bold text-orange-600",children:[t.LegMassLeftFatKg,"kg"]}),e.jsxs("div",{className:`text-xs ${d(parseFloat(m(t.LegMassLeftFatKg,a)),"leg")} px-2 py-1 rounded mt-1`,children:[m(t.LegMassLeftFatKg,a),"% Standard"]})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg border-2 border-orange-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Trunk"}),e.jsxs("div",{className:"text-xl font-bold text-orange-600",children:[t.TrunkMassFatKg,"kg"]}),e.jsxs("div",{className:`text-xs ${d(parseFloat(m(t.TrunkMassFatKg,i)),"trunk")} px-2 py-1 rounded mt-1`,children:[m(t.TrunkMassFatKg,i),"% Standard"]})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg border-2 border-orange-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Right Leg"}),e.jsxs("div",{className:"text-xl font-bold text-orange-600",children:[t.LegMassRightFatKg,"kg"]}),e.jsxs("div",{className:`text-xs ${d(parseFloat(m(t.LegMassRightFatKg,a)),"leg")} px-2 py-1 rounded mt-1`,children:[m(t.LegMassRightFatKg,a),"% Standard"]})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg border-2 border-orange-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Left Leg"}),e.jsxs("div",{className:"text-xl font-bold text-orange-600",children:[t.LegMassLeftFatKg,"kg"]}),e.jsxs("div",{className:`text-xs ${d(parseFloat(m(t.LegMassLeftFatKg,a)),"leg")} px-2 py-1 rounded mt-1`,children:[m(t.LegMassLeftFatKg,a),"% Standard"]})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg border-2 border-orange-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Trunk"}),e.jsxs("div",{className:"text-xl font-bold text-orange-600",children:[t.TrunkMassFatKg,"kg"]}),e.jsxs("div",{className:`text-xs ${d(parseFloat(m(t.TrunkMassFatKg,i)),"trunk")} px-2 py-1 rounded mt-1`,children:[m(t.TrunkMassFatKg,i),"% Standard"]})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-green-600 mb-4",children:"Muscle Mass Distribution"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg border-2 border-green-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Trunk"}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:[t.trunkMassKg?j(t.trunkMassKg).toFixed(1):"N/A","kg"]}),e.jsxs("div",{className:`text-xs ${d(parseFloat(m(t.trunkMassKg,o)),"trunk")} px-2 py-1 rounded mt-1`,children:[m(t.trunkMassKg,o),"% Standard"]})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg border-2 border-green-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Right Arm"}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:[t.armMassRightKg?j(t.armMassRightKg).toFixed(1):"N/A","kg"]}),e.jsxs("div",{className:`text-xs ${d(parseFloat(m(t.armMassRightKg,l)),"arm")} px-2 py-1 rounded mt-1`,children:[m(t.armMassRightKg,l),"% Standard"]})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg border-2 border-green-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Left Arm"}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:[t.armMassLeftKg?j(t.armMassLeftKg).toFixed(1):"N/A","kg"]}),e.jsxs("div",{className:`text-xs ${d(parseFloat(m(t.armMassLeftKg,l)),"arm")} px-2 py-1 rounded mt-1`,children:[m(t.armMassLeftKg,l),"% Standard"]})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg border-2 border-green-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Right Leg"}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:[t.legMassRightKg?j(t.legMassRightKg).toFixed(1):"N/A","kg"]}),e.jsxs("div",{className:`text-xs ${d(parseFloat(m(t.legMassRightKg,c)),"leg")} px-2 py-1 rounded mt-1`,children:[m(t.legMassRightKg,c),"% Standard"]})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg border-2 border-green-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Left Leg"}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:[t.legMassLeftKg?j(t.legMassLeftKg).toFixed(1):"N/A","kg"]}),e.jsxs("div",{className:`text-xs ${d(parseFloat(m(t.legMassLeftKg,c)),"leg")} px-2 py-1 rounded mt-1`,children:[m(t.legMassLeftKg,c),"% Standard"]})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg border-2 border-green-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Right Leg"}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:[t.legMassRightKg?j(t.legMassRightKg).toFixed(1):"N/A","kg"]}),e.jsxs("div",{className:`text-xs ${d(parseFloat(m(t.legMassRightKg,c)),"leg")} px-2 py-1 rounded mt-1`,children:[m(t.legMassRightKg,c),"% Standard"]})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg border-2 border-green-200",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Left Leg"}),e.jsxs("div",{className:"text-xl font-bold text-green-600",children:[t.legMassLeftKg?j(t.legMassLeftKg).toFixed(1):"N/A","kg"]}),e.jsxs("div",{className:`text-xs ${d(parseFloat(m(t.legMassLeftKg,c)),"leg")} px-2 py-1 rounded mt-1`,children:[m(t.legMassLeftKg,c),"% Standard"]})]})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg text-sm text-gray-600",children:[e.jsx("strong",{children:"Note:"})," Standard range: 80%-160% • Segmental fat analysis is an inferred value • Left/right upper limbs (80%-115%), Trunk/lower limbs (90%-110%)"]})]})},si=({athleteBodyComp:t})=>e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6 text-center",children:"🏆 Body Score Analysis"}),(()=>{const n=Math.max(0,Math.min(25,25-Math.abs(j(t.bmi)-22)*2)),s=Math.max(0,Math.min(25,25-Math.abs(j(t.bodyFat)-15)*1.5)),r=Math.max(0,Math.min(25,(j(t.muscleMass)-30.2)/(37-30.2)*25)),i=Math.max(0,Math.min(15,(t.muscleMass-30.2)/(37-30.2)*15)),a=Math.max(0,Math.min(10,10-j(t.visceralFatGrade)*.1)),l=Math.round(n+s+r+i+a);return e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs("div",{className:"relative inline-block",children:[e.jsx("div",{className:"w-32 h-32 rounded-full bg-gradient-to-br from-green-400 to-green-600 flex items-center justify-center shadow-lg",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("div",{className:"text-2xl font-bold",children:l}),e.jsx("div",{className:"text-sm",children:"Points"})]})}),e.jsx("div",{className:"absolute inset-0 w-32 h-32 rounded-full border-4 border-green-200",children:e.jsx("div",{className:"absolute top-0 left-1/2 w-1/2 h-1/2 border-4 border-green-500 rounded-full transform -translate-x-1/2 origin-bottom",style:{transform:`rotate(${Math.min(180,l/100*180)}deg)`}})})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-lg font-semibold text-green-600",children:l>=80?"Excellent":l>=60?"Good":l>=40?"Fair":"Needs Improvement"}),e.jsx("div",{className:"text-sm text-gray-600 mt-1",children:"Out of 100 possible points"})]})]})})(),(()=>{const n=Math.max(0,Math.min(25,25-Math.abs(j(t.bmi)-22)*2)),s=Math.max(0,Math.min(25,25-Math.abs(j(t.bodyFat)-15)*1.5)),r=Math.max(0,Math.min(25,(j(t.muscleMass)-30.2)/(37-30.2)*25)),i=Math.max(0,Math.min(15,(t.muscleMass-30.2)/(37-30.2)*15)),a=Math.max(0,Math.min(10,10-j(t.visceralFatGrade)*.1)),l=Math.round(n+s+r+i+a);return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-3",children:"📊 Score Components"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"BMI Score"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[Math.round(n),"/25"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Body Fat Score"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[Math.round(s),"/25"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Muscle Mass Score"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[Math.round(r),"/25"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Skeletal Muscle Score"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[Math.round(i),"/15"]})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Visceral Fat Score"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[Math.round(a),"/10"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-green-800 mb-3",children:"🎯 Score Interpretation"}),e.jsxs("div",{className:"space-y-3 text-sm text-green-700",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Overall Health:"})," Your score indicates ",l>=80?"excellent":l>=60?"good":"fair"," body composition"]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Muscle Quality:"})," ",r>=20?"High muscle quality detected":"Room for muscle development"]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Body Balance:"})," ",i>=10?"Excellent symmetry":"Good overall balance"]})]})]})]})]})})(),(()=>{const n=Math.max(0,Math.min(25,25-Math.abs(j(t.bmi)-22)*2)),s=Math.max(0,Math.min(25,25-Math.abs(j(t.bodyFat)-15)*1.5)),r=Math.max(0,Math.min(25,(j(t.muscleMass)-30.2)/(37-30.2)*25)),i=Math.max(0,Math.min(15,(t.muscleMass-30.2)/(37-30.2)*15)),a=Math.max(0,Math.min(10,10-j(t.visceralFatGrade)*.1)),l=Math.round(n+s+r+i+a),o=Math.max(0,Math.min(25,25-Math.abs(22-22)*2)),c=Math.max(0,Math.min(25,25-Math.abs(15-15)*1.5)),m=Math.max(0,Math.min(25,(37-30.2)/(37-30.2)*25)),d=Math.max(0,Math.min(15,(37-30.2)/(37-30.2)*15)),x=Math.max(0,Math.min(10,10-1*.1)),g=Math.round(o+c+m+d+x);return e.jsxs("div",{className:"bg-gradient-to-r from-indigo-50 to-purple-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-indigo-800 mb-4 text-center",children:"📈 Score Comparison"}),e.jsxs("div",{className:"flex items-center justify-center space-x-4 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:l}),e.jsx("div",{className:"text-sm text-indigo-600",children:"Your Score"})]}),e.jsx("div",{className:"w-16 h-1 bg-gray-300"}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:g}),e.jsx("div",{className:"text-sm text-green-600",children:"Target Score"})]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-2",children:e.jsx("div",{className:"bg-indigo-500 h-3 rounded-full transition-all duration-300",style:{width:`${Math.min(100,l/g*100)}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-600",children:[e.jsx("span",{children:"0"}),e.jsx("span",{children:Math.round(g/2)}),e.jsx("span",{children:g})]})]})})(),e.jsx("div",{className:"mt-6 p-3 bg-gray-50 rounded-lg text-center",children:e.jsxs("p",{className:"text-xs text-gray-600",children:["💡 ",e.jsx("strong",{children:"Note:"})," The total score reflects the evaluated value of body composition. A muscular person may get more than 100 points. This score is for informational purposes only."]})})]}),ri=({athleteBodyComp:t})=>e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6 text-center",children:"🎯 Weight Control Goals"}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 p-4 rounded-lg mb-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Current Weight"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[j(t.weight).toFixed(1)," kg"]})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Target Weight"}),e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[j(t.targetWeight).toFixed(1)," kg"]})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600 mb-1",children:"Difference"}),e.jsxs("div",{className:`text-2xl font-bold ${j(t.weight)-j(t.targetWeight)>=0?"text-orange-600":"text-red-600"}`,children:[j(t.weight)-j(t.targetWeight)>=0?"+":"",(j(t.weight)-j(t.targetWeight)).toFixed(1)," kg"]})]})]})}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"📊 Progress to Target Weight"}),e.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-green-50 p-6 rounded-lg shadow-sm border-2 border-blue-200",children:[e.jsxs("div",{className:"flex justify-between items-center text-sm font-medium text-gray-700 mb-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[j(t.weight).toFixed(1),"kg"]}),e.jsx("div",{className:"text-xs text-gray-600",children:"CURRENT"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[j(t.targetWeight).toFixed(1),"kg"]}),e.jsx("div",{className:"text-xs text-gray-600",children:"TARGET"})]})]}),e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"w-full bg-gray-300 rounded-full h-6 shadow-inner",children:e.jsx("div",{className:"bg-gradient-to-r from-blue-500 via-blue-600 to-green-500 h-6 rounded-full transition-all duration-500 shadow-lg",style:{width:`${Math.min(100,Math.max(0,(j(t.targetWeight)-j(t.weight))/(j(t.targetWeight)-j(t.weight)+Math.abs(j(t.weight)-j(t.targetWeight)))*100))}%`}})}),e.jsx("div",{className:"absolute top-0 w-1 h-8 bg-green-600 rounded-full shadow-lg",style:{left:"100%",transform:"translateX(-50%)"},children:e.jsx("div",{className:"absolute -top-6 left-1/2 transform -translate-x-1/2",children:e.jsx("div",{className:"text-xs font-bold text-green-600",children:"🎯"})})}),e.jsx("div",{className:"absolute top-0 w-4 h-10 bg-blue-600 rounded-full shadow-lg border-2 border-white",style:{left:`${Math.min(100,Math.max(0,(j(t.targetWeight)-j(t.weight))/(j(t.targetWeight)-j(t.weight)+Math.abs(j(t.weight)-j(t.targetWeight)))*100))}%`,transform:"translateX(-50%)"},children:e.jsx("div",{className:"absolute -top-8 left-1/2 transform -translate-x-1/2",children:e.jsxs("div",{className:"text-xs font-bold text-blue-600 whitespace-nowrap",children:["📍 ",j(t.weight).toFixed(1),"kg"]})})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Difference"}),e.jsxs("div",{className:`text-lg font-bold ${j(t.weight)-j(t.targetWeight)>=0?"text-orange-600":"text-green-600"}`,children:[j(t.weight)-j(t.targetWeight)>=0?"+":"",(j(t.weight)-j(t.targetWeight)).toFixed(1)," kg"]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Progress"}),e.jsxs("div",{className:"text-lg font-bold text-blue-600",children:[Math.min(100,Math.max(0,(j(t.targetWeight)-j(t.weight))/(j(t.targetWeight)-j(t.weight)+Math.abs(j(t.weight)-j(t.targetWeight)))*100)).toFixed(0),"%"]})]}),e.jsxs("div",{className:"bg-white p-3 rounded-lg shadow-sm",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Status"}),e.jsx("div",{className:`text-lg font-bold ${j(t.weight)-j(t.targetWeight)<=0?"text-green-600":"text-orange-600"}`,children:j(t.weight)-j(t.targetWeight)<=0?"On Track":"Adjusting"})]})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsx("div",{className:"text-sm text-gray-700 bg-white p-3 rounded-lg shadow-sm",children:j(t.weight)-j(t.targetWeight)<=0?`🎉 Great progress! Only ${Math.abs(j(t.weight)-j(t.targetWeight)).toFixed(1)}kg to reach your target!`:`💪 You're ${Math.abs(j(t.weight)-j(t.targetWeight)).toFixed(1)}kg above target. Let's adjust your plan!`})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"⚖️"}),"Weight Management"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Target Weight"}),e.jsxs("span",{className:"font-bold text-blue-600",children:[j(t.targetWeight).toFixed(1)," kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Current Status"}),e.jsx("span",{className:`font-bold ${j(t.weight)-j(t.targetWeight)>=0?"text-orange-600":"text-green-600"}`,children:j(t.weight)-j(t.targetWeight)>=0?"Above Target":"On Track"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Weekly Goal"}),e.jsx("span",{className:"font-bold text-blue-600",children:j(t.weight)-j(t.targetWeight)>2?`-${Math.min(1,(j(t.weight)-j(t.targetWeight))/8).toFixed(2)} kg/week`:j(t.weight)-j(t.targetWeight)>0?`-${Math.min(.5,(j(t.weight)-j(t.targetWeight))/8).toFixed(2)} kg/week`:j(t.weight)-j(t.targetWeight)<-2?`+${Math.min(.5,Math.abs(j(t.weight)-j(t.targetWeight))/8).toFixed(2)} kg/week`:"Maintain"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"💪"}),"Body Composition Goals"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Fat Control"}),e.jsxs("span",{className:`font-bold ${j(t.bodyFat)-15>=0?"text-red-600":"text-green-600"}`,children:[j(t.bodyFat)-15>=0?"+":"",(j(t.bodyFat)-15).toFixed(1),"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Muscle Control"}),e.jsxs("span",{className:`font-bold ${j(t.muscleMass)-35>=0?"text-green-600":"text-red-600"}`,children:[j(t.muscleMass)-35>=0?"+":"",(j(t.muscleMass)-35).toFixed(1)," kg"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Target Fat %"}),e.jsx("span",{className:"font-bold text-green-600",children:"15%"})]})]})]})]}),e.jsxs("div",{className:"mt-6 bg-gradient-to-r from-purple-50 to-pink-50 p-4 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold text-purple-800 mb-3",children:"🎯 Action Plan"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-purple-700",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Nutrition Focus"}),e.jsx("div",{children:j(t.weight)-j(t.targetWeight)>2?`Calorie deficit: ${Math.round((j(t.weight)-j(t.targetWeight))*1250)} kcal/day`:j(t.weight)-j(t.targetWeight)>0?`Calorie deficit: ${Math.round((j(t.weight)-j(t.targetWeight))*625)} kcal/day`:j(t.weight)-j(t.targetWeight)<-2?`Calorie surplus: ${Math.round(Math.abs(j(t.weight)-j(t.targetWeight))*625)} kcal/day`:"Balanced nutrition"})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Training Focus"}),e.jsx("div",{children:j(t.muscleMass)<35?"Strength training 3x/week":j(t.bodyFat)>15?"HIIT + cardio 3x/week":"Mixed training program"})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Timeline"}),e.jsx("div",{children:Math.abs(j(t.weight)-j(t.targetWeight))>5?`${Math.round(Math.abs(j(t.weight)-j(t.targetWeight))*2.4)} weeks`:Math.abs(j(t.weight)-j(t.targetWeight))>2?`${Math.round(Math.abs(j(t.weight)-j(t.targetWeight))*1.5)} weeks`:"4-6 weeks"})]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-orange-500 rounded-full mt-2"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Monitoring"}),e.jsx("div",{children:"Weekly weigh-ins + monthly body composition"})]})]})]})]})]}),ii=({athleteBodyComp:t})=>e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6 text-center",children:"📋 Health Indicators Overview"}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"🔥"}),"Metabolic Health"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-blue-700",children:"Basal Metabolic Rate"}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[j(t.basalMetabolicRate).toFixed(0)," kcal"]})]}),e.jsx("div",{className:"text-xs text-blue-600 mb-2",children:"Daily calories burned at rest"}),e.jsx("div",{className:"w-full bg-blue-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-500 h-2 rounded-full",style:{width:`${Math.min(100,j(t.basalMetabolicRate)/2500*100)}%`}})}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Range: 1200-2500 kcal"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-green-700",children:"Visceral Fat Grade"}),e.jsxs("span",{className:"text-lg font-bold text-green-600",children:[j(t.visceralFatGrade),"/10"]})]}),e.jsx("div",{className:"text-xs text-green-600 mb-2",children:"Fat around internal organs"}),e.jsx("div",{className:"w-full bg-green-200 rounded-full h-2",children:e.jsx("div",{className:"bg-green-500 h-2 rounded-full",style:{width:`${Math.min(100,j(t.visceralFatGrade)/10*100)}%`}})}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:"Ideal: 1-3"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-purple-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"💪"}),"Body Composition"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-purple-700",children:"Fat-Free Body Weight"}),e.jsxs("span",{className:"text-lg font-bold text-purple-600",children:[j(t.weight-t.weight*t.bodyFat/100).toFixed(1)," kg"]})]}),e.jsx("div",{className:"text-xs text-purple-600 mb-2",children:"Weight without fat"}),e.jsx("div",{className:"w-full bg-purple-200 rounded-full h-2",children:e.jsx("div",{className:"bg-purple-500 h-2 rounded-full",style:{width:`${Math.min(100,j(t.weight-t.weight*t.bodyFat/100)/80*100)}%`}})}),e.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"Higher is better for muscle mass"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-orange-100 p-4 rounded-lg",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-orange-700",children:"Subcutaneous Fat"}),e.jsxs("span",{className:"text-lg font-bold text-orange-600",children:[j(t.bodyFat).toFixed(1),"%"]})]}),e.jsx("div",{className:"text-xs text-orange-600 mb-2",children:"Fat under the skin"}),e.jsx("div",{className:"w-full bg-orange-200 rounded-full h-2",children:e.jsx("div",{className:"bg-orange-500 h-2 rounded-full",style:{width:`${Math.min(100,j(t.bodyFat))}%`}})}),e.jsx("div",{className:"text-xs text-orange-600 mt-1",children:"Healthy range: 8-20%"})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-indigo-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"⏳"}),"Age & Body Ratios"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm font-medium text-indigo-700 mb-1",children:"Body Age"}),e.jsx("div",{className:"text-2xl font-bold text-indigo-600 mb-1",children:j(t.bodyAge)}),e.jsx("div",{className:"text-xs text-indigo-600",children:"years"}),e.jsx("div",{className:`text-xs mt-2 px-2 py-1 rounded-full ${j(t.bodyAge)<=25?"bg-green-100 text-green-800":j(t.bodyAge)<=35?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:j(t.bodyAge)<=25?"Excellent":j(t.bodyAge)<=35?"Good":"Needs Attention"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-50 to-pink-100 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm font-medium text-pink-700 mb-1",children:"SMI"}),e.jsx("div",{className:"text-2xl font-bold text-pink-600 mb-1",children:j(t.muscleMass/1.8**2).toFixed(1)}),e.jsx("div",{className:"text-xs text-pink-600",children:"kg/m²"}),e.jsx("div",{className:`text-xs mt-2 px-2 py-1 rounded-full ${j(t.muscleMass/1.8**2)>=7?"bg-green-100 text-green-800":j(t.muscleMass/1.8**2)>=5?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:j(t.muscleMass/1.8**2)>=7?"Strong":j(t.muscleMass/1.8**2)>=5?"Average":"Low"}),e.jsx("div",{className:"text-xs text-pink-600 mt-2 italic",children:"Skeletal Muscle Index - measures muscle mass relative to height"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-teal-50 to-teal-100 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-sm font-medium text-teal-700 mb-1",children:"WHR"}),e.jsx("div",{className:"text-2xl font-bold text-teal-600 mb-1",children:"0.86"}),e.jsx("div",{className:"text-xs text-teal-600",children:"ratio"}),e.jsx("div",{className:"text-xs mt-2 px-2 py-1 rounded-full bg-green-100 text-green-800",children:"Healthy"}),e.jsx("div",{className:"text-xs text-teal-600 mt-2 italic",children:"Waist-to-Hip Ratio - measures body fat distribution and health risks"})]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"💡 Key Insights"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Metabolic Rate:"})," Your BMR indicates ",j(t.basalMetabolicRate)>1800?"good muscle mass":"potential for improvement"," with strength training."]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Body Age:"})," ",j(t.bodyAge)<=25?"Excellent! Your body is in peak condition.":"Focus on consistent training and nutrition to improve."]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Muscle Quality:"})," Your SMI suggests ",j(t.muscleMass/1.8**2)>=7?"excellent muscle quality":"room for muscle development","."]})]})]})]})]}),ai=({athleteBodyComp:t})=>e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"⚖️ Body Balance Evaluation"}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"text-center p-4 bg-gradient-to-r from-green-50 to-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-lg font-semibold text-green-700 mb-2",children:"Overall Balance Status"}),e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:"Excellent"}),e.jsx("div",{className:"text-sm text-green-600",children:"Your body shows excellent symmetry and balance"})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 p-4 rounded-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"💪"}),"Upper Body Balance"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Left Arm Strength"}),e.jsx("span",{className:"font-bold text-blue-600",children:"95.2%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Right Arm Strength"}),e.jsx("span",{className:"font-bold text-blue-600",children:"94.8%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Shoulder Symmetry"}),e.jsx("span",{className:"font-bold text-green-600",children:"98.5%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded",children:[e.jsx("span",{className:"text-sm text-blue-700",children:"Upper Body Status"}),e.jsx("span",{className:"font-bold text-green-600",children:"Excellent"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-teal-50 p-4 rounded-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-800 mb-4 flex items-center",children:[e.jsx("span",{className:"mr-2",children:"🦵"}),"Lower Body Balance"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Left Leg Strength"}),e.jsx("span",{className:"font-bold text-green-600",children:"96.1%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Right Leg Strength"}),e.jsx("span",{className:"font-bold text-green-600",children:"95.9%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Hip Alignment"}),e.jsx("span",{className:"font-bold text-green-600",children:"97.8%"})]}),e.jsxs("div",{className:"flex justify-between items-center p-2 bg-white rounded",children:[e.jsx("span",{className:"text-sm text-green-700",children:"Lower Body Status"}),e.jsx("span",{className:"font-bold text-green-600",children:"Excellent"})]})]})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"📊 Balance Comparison"}),e.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"Upper Body"}),e.jsx("span",{children:"Lower Body"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-blue-500 h-3 rounded-full",style:{width:"98%"}})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"98%"}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-green-500 h-3 rounded-full",style:{width:"97%"}})})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-sm text-gray-600 mb-2",children:[e.jsx("span",{children:"Left Side"}),e.jsx("span",{children:"Right Side"})]}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-purple-500 h-3 rounded-full",style:{width:"96%"}})}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"99%"}),e.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"bg-orange-500 h-3 rounded-full",style:{width:"95%"}})})]})]})]})})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-md font-semibold text-gray-800 mb-3",children:"💡 Balance Insights"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full mt-2"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Excellent Symmetry:"})," Your left and right sides show remarkable balance, indicating well-rounded training."]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full mt-2"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Upper-Lower Harmony:"})," Perfect balance between upper and lower body strength prevents injury and optimizes performance."]})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("div",{className:"w-2 h-2 bg-purple-500 rounded-full mt-2"}),e.jsxs("span",{children:[e.jsx("strong",{children:"Muscle Coordination:"})," Your balanced development suggests excellent neuromuscular coordination and training efficiency."]})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-blue-50 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-semibold text-blue-800 mb-2",children:"🎯 Recommendations"}),e.jsx("p",{className:"text-sm text-blue-700",children:"Continue with your balanced training approach. Consider adding unilateral exercises to maintain this excellent symmetry."})]})]}),li=({athleteId:t})=>{const[n,s]=I.useState(null),[r,i]=I.useState(!0),[a,l]=I.useState(null);return I.useEffect(()=>{t&&(async()=>{try{i(!0),l(null);const c=parseInt(t,10);if(isNaN(c))throw new Error("Invalid athlete ID");const m=await Sr.getBodyCompositionByAthlete(c),d=Array.isArray(m)?m.filter(x=>x.measurementDate).sort((x,g)=>new Date(g.measurementDate).getTime()-new Date(x.measurementDate).getTime())[0]:null;s(d||null)}catch(c){l(c instanceof Error?c.message:"Failed to load body composition data")}finally{i(!1)}})()},[t]),e.jsxs("div",{className:"space-y-8 text-gray-900",children:[e.jsx(Xr,{loading:r,error:a,hasData:!!n}),n&&e.jsxs(e.Fragment,{children:[e.jsx(Qr,{athleteBodyComp:n}),e.jsx(Zr,{athleteBodyComp:n}),e.jsx(Jr,{athleteBodyComp:n}),e.jsx(ei,{athleteBodyComp:n}),e.jsx(ti,{athleteBodyComp:n}),e.jsx(ni,{athleteBodyComp:n}),e.jsx(si,{athleteBodyComp:n}),e.jsx(ri,{athleteBodyComp:n}),e.jsx(ii,{athleteBodyComp:n}),e.jsx(ai,{athleteBodyComp:n})]})]})},oi=({athleteId:t})=>{const[n,s]=I.useState([]),[r,i]=I.useState([]),[a,l]=I.useState(!0),[o,c]=I.useState(null),[m,d]=I.useState("");I.useEffect(()=>{t&&(async()=>{try{l(!0),c(null);const v=parseInt(t,10);if(isNaN(v))throw new Error("Invalid athlete ID");const N=await Ke.getPharmacogenomicsByAthlete(v);s(N);const y=await Ke.getGeneticProfileByAthlete(v);i(y),d(`Athlete ${t}`)}catch(v){c(v instanceof Error?v.message:"Failed to load genetic data")}finally{l(!1)}})()},[t]);const x=I.useMemo(()=>{const h=[],v=[{medication:"Ibuprofen",gene:"General",genotype:"Standard",effect:"Standard anti-inflammatory response",recommendation:"Safe for short-term use, monitor stomach",riskLevel:"low",category:"safe",athleticRelevance:"high",commonUse:"Post-training soreness",dosage:"400-800mg every 6-8 hours as needed",alternatives:["Acetaminophen","Naproxen"],interactions:["Aspirin","Blood thinners"]},{medication:"Acetaminophen",gene:"General",genotype:"Standard",effect:"Standard pain relief without anti-inflammatory effects",recommendation:"Safe for pain relief, liver-safe dosing",riskLevel:"low",category:"safe",athleticRelevance:"high",commonUse:"Headache and general pain",dosage:"500-1000mg every 4-6 hours as needed",alternatives:["Ibuprofen","Aspirin"],interactions:["Alcohol","Liver medications"]},{medication:"Caffeine",gene:"ADORA2A",genotype:"Standard",effect:"Performance enhancement through adenosine receptor",recommendation:"Effective for endurance and focus",riskLevel:"low",category:"safe",athleticRelevance:"high",commonUse:"Pre-training stimulation",dosage:"200-400mg 30-60 minutes before activity",alternatives:["Green tea extract","Guarana"],interactions:["Stimulants","Heart medications"]},{medication:"Albuterol",gene:"ADRB2",genotype:"Standard",effect:"Bronchodilation for improved breathing",recommendation:"Effective for exercise-induced bronchoconstriction",riskLevel:"low",category:"safe",athleticRelevance:"high",commonUse:"Asthma and breathing support",dosage:"2 puffs as needed before exercise",alternatives:["Levalbuterol","Ipratropium"],interactions:["Beta-blockers","Heart medications"]},{medication:"Vitamin K",gene:"VKORC1",genotype:"Standard",effect:"Can interfere with blood thinning medications",recommendation:"Monitor intake if on anticoagulants",riskLevel:"medium",category:"caution",athleticRelevance:"medium",commonUse:"Bone health supplement",dosage:"90-120mcg daily from food sources",alternatives:["Calcium","Vitamin D"],interactions:["Warfarin","Blood thinners"]}];return h.push(...v),n.length>0&&n.forEach(N=>{N.medication&&N.medication!=="Unknown Medication"&&N.medication.trim()!==""&&N.interpretation_code&&N.interpretation_code!=="Effect not specified"&&h.push({medication:N.medication,gene:N.gene||"Unknown Gene",genotype:N.genetic_call||N.known_call||"Unknown Genotype",effect:N.interpretation_code,recommendation:N.override_comment||"Monitor response and adjust as needed",riskLevel:(N.summary_flag||"medium").toLowerCase(),category:"caution",athleticRelevance:"medium",commonUse:"Genetic-specific medication response"})}),r.forEach(N=>{switch(N.gene){case"CYP2D6":N.genotype.includes("Poor")?h.push({medication:"Codeine",gene:N.gene,genotype:N.genotype,effect:"Poor metabolism - may be ineffective",recommendation:"Avoid codeine, consider alternative pain relief",riskLevel:"high",category:"avoid",athleticRelevance:"high",commonUse:"Post-injury pain relief"}):N.genotype.includes("Ultra")&&h.push({medication:"Codeine",gene:N.gene,genotype:N.genotype,effect:"Ultra-rapid metabolism - risk of toxicity",recommendation:"Avoid codeine, risk of overdose",riskLevel:"high",category:"avoid",athleticRelevance:"high",commonUse:"Post-injury pain relief"});break;case"CYP2C19":N.genotype.includes("Poor")&&h.push({medication:"Omeprazole",gene:N.gene,genotype:N.genotype,effect:"Poor metabolism - reduced effectiveness",recommendation:"Higher doses may be needed or alternative PPI",riskLevel:"medium",category:"caution",athleticRelevance:"medium",commonUse:"GERD treatment"});break;case"SLCO1B1":N.genotype==="CC"?h.push({medication:"Atorvastatin",gene:N.gene,genotype:N.genotype,effect:"Increased risk of statin-induced myopathy",recommendation:"Monitor for muscle pain, consider lower doses",riskLevel:"medium",category:"caution",athleticRelevance:"medium",commonUse:"Cholesterol management"}):(N.genotype==="CT"||N.genotype==="TT")&&h.push({medication:"Atorvastatin",gene:N.gene,genotype:N.genotype,effect:"Significantly increased risk of myopathy",recommendation:"Avoid statins or use very low doses with monitoring",riskLevel:"high",category:"avoid",athleticRelevance:"medium",commonUse:"Cholesterol management"});break;case"VKORC1":h.push({medication:"Warfarin",gene:N.gene,genotype:N.genotype,effect:"Affects warfarin sensitivity",recommendation:N.genotype==="AA"?"May require higher warfarin doses":N.genotype==="AG"?"Standard dosing appropriate":"May require lower warfarin doses",riskLevel:N.genotype==="AA"?"medium":N.genotype==="GG"?"high":"low",category:N.genotype==="GG"?"caution":"safe",athleticRelevance:"low",commonUse:"Anticoagulation therapy"});break;case"CFTR":N.genotype==="F508del/F508del"&&h.push({medication:"Ivacaftor",gene:N.gene,genotype:N.genotype,effect:"Responds well to CFTR modulator therapy",recommendation:"Ivacaftor indicated for this genotype",riskLevel:"low",category:"safe",athleticRelevance:"low",commonUse:"Cystic fibrosis treatment"});break}}),h},[n,r]);if(a)return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Pharmacogenomics Report"}),e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading genetic data..."})]})]})});if(o)return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Pharmacogenomics Report"}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-500 mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Genetic Data"}),e.jsx("p",{className:"text-gray-600 mb-4",children:o}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]})]})});const g=x.filter(h=>h.category==="safe"),u=x.filter(h=>h.category==="caution"),p=x.filter(h=>h.category==="avoid");return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Medication Safety Guide"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Genetic-based medication recommendations for ",m]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[g.length," Safe"]}),e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[u.length," Use with Caution"]}),e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[p.length," Avoid"]})]})]}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors flex items-center gap-1",title:"Refresh medication data",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]}),g.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),"Safe to Use (",g.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:g.map((h,v)=>e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:h.medication}),e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800 font-medium",children:h.athleticRelevance==="high"?"High Relevance":"Medium Relevance"})]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Common Use:"})," ",h.commonUse]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Effect:"})," ",h.effect]}),h.dosage&&e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Recommended Dosage:"})," ",h.dosage]}),h.alternatives&&h.alternatives.length>0&&e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Alternatives:"})," ",h.alternatives.join(", ")]})]},v))})]}),u.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-yellow-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-2"}),"Use with Caution (",u.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:u.map((h,v)=>e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:h.medication}),e.jsxs("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${h.riskLevel==="high"?"bg-red-100 text-red-800":h.riskLevel==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[h.riskLevel," Risk"]})]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Common Use:"})," ",h.commonUse]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Effect:"})," ",h.effect]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-3",children:[e.jsx("span",{className:"font-medium",children:"Recommendation:"})," ",h.recommendation]}),h.dosage&&e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Recommended Dosage:"})," ",h.dosage]}),h.alternatives&&h.alternatives.length>0&&e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Alternatives:"})," ",h.alternatives.join(", ")]})]},v))})]}),p.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),"Avoid These Medications (",p.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:p.map((h,v)=>e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:h.medication}),e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-800 font-medium",children:"High Risk"})]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Common Use:"})," ",h.commonUse]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Effect:"})," ",h.effect]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-3",children:[e.jsx("span",{className:"font-medium",children:"Recommendation:"})," ",h.recommendation]}),h.alternatives&&h.alternatives.length>0&&e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium",children:"Safer Alternatives:"})," ",h.alternatives.join(", ")]})]},v))})]}),x.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"💊"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Significant Pharmacogenomic Interactions"}),e.jsx("p",{className:"text-gray-600",children:"Based on available genetic data, no high-risk medication interactions were detected."})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Common Athletic Scenarios"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"Post-Injury Pain Management"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Acetaminophen:"}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Safe"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Ibuprofen (short-term):"}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Safe"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-blue-700",children:"Codeine:"}),e.jsx("span",{className:"px-2 py-1 bg-red-100 text-red-800 text-xs rounded-full",children:"Avoid"})]})]})]}),e.jsxs("div",{className:"p-4 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("h4",{className:"font-semibold text-purple-800 mb-3",children:"Performance Enhancement"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-purple-700",children:"Caffeine:"}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Safe"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-purple-700",children:"Albuterol (if prescribed):"}),e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"Safe"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-purple-700",children:"Vitamin K (with anticoagulants):"}),e.jsx("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-800 text-xs rounded-full",children:"Caution"})]})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),"Important Interactions"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx("h5",{className:"font-semibold text-orange-800 mb-2",children:"With Athletic Performance"}),e.jsxs("ul",{className:"text-sm text-orange-700 space-y-1",children:[e.jsx("li",{children:"• Caffeine may interfere with sleep medications"}),e.jsx("li",{children:"• NSAIDs can reduce training adaptations if overused"}),e.jsx("li",{children:"• Decongestants may cause heart rhythm issues"})]})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("h5",{className:"font-semibold text-red-800 mb-2",children:"With Other Medications"}),e.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[e.jsx("li",{children:"• Aspirin + blood thinners = increased bleeding risk"}),e.jsx("li",{children:"• Caffeine + stimulants = heart palpitations"}),e.jsx("li",{children:"• Vitamin K + warfarin = reduced effectiveness"})]})]})]})]}),e.jsxs("div",{className:"p-5 bg-blue-50 rounded-lg border border-blue-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Important Medical Disclaimer"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"This pharmacogenomic report is for informational purposes only and should not replace professional medical advice. Always consult with a healthcare provider before making any changes to medication regimens. Genetic testing can provide valuable insights but is only one factor in medication response."})]})]})})},ci=({athleteId:t})=>{const[n,s]=I.useState([]),[r,i]=I.useState([]),[a,l]=I.useState(!0),[o,c]=I.useState(null),[m,d]=I.useState(""),[x,g]=I.useState(null);I.useEffect(()=>{t&&(async()=>{try{l(!0),c(null);const h=parseInt(t,10);if(isNaN(h))throw new Error("Invalid athlete ID");const[v,N]=await Promise.all([Ke.getNutrigenomicsByAthlete(h),Ke.getGeneticProfileByAthlete(h)]),y=Array.isArray(v)?v.map((k,E)=>({gene:k.gene||k.GeneName||`GENE_${E}`,genetic_call:k.genetic_call||k.GeneticCall||k.genotype||"Unknown",known_call:k.known_call||k.KnownCall,category:k.category||k.Category||"General",priority:k.priority||k.Priority||k.summary_flag||"medium",summary_flag:k.summary_flag||k.SummaryFlag,interpretation_code:k.interpretation_code||k.InterpretationCode||k.rationale,supplement:k.supplement||k.Supplement,dosage:k.dosage||k.Dosage,timing:k.timing||k.Timing,created_at:k.created_at||k.CreatedAt,confidence_score:k.confidence_score||k.ConfidenceScore,risk_level:k.risk_level||k.RiskLevel||(k.priority==="high"?"high":k.priority==="medium"?"medium":"low")})):[];s(y),i(N),g(new Date().toISOString()),d(`Athlete ${t}`)}catch(h){c(h instanceof Error?h.message:"Failed to load genetic data")}finally{l(!1)}})()},[t]);const u=I.useMemo(()=>{const p=[];return n.length>0&&n.forEach((h,v)=>{h.supplement&&h.gene&&p.push({supplement:h.supplement,gene:h.gene,genotype:h.genetic_call||h.known_call||"Unknown",rationale:h.interpretation_code||"Genetic-based recommendation",dosage:h.dosage||"Dosage not specified",timing:h.timing||"Timing not specified",priority:(h.priority||h.summary_flag||"medium").toLowerCase(),category:h.category||"General",confidence_score:h.confidence_score,risk_level:h.risk_level,genetic_mark_id:`mark_${v}`})}),p.length===0&&(Array.isArray(r)?r:[]).forEach(v=>{switch(v.gene){case"MTHFR":(v.genotype==="TT"||v.genotype==="CT")&&p.push({supplement:"Methylated Folate (5-MTHF)",gene:v.gene,genotype:v.genotype,rationale:"Reduced enzyme activity affects folate metabolism",dosage:"400-800 mcg daily",timing:"With breakfast for better absorption",priority:v.genotype==="TT"?"high":"medium",category:"Methylation",confidence_score:.85,risk_level:v.genotype==="TT"?"high":"medium"});break;case"VDR":(v.genotype==="FF"||v.genotype==="Ff")&&p.push({supplement:"Vitamin D3",gene:v.gene,genotype:v.genotype,rationale:"Reduced vitamin D receptor sensitivity",dosage:"2000-4000 IU daily (with blood testing)",timing:"With fat-containing meal for better absorption",priority:"high",category:"Vitamin Metabolism",confidence_score:.9,risk_level:"high"});break;case"FTO":(v.genotype==="AA"||v.genotype==="AT")&&p.push({supplement:"Green Tea Extract (EGCG)",gene:v.gene,genotype:v.genotype,rationale:"Increased risk of weight gain, enhanced fat oxidation support",dosage:"250-500 mg EGCG daily",timing:"30 minutes before exercise",priority:"medium",category:"Metabolism",confidence_score:.75,risk_level:"medium"});break;case"ACTN3":v.genotype==="XX"?p.push({supplement:"Creatine Monohydrate",gene:v.gene,genotype:v.genotype,rationale:"Reduced power/strength potential, creatine can help",dosage:"3-5g daily",timing:"Post-workout with carbohydrates",priority:"medium",category:"Performance",confidence_score:.8,risk_level:"medium"}):v.genotype==="RR"&&p.push({supplement:"Beta-Alanine",gene:v.gene,genotype:v.genotype,rationale:"Enhanced power capacity, buffering support",dosage:"3-5g daily (divided doses)",timing:"Pre-workout",priority:"medium",category:"Performance",confidence_score:.8,risk_level:"low"});break;case"PPARGC1A":v.genotype.includes("Ser")&&(p.push({supplement:"Resveratrol",gene:v.gene,genotype:v.genotype,rationale:"Enhanced mitochondrial biogenesis response",dosage:"250-500mg daily",timing:"With dinner",priority:"medium",category:"Mitochondrial Function",confidence_score:.7,risk_level:"low"}),p.push({supplement:"Coenzyme Q10",gene:v.gene,genotype:v.genotype,rationale:"Mitochondrial support for energy production",dosage:"100-200mg daily",timing:"With breakfast",priority:"medium",category:"Mitochondrial Function",confidence_score:.75,risk_level:"low"}));break;case"ADRB2":v.genotype==="Gly16Gly"&&p.push({supplement:"Caffeine (Genotype-Optimized)",gene:v.gene,genotype:v.genotype,rationale:"Reduced fat mobilization, strategic caffeine use",dosage:"100-200mg (lower than typical doses)",timing:"Pre-workout (avoid late in day)",priority:"medium",category:"Metabolism",confidence_score:.65,risk_level:"medium"});break;case"NOS3":(v.genotype==="CC"||v.genotype==="CT")&&p.push({supplement:"L-Citrulline",gene:v.gene,genotype:v.genotype,rationale:"Enhanced nitric oxide production support",dosage:"6-8g daily",timing:"30 minutes before exercise",priority:"medium",category:"Cardiovascular",confidence_score:.8,risk_level:"low"});break}}),p},[n,r]);return a?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Nutrigenomics Report"}),e.jsx("div",{className:"text-sm text-gray-500",children:"Loading genetic marks from controllers..."})]}),e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Fetching genetic data and processing recommendations..."})]}),e.jsx("div",{className:"mt-4 text-center",children:e.jsxs("div",{className:"inline-flex items-center text-sm text-gray-500",children:[e.jsx("div",{className:"animate-pulse mr-2",children:"●"}),e.jsx("div",{className:"animate-pulse mr-2",children:"●"}),e.jsx("div",{className:"animate-pulse",children:"●"})]})})]})}):o?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Nutrigenomics Report"}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors",children:"Refresh"})]}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-500 mb-4 text-4xl",children:"⚠️"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Genetic Data"}),e.jsx("p",{className:"text-gray-600 mb-4 max-w-md mx-auto",children:o}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Retry Loading"}),e.jsx("p",{className:"text-xs text-gray-500",children:"If the problem persists, please check your connection or contact support."})]})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Nutrigenomics Report"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Personalized supplement recommendations for ",m]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:n.length>0?`${n.length} genetic marks from controllers`:"Legacy genetic profiles"}),n.length>0&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Controller Data Available"})]})]}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors flex items-center gap-1",title:"Refresh genetic data",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]}),u.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Supplement Recommendations (",u.length,")"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[u.filter(p=>p.priority==="high").length," High Priority"]}),e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[u.filter(p=>p.priority==="medium").length," Medium Priority"]}),e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[u.filter(p=>p.priority==="low").length," Low Priority"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:u.map((p,h)=>e.jsxs("div",{className:"p-5 rounded-lg border border-gray-200 hover:border-blue-300 transition-colors bg-white shadow-sm",children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:p.supplement}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[p.gene," • ",p.genotype]}),e.jsxs("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${p.priority==="high"?"bg-red-100 text-red-800":p.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[p.priority.charAt(0).toUpperCase()+p.priority.slice(1)," Priority"]}),p.category&&e.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:p.category})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-700",children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Rationale:"})," ",p.rationale]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900 text-sm",children:"Dosage:"}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:p.dosage})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900 text-sm",children:"Timing:"}),e.jsx("p",{className:"text-sm text-gray-700 mt-1",children:p.timing})]})]}),p.confidence_score&&e.jsxs("div",{className:"pt-2 border-t border-gray-100",children:[e.jsxs("div",{className:"flex justify-between items-center text-xs text-gray-600",children:[e.jsx("span",{children:"Confidence Score:"}),e.jsxs("span",{className:`font-medium ${p.confidence_score>=.8?"text-green-600":p.confidence_score>=.6?"text-yellow-600":"text-red-600"}`,children:[(p.confidence_score*100).toFixed(1),"%"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:e.jsx("div",{className:`h-2 rounded-full ${p.confidence_score>=.8?"bg-green-500":p.confidence_score>=.6?"bg-yellow-500":"bg-red-500"}`,style:{width:`${p.confidence_score*100}%`}})})]}),p.risk_level&&e.jsx("div",{className:"pt-2 border-t border-gray-100",children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-gray-600",children:"Risk Level:"}),e.jsx("span",{className:`text-xs font-medium px-2 py-1 rounded-full ${p.risk_level==="high"?"bg-red-100 text-red-800":p.risk_level==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:p.risk_level.charAt(0).toUpperCase()+p.risk_level.slice(1)})]})})]})]},p.genetic_mark_id||h))})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"🥗"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Specific Genetic-Based Supplement Recommendations"}),e.jsx("p",{className:"text-gray-600",children:"Based on available genetic data, no specific supplement recommendations were identified."})]}),e.jsxs("div",{className:"mt-8 p-5 bg-blue-50 rounded-lg border border-blue-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Implementation Notes"}),e.jsxs("ul",{className:"text-blue-700 text-sm list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"Start with high-priority supplements and monitor response"}),e.jsx("li",{children:"Introduce one supplement at a time to assess individual effects"}),e.jsx("li",{children:"Combine with regular blood testing to optimize dosages"}),e.jsx("li",{children:"Consult with a sports nutritionist for personalized meal planning"}),e.jsx("li",{children:"Consider interactions between supplements and any medications"})]})]})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Personalized Nutrition Plan"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["Genetically-tailored dietary strategy for ",m]})]}),x&&e.jsxs("span",{className:"text-xs text-gray-500",children:["Plan updated: ",new Date(x).toLocaleDateString()]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Macronutrient Distribution"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700 mb-1",children:"40%"}),e.jsx("div",{className:"text-sm text-blue-600",children:"Carbohydrates"}),e.jsx("div",{className:"text-xs text-blue-500 mt-1",children:"Focus on complex carbs for sustained energy"})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-2xl font-bold text-green-700 mb-1",children:"30%"}),e.jsx("div",{className:"text-sm text-green-600",children:"Protein"}),e.jsx("div",{className:"text-xs text-green-500 mt-1",children:"High-quality sources for muscle repair"})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-lg border border-yellow-200",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-700 mb-1",children:"30%"}),e.jsx("div",{className:"text-sm text-yellow-600",children:"Healthy Fats"}),e.jsx("div",{className:"text-xs text-yellow-500 mt-1",children:"Omega-3s and MUFAs for inflammation control"})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Optimal Meal Timing"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"w-12 text-sm font-medium text-green-700",children:"7:00 AM"}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Pre-Training Breakfast"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Complex carbs + protein for sustained energy"})]})]}),e.jsxs("div",{className:"flex items-center p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"w-12 text-sm font-medium text-blue-700",children:"10:00 AM"}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Mid-Morning Snack"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Fruit + nuts for steady blood sugar"})]})]}),e.jsxs("div",{className:"flex items-center p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("div",{className:"w-12 text-sm font-medium text-purple-700",children:"1:00 PM"}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Post-Training Lunch"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Balanced meal with recovery focus"})]})]}),e.jsxs("div",{className:"flex items-center p-3 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx("div",{className:"w-12 text-sm font-medium text-orange-700",children:"4:00 PM"}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Afternoon Snack"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Protein-focused for muscle maintenance"})]})]}),e.jsxs("div",{className:"flex items-center p-3 bg-indigo-50 rounded-lg border border-indigo-200",children:[e.jsx("div",{className:"w-12 text-sm font-medium text-indigo-700",children:"7:00 PM"}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:"Dinner"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Lighter meal with anti-inflammatory foods"})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-purple-500 rounded-full mr-2"}),"Genetic-Based Food Priorities"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("h5",{className:"font-semibold text-red-800 mb-2",children:"High Priority Foods"}),e.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[e.jsx("li",{children:"• Leafy greens (folate-rich)"}),e.jsx("li",{children:"• Fatty fish (omega-3s)"}),e.jsx("li",{children:"• Berries (antioxidants)"}),e.jsx("li",{children:"• Nuts and seeds"}),e.jsx("li",{children:"• Grass-fed proteins"})]})]}),e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("h5",{className:"font-semibold text-yellow-800 mb-2",children:"Moderate Priority Foods"}),e.jsxs("ul",{className:"text-sm text-yellow-700 space-y-1",children:[e.jsx("li",{children:"• Whole grains"}),e.jsx("li",{children:"• Legumes"}),e.jsx("li",{children:"• Root vegetables"}),e.jsx("li",{children:"• Eggs"}),e.jsx("li",{children:"• Avocado"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("h5",{className:"font-semibold text-green-800 mb-2",children:"Foods to Limit"}),e.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[e.jsx("li",{children:"• Processed sugars"}),e.jsx("li",{children:"• Trans fats"}),e.jsx("li",{children:"• Excessive caffeine"}),e.jsx("li",{children:"• Alcohol"}),e.jsx("li",{children:"• Processed meats"})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:"Hydration Strategy"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• 3-4L water daily"}),e.jsx("li",{children:"• Electrolyte balance post-training"}),e.jsx("li",{children:"• Herbal teas for recovery"}),e.jsx("li",{children:"• Bone broth for minerals"})]})]})]})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-indigo-500 rounded-full mr-2"}),"Weekly Meal Structure"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:["Training Days","Rest Days","Competition Days","Recovery Days"].map((p,h)=>e.jsxs("div",{className:"p-3 bg-gradient-to-br from-indigo-50 to-indigo-100 rounded-lg border border-indigo-200 text-center",children:[e.jsx("div",{className:"font-medium text-indigo-800 text-sm",children:p}),e.jsxs("div",{className:"text-xs text-indigo-600 mt-1",children:[p==="Training Days"&&"Higher carbs",p==="Rest Days"&&"Normal balance",p==="Competition Days"&&"Fast energy",p==="Recovery Days"&&"Anti-inflammatory"]})]},h))})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-red-500 rounded-full mr-2"}),"Your Genetic Profile Impact"]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:n.length>0?n.slice(0,4).map((p,h)=>e.jsxs("div",{className:"p-4 bg-white rounded-lg border border-gray-200 shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"font-semibold text-gray-900",children:[p.gene," (",p.genetic_call,")"]}),e.jsx("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${p.category==="Metabolism"?"bg-blue-100 text-blue-800":p.category==="Performance"?"bg-green-100 text-green-800":p.category==="Recovery"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:p.category})]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-3",children:[p.gene==="FTO"&&"Influences weight management and fat metabolism efficiency",p.gene==="ACTN3"&&"Affects muscle power and endurance capabilities",p.gene==="MTHFR"&&"Impacts folate metabolism and methylation processes",p.gene==="VDR"&&"Controls vitamin D receptor sensitivity and calcium metabolism",p.gene==="PPARGC1A"&&"Regulates mitochondrial biogenesis and energy production",p.gene==="ADRB2"&&"Affects fat mobilization and metabolic response",p.gene==="NOS3"&&"Influences nitric oxide production and blood flow",p.gene!=="FTO"&&p.gene!=="ACTN3"&&p.gene!=="MTHFR"&&p.gene!=="VDR"&&p.gene!=="PPARGC1A"&&p.gene!=="ADRB2"&&p.gene!=="NOS3"&&"Genetic variant affecting nutritional needs"]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"Dietary Focus:"}),p.gene==="FTO"&&" Higher protein, controlled portions, green tea",p.gene==="ACTN3"&&" Performance carbs, creatine-rich foods",p.gene==="MTHFR"&&" Methylated folate sources, leafy greens",p.gene==="VDR"&&" Vitamin D rich foods, fatty fish, mushrooms",p.gene==="PPARGC1A"&&" Antioxidant-rich foods, resveratrol sources",p.gene==="ADRB2"&&" Moderate caffeine, balanced macros",p.gene==="NOS3"&&" Nitric oxide boosters, beetroot, citrulline",p.gene!=="FTO"&&p.gene!=="ACTN3"&&p.gene!=="MTHFR"&&p.gene!=="VDR"&&p.gene!=="PPARGC1A"&&p.gene!=="ADRB2"&&p.gene!=="NOS3"&&" Personalized nutrition strategy required"]})]},h)):e.jsxs("div",{className:"col-span-2 p-6 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-200",children:[e.jsx("h5",{className:"font-semibold text-blue-800 mb-2",children:"Standard Athletic Nutrition Profile"}),e.jsx("p",{className:"text-blue-700 text-sm",children:"Based on your genetic profile, you have a standard athletic metabolism pattern. Focus on balanced nutrition with complex carbohydrates, lean proteins, and healthy fats."})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-orange-500 rounded-full mr-2"}),"Sample Daily Meal Plan"]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx("h5",{className:"font-semibold text-orange-800 mb-3",children:"Training Day Example"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-black",children:"Breakfast (7:00 AM):"}),e.jsx("span",{className:"text-gray-600",children:"Oatmeal with berries, eggs, spinach"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-black",children:"Mid-Morning (10:00 AM):"}),e.jsx("span",{className:"text-gray-600",children:"Greek yogurt with almonds"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-black",children:"Lunch (1:00 PM):"}),e.jsx("span",{className:"text-gray-600",children:"Grilled chicken, quinoa, vegetables"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-black",children:"Post-Training (4:00 PM):"}),e.jsx("span",{className:"text-gray-600",children:"Protein shake with banana"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-black",children:"Dinner (7:00 PM):"}),e.jsx("span",{className:"text-gray-600",children:"Salmon, sweet potato, broccoli"})]})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-teal-50 rounded-lg border border-teal-200",children:[e.jsx("h5",{className:"font-semibold text-teal-800 mb-3",children:"Rest Day Example"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-black",children:"Breakfast (8:00 AM):"}),e.jsx("span",{className:"text-gray-600",children:"Smoothie with kale, berries, protein"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-black",children:"Mid-Morning (11:00 AM):"}),e.jsx("span",{className:"text-gray-600",children:"Apple with handful of walnuts"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-black",children:"Lunch (2:00 PM):"}),e.jsx("span",{className:"text-gray-600",children:"Turkey salad with mixed greens"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-black",children:"Afternoon (5:00 PM):"}),e.jsx("span",{className:"text-gray-600",children:"Cottage cheese with tomatoes"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"font-medium text-black",children:"Dinner (8:00 PM):"}),e.jsx("span",{className:"text-gray-600",children:"Grilled fish, brown rice, asparagus"})]})]})]})})]})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h4",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full mr-2"}),"Key Nutrition Strategies"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-emerald-50 rounded-lg border border-emerald-200",children:[e.jsx("h6",{className:"font-semibold text-emerald-800 mb-2",children:"Metabolic Optimization"}),e.jsxs("ul",{className:"text-sm text-emerald-700 space-y-1",children:[e.jsx("li",{children:"• Time carbs around training"}),e.jsx("li",{children:"• Focus on nutrient density"}),e.jsx("li",{children:"• Balance blood sugar"}),e.jsx("li",{children:"• Support liver function"})]})]}),e.jsxs("div",{className:"p-4 bg-amber-50 rounded-lg border border-amber-200",children:[e.jsx("h6",{className:"font-semibold text-amber-800 mb-2",children:"Recovery Enhancement"}),e.jsxs("ul",{className:"text-sm text-amber-700 space-y-1",children:[e.jsx("li",{children:"• Anti-inflammatory foods"}),e.jsx("li",{children:"• Adequate protein timing"}),e.jsx("li",{children:"• Micronutrient support"}),e.jsx("li",{children:"• Sleep-optimized meals"})]})]}),e.jsxs("div",{className:"p-4 bg-rose-50 rounded-lg border border-rose-200",children:[e.jsx("h6",{className:"font-semibold text-rose-800 mb-2",children:"Performance Support"}),e.jsxs("ul",{className:"text-sm text-rose-700 space-y-1",children:[e.jsx("li",{children:"• Pre-training fuel"}),e.jsx("li",{children:"• Intra-training support"}),e.jsx("li",{children:"• Post-training recovery"}),e.jsx("li",{children:"• Competition day strategy"})]})]})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg border border-blue-200",children:[e.jsxs("h5",{className:"font-semibold text-blue-800 mb-3 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Supplement Integration with Meals"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-800 mb-1",children:"Morning Integration:"}),e.jsx("div",{className:"text-gray-600",children:"Take vitamins with breakfast for optimal absorption"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-800 mb-1",children:"Post-Training Integration:"}),e.jsx("div",{className:"text-gray-600",children:"Protein and creatine immediately after workouts"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-800 mb-1",children:"Evening Integration:"}),e.jsx("div",{className:"text-gray-600",children:"Anti-inflammatory supplements with dinner"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-800 mb-1",children:"Pre-Bed Integration:"}),e.jsx("div",{className:"text-gray-600",children:"Magnesium and melatonin for recovery"})]})]})]})]})]})},St={high:0,medium:1,low:2},di=({athleteId:t})=>{const[n,s]=I.useState([]),[r,i]=I.useState(!0),[a,l]=I.useState(null),[o,c]=I.useState(""),[m,d]=I.useState("all"),[x,g]=I.useState("all"),[u,p]=I.useState("all"),[h,v]=I.useState("relevance"),[N,y]=I.useState(!1),k=["COMT","PER3","CLOCK","BDNF","GSK3B","PER2","PPARGC1A","ACTN3","NOS3","TPH2","GABRA6","FKBP5","MAO-A","SLC6A4","IL6","TNF","IL10","VDR","ADRB1","HSD11B1"],E=[{key:"sleep",label:"Sleep & Rhythm",genes:["CLOCK","PER3","BDNF","GSK3B","PER2"]},{key:"stress",label:"Stress Response",genes:["COMT","BDNF","FKBP5","MAO-A","SLC6A4","TPH2","GABRA6"]},{key:"energy",label:"Energy Systems",genes:["PPARGC1A","ACTN3"]},{key:"circulation",label:"Circulation",genes:["NOS3","VDR","ADRB1"]},{key:"inflammation",label:"Inflammation",genes:["IL6","TNF","IL10","HSD11B1"]}],M=(R,$)=>{const P={COMT:{rsid:"rs4680",analysis:{GG:{impact:"beneficial",description:"Efficient catecholamine/stress hormone breakdown",recoveryRecommendation:"Standard recovery protocols sufficient",priority:"low",score:85},GA:{impact:"neutral",description:"Balanced stress response",recoveryRecommendation:"Monitor training load carefully",priority:"low",score:75},AA:{impact:"challenging",description:"Slower catecholamine clearance; stress lingers",recoveryRecommendation:"Extend rest between high-intensity sessions; emphasize parasympathetic work",priority:"high",score:60},default:{impact:"neutral",description:"Stress regulation impact possible",recoveryRecommendation:"Monitor stress and ensure adequate sleep",priority:"medium",score:70}}},PER3:{rsid:"rs228697",analysis:{"4/4":{impact:"beneficial",description:"Morning chronotype",recoveryRecommendation:"Train mornings; ensure 8+ h sleep",priority:"low",score:85},"4/5":{impact:"neutral",description:"Flexible chronotype",recoveryRecommendation:"Adapt training time to preference",priority:"low",score:75},"5/5":{impact:"challenging",description:"Evening chronotype",recoveryRecommendation:"Train later day; strict sleep hygiene",priority:"medium",score:65},default:{impact:"neutral",description:"Circadian preference influence likely",recoveryRecommendation:"Keep a consistent sleep schedule",priority:"medium",score:70}}},CLOCK:{rsid:"rs1801260",analysis:{TT:{impact:"beneficial",description:"Strong circadian rhythm",recoveryRecommendation:"Keep steady sleep/wake times",priority:"low",score:85},TC:{impact:"neutral",description:"Moderate rhythm regulation",recoveryRecommendation:"Maintain regular schedule",priority:"low",score:75},CC:{impact:"challenging",description:"Weaker circadian entrainment",recoveryRecommendation:"Strict sleep schedule; morning light exposure",priority:"medium",score:65},default:{impact:"neutral",description:"Circadian regulation influence possible",recoveryRecommendation:"Optimize light exposure and wind-down routine",priority:"medium",score:70}}},BDNF:{rsid:"rs6265",analysis:{"Val/Val":{impact:"beneficial",description:"Superior neuroplasticity and brain recovery",recoveryRecommendation:"Include cognitive training in recovery",priority:"low",score:90},"Val/Met":{impact:"neutral",description:"Normal brain adaptation",recoveryRecommendation:"Standard neuro recovery",priority:"low",score:75},"Met/Met":{impact:"challenging",description:"Slower neurological recovery",recoveryRecommendation:"Extend rest; monitor cognitive load",priority:"high",score:55},default:{impact:"neutral",description:"Neural recovery influence possible",recoveryRecommendation:"Prioritize sleep and low cognitive load post-intense sessions",priority:"medium",score:70}}},PPARGC1A:{rsid:"rs8192678",analysis:{GG:{impact:"beneficial",description:"Excellent mitochondrial biogenesis",recoveryRecommendation:"Can handle higher training volumes",priority:"low",score:90},GA:{impact:"neutral",description:"Normal energy recovery",recoveryRecommendation:"Standard aerobic conditioning",priority:"low",score:75},AA:{impact:"challenging",description:"Reduced mitochondrial efficiency",recoveryRecommendation:"Limit HIIT; build aerobic base",priority:"medium",score:65},default:{impact:"neutral",description:"Mitochondrial recovery influence possible",recoveryRecommendation:"Focus on zone 2 base and nutrition",priority:"medium",score:70}}},ACTN3:{rsid:"rs1815739",analysis:{RR:{impact:"beneficial",description:"Power fiber bias",recoveryRecommendation:"Strength-focused recovery; shorter inter-set rest",priority:"low",score:85},RX:{impact:"neutral",description:"Mixed fiber profile",recoveryRecommendation:"Mixed training and recovery",priority:"low",score:75},XX:{impact:"beneficial",description:"Endurance fiber bias",recoveryRecommendation:"Aerobic recovery; longer sessions",priority:"low",score:85},default:{impact:"neutral",description:"Fiber-type influence possible",recoveryRecommendation:"Align recovery to training emphasis",priority:"low",score:75}}},NOS3:{rsid:"rs1799983",analysis:{TT:{impact:"beneficial",description:"Good endothelial function",recoveryRecommendation:"Standard cardio recovery",priority:"low",score:85},GT:{impact:"neutral",description:"Normal circulation",recoveryRecommendation:"Standard protocols",priority:"low",score:75},GG:{impact:"challenging",description:"Reduced nitric oxide availability",recoveryRecommendation:"Heat/massage; monitor BP; mobility",priority:"medium",score:65},default:{impact:"neutral",description:"Circulatory recovery influence possible",recoveryRecommendation:"Warm-up/cool-down emphasis; mobility",priority:"medium",score:70}}},TPH2:{rsid:"rs4570625",analysis:{CC:{impact:"beneficial",description:"Stable mood regulation",recoveryRecommendation:"Good psych recovery support",priority:"low",score:85},CT:{impact:"neutral",description:"Typical mood stability",recoveryRecommendation:"Monitor training stress",priority:"low",score:75},TT:{impact:"challenging",description:"Higher mood fluctuation risk",recoveryRecommendation:"Watch overtraining; include mindfulness",priority:"medium",score:65},default:{impact:"neutral",description:"Mood/stress impact possible",recoveryRecommendation:"Mindfulness and adequate recovery windows",priority:"medium",score:70}}},GABRA6:{rsid:"rs3219151",analysis:{GG:{impact:"beneficial",description:"Good sleep quality tendency",recoveryRecommendation:"Maintain sleep hygiene",priority:"low",score:85},GA:{impact:"neutral",description:"Normal sleep patterns",recoveryRecommendation:"Standard sleep hygiene",priority:"low",score:75},AA:{impact:"challenging",description:"Sleep quality challenges",recoveryRecommendation:"Optimize sleep routine; limit caffeine late day",priority:"medium",score:65},default:{impact:"neutral",description:"Sleep regulation influence possible",recoveryRecommendation:"Strengthen sleep routine",priority:"medium",score:70}}},IL6:{rsid:"rs1800795",analysis:{default:{impact:"neutral",description:"Inflammation regulation influence",recoveryRecommendation:"Anti-inflammatory nutrition; sleep priority",priority:"medium",score:70}}},TNF:{rsid:"rs1800629",analysis:{default:{impact:"neutral",description:"Inflammatory signaling influence",recoveryRecommendation:"Omega-3s, polyphenols; manage load spikes",priority:"medium",score:70}}},IL10:{rsid:"rs1800896",analysis:{default:{impact:"beneficial",description:"Anti-inflammatory signaling support",recoveryRecommendation:"Standard recovery; balanced diet",priority:"low",score:80}}},VDR:{rsid:"rs2228570",analysis:{default:{impact:"neutral",description:"Vitamin D signaling influence",recoveryRecommendation:"Monitor vitamin D status; daylight exposure",priority:"medium",score:72}}},ADRB1:{rsid:"rs1801253",analysis:{default:{impact:"neutral",description:"Cardiovascular response influence",recoveryRecommendation:"HR-based load management; aerobic base",priority:"medium",score:70}}},HSD11B1:{rsid:"rs12086634",analysis:{default:{impact:"neutral",description:"Cortisol regeneration influence",recoveryRecommendation:"Stress hygiene; consistent sleep; deloads",priority:"medium",score:68}}},FKBP5:{rsid:"rs1360780",analysis:{default:{impact:"challenging",description:"Stress reactivity influence",recoveryRecommendation:"Parasympathetic work; manage intensity clusters",priority:"medium",score:65}}},"MAO-A":{rsid:"rs6323",analysis:{default:{impact:"neutral",description:"Monoamine turnover influence",recoveryRecommendation:"Consistent routine; limit late stimulants",priority:"medium",score:69}}},SLC6A4:{rsid:"5-HTTLPR",analysis:{default:{impact:"challenging",description:"Serotonin transporter variation",recoveryRecommendation:"Prioritize sleep, sunlight, low cognitive load post-HIIT",priority:"medium",score:64}}},GSK3B:{rsid:"rs334558",analysis:{default:{impact:"neutral",description:"Circadian and neural signaling influence",recoveryRecommendation:"Regular schedule; consistent wind-down",priority:"medium",score:70}}},PER2:{rsid:"rs934945",analysis:{default:{impact:"neutral",description:"Circadian phase regulation influence",recoveryRecommendation:"Morning light exposure; fixed sleep times",priority:"medium",score:70}}}}[R];if(!P)return null;const b=P.analysis[$]||P.analysis.default;return b?{gene:R,genotype:$,rsid:P.rsid,category:"Recovery",impact:b.impact,description:b.description,recoveryRecommendation:b.recoveryRecommendation,priority:b.priority,score:b.score}:null},A=R=>{if(!R)return[];let $=R;if(typeof $=="string")try{$=JSON.parse($)}catch{const W=[];return $.split(/[;,]/).map(P=>P.trim()).filter(Boolean).forEach(P=>{const[b,X]=P.split(/[:=]/).map(O=>O.trim());b&&X&&W.push({gene:b,genotype:X})}),W}if(Array.isArray($)){const W=[];return $.forEach(P=>{if(P&&typeof P=="object"){const b=P.gene||P.Gene||P.rsid||P.RSID||P.Key||P.key||"",X=P.genotype||P.Genotype||P.Value||P.value||"";b&&X&&W.push({gene:String(b),genotype:String(X)})}}),W}return typeof $=="object"&&$!==null?Object.entries($).filter(([W])=>!String(W).startsWith("$")).map(([W,P])=>({gene:String(W),genotype:String(P)})):[]};I.useEffect(()=>{t&&(async()=>{try{i(!0),l(null);const $=parseInt(t,10);if(isNaN($))throw new Error("Invalid athlete ID");const W=await Ke.getGeneticSummaryByAthlete($);s(W)}catch($){l($ instanceof Error?$.message:"Failed to load genetic data")}finally{i(!1)}})()},[t]);const V=I.useMemo(()=>{const R=[];return n.forEach($=>{const W=$.Genes??$.genes??{},P=String($.Category??$.category??"Recovery");A(W).forEach(({gene:X,genotype:O})=>{const f=String(X).toUpperCase();if(!k.includes(f))return;const z=M(f,String(O));if(z){const U=E.find(F=>F.genes.includes(f))?.label||P;R.push({...z,category:U})}})}),R},[n]),w=I.useMemo(()=>{const R=new Map;return V.forEach($=>{const W=R.get($.gene);if(!W){R.set($.gene,$);return}const P=St[$.priority],b=St[W.priority];(P<b||P===b&&$.score<W.score)&&R.set($.gene,$)}),Array.from(R.values())},[V]),C=I.useMemo(()=>w.length===0?0:w.reduce((R,$)=>R+$.score,0)/w.length,[w]),S=I.useMemo(()=>({total:w.length,high:w.filter(R=>R.priority==="high").length,medium:w.filter(R=>R.priority==="medium").length,low:w.filter(R=>R.priority==="low").length}),[w]),T=I.useMemo(()=>{const R=o.trim().toLowerCase();let $=w.filter(W=>{if(R&&!`${W.gene} ${W.genotype} ${W.rsid} ${W.description} ${W.recoveryRecommendation}`.toLowerCase().includes(R)||N&&!(W.priority==="high"||W.priority==="medium"||W.impact==="challenging")||m!=="all"&&W.impact!==m||x!=="all"&&W.priority!==x)return!1;if(u!=="all"){const P=E.find(b=>b.key===u);if(P&&!P.genes.includes(W.gene))return!1}return!0});switch(h){case"score_desc":$=$.sort((W,P)=>P.score-W.score||W.gene.localeCompare(P.gene));break;case"score_asc":$=$.sort((W,P)=>W.score-P.score||W.gene.localeCompare(P.gene));break;case"gene_az":$=$.sort((W,P)=>W.gene.localeCompare(P.gene));break;case"gene_za":$=$.sort((W,P)=>P.gene.localeCompare(W.gene));break;case"relevance":default:$=$.sort((W,P)=>St[W.priority]-St[P.priority]||W.score-P.score||W.gene.localeCompare(P.gene));break}return $},[w,o,m,x,u,h,N]),D=w.filter(R=>R.priority==="high").length,G=w.filter(R=>R.priority==="medium").length,Y=()=>{const R=[["Gene","Genotype","RSID","Impact","Priority","Score","Category","Description","Recommendation"]];T.forEach(X=>{R.push([X.gene,X.genotype,X.rsid,X.impact,X.priority,String(X.score),X.category,X.description,X.recoveryRecommendation.replace(/\n/g," ")])});const $=R.map(X=>X.map(O=>`"${String(O).replace(/"/g,'""')}"`).join(",")).join(`\r
`),W=new Blob([$],{type:"text/csv;charset=utf-8;"}),P=URL.createObjectURL(W),b=document.createElement("a");b.href=P,b.download=`recovery_genes_${t}.csv`,b.click(),URL.revokeObjectURL(P)},q=()=>{c(""),d("all"),g("all"),p("all"),v("relevance"),y(!1)};return r?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Recovery Gene Panel"}),e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading genetic data..."})]})]})}):a?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Recovery Gene Panel"}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-500 mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Genetic Data"}),e.jsx("p",{className:"text-gray-600 mb-4",children:a}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"🧬 Recovery Genetics"}),e.jsx("p",{className:"text-gray-600",children:"Genetic markers impacting recovery, sleep, stress, circulation, and energy systems"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:`text-3xl font-bold ${C>75?"text-green-600":C>60?"text-yellow-600":"text-red-600"}`,children:[C.toFixed(0),"%"]}),e.jsx("div",{className:"text-sm text-gray-600",children:"Overall Recovery Score"})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-3",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx("input",{value:o,onChange:R=>c(R.target.value),placeholder:"Search genes, RSID, recommendation...",className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})}),e.jsx("div",{children:e.jsxs("select",{value:m,onChange:R=>d(R.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Impact: All"}),e.jsx("option",{value:"beneficial",children:"Impact: Beneficial"}),e.jsx("option",{value:"neutral",children:"Impact: Neutral"}),e.jsx("option",{value:"challenging",children:"Impact: Challenging"})]})}),e.jsx("div",{children:e.jsxs("select",{value:x,onChange:R=>g(R.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Priority: All"}),e.jsx("option",{value:"high",children:"Priority: High"}),e.jsx("option",{value:"medium",children:"Priority: Medium"}),e.jsx("option",{value:"low",children:"Priority: Low"})]})}),e.jsx("div",{children:e.jsxs("select",{value:u,onChange:R=>p(R.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[e.jsx("option",{value:"all",children:"Focus: All"}),E.map(R=>e.jsx("option",{value:R.key,children:R.label},R.key))]})}),e.jsx("div",{children:e.jsxs("select",{value:h,onChange:R=>v(R.target.value),className:"w-full border border-gray-300 rounded-md px-3 py-2 text-sm",children:[e.jsx("option",{value:"relevance",children:"Sort: Relevance (Risk first)"}),e.jsx("option",{value:"score_desc",children:"Sort: Score (High → Low)"}),e.jsx("option",{value:"score_asc",children:"Sort: Score (Low → High)"}),e.jsx("option",{value:"gene_az",children:"Sort: Gene (A → Z)"}),e.jsx("option",{value:"gene_za",children:"Sort: Gene (Z → A)"})]})})]}),e.jsxs("div",{className:"mt-3 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("label",{className:"inline-flex items-center gap-2 text-sm text-gray-700",children:[e.jsx("input",{type:"checkbox",checked:N,onChange:R=>y(R.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),"Show only risks (High/Medium/Challenging)"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Showing ",T.length," of ",S.total," genes"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:q,className:"px-3 py-2 text-sm border border-gray-300 rounded-md hover:bg-gray-50",children:"Reset"}),e.jsx("button",{onClick:Y,className:"px-3 py-2 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Export CSV"})]})]})]}),w.length>0&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-2",children:[e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4 text-center",children:"Recovery Priorities"}),e.jsxs("div",{className:"space-y-4",children:[D>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-red-500 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"High Priority"})]}),e.jsx("span",{className:"text-sm font-bold text-red-600",children:D})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"h-3 bg-red-500 rounded-full transition-all duration-500",style:{width:`${D/w.length*100}%`}})})]}),G>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-yellow-500 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Medium Priority"})]}),e.jsx("span",{className:"text-sm font-bold text-yellow-600",children:G})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"h-3 bg-yellow-500 rounded-full transition-all duration-500",style:{width:`${G/w.length*100}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 bg-green-500 rounded"}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Good Profile"})]}),e.jsx("span",{className:"text-sm font-bold text-green-600",children:S.low})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:"h-3 bg-green-500 rounded-full transition-all duration-500",style:{width:`${S.low/w.length*100}%`}})})]})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:w.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Genes"})]})})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4 text-center",children:"Recovery Scores"}),e.jsxs("div",{className:"space-y-3",children:[T.slice(0,6).map((R,$)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 text-xs font-medium text-gray-600 truncate",children:R.gene}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${R.score>75?"bg-green-500":R.score>60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${R.score}%`}})})}),e.jsx("div",{className:"w-8 text-xs font-semibold text-gray-900 text-right",children:R.score})]},`${R.gene}-${$}`)),T.length>6&&e.jsxs("div",{className:"text-xs text-gray-500 text-center mt-2",children:["+",T.length-6," more genes"]})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-4 text-center",children:"Recovery Focus Areas"}),e.jsx("div",{className:"space-y-3",children:E.map(R=>{const $=w.filter(P=>R.genes.includes(P.gene)),W=$.length>0?$.reduce((P,b)=>P+b.score,0)/$.length:0;return e.jsxs("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-lg",children:[R.key==="sleep"&&"😴",R.key==="stress"&&"🧠",R.key==="energy"&&"⚡",R.key==="circulation"&&"❤️",R.key==="inflammation"&&"🔥"]}),e.jsx("span",{className:"text-sm font-medium text-gray-700",children:R.label})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:["(",$.length,")"]}),e.jsx("div",{className:`w-16 h-2 rounded-full ${W>75?"bg-green-500":W>60?"bg-yellow-500":"bg-gray-300"}`,style:{width:W>0?"40px":"0px"}}),e.jsx("span",{className:`text-xs font-semibold ${W>75?"text-green-600":W>60?"text-yellow-600":"text-gray-400"}`,children:W>0?Math.round(W):"-"})]})]},R.key)})})]})]}),w.length>0&&(D>0||G>0)&&e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Priority Recovery Actions"}),e.jsxs("div",{className:"space-y-2",children:[w.filter(R=>R.priority==="high").map(R=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-red-50 rounded",children:[e.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full"}),e.jsxs("span",{className:"text-sm text-red-800",children:[R.gene," (",R.genotype,"): ",R.recoveryRecommendation]})]},`${R.gene}-high`)),w.filter(R=>R.priority==="medium").map(R=>e.jsxs("div",{className:"flex items-center gap-3 p-2 bg-yellow-50 rounded",children:[e.jsx("div",{className:"w-2 h-2 bg-yellow-500 rounded-full"}),e.jsxs("span",{className:"text-sm text-yellow-800",children:[R.gene," (",R.genotype,"): ",R.recoveryRecommendation]})]},`${R.gene}-medium`))]})]}),T.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:T.map((R,$)=>e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-5 hover:shadow-lg transition-all duration-200",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-1",children:R.gene}),e.jsxs("p",{className:"text-xs text-gray-500",children:[R.category," • RSID: ",e.jsx("span",{className:"font-mono",children:R.rsid})]})]}),e.jsx("div",{className:`px-3 py-1 rounded-full text-xs font-semibold ${R.priority==="high"?"bg-red-100 text-red-700 border border-red-200":R.priority==="medium"?"bg-yellow-100 text-yellow-700 border border-yellow-200":"bg-green-100 text-green-700 border border-green-200"}`,children:R.priority==="high"?"⚠️ High Priority":R.priority==="medium"?"⚡ Medium Priority":"✅ Good Profile"})]}),e.jsx("div",{className:"mb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Your Result"}),e.jsx("span",{className:"text-xl font-mono font-bold text-blue-600 bg-blue-50 px-3 py-1 rounded",children:R.genotype})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Recovery Potential"}),e.jsx("span",{className:`text-sm font-bold ${R.score>75?"text-green-600":R.score>60?"text-yellow-600":"text-red-600"}`,children:R.score>75?"Excellent":R.score>60?"Good":"Needs Attention"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:e.jsx("div",{className:`h-3 rounded-full transition-all duration-500 ${R.score>75?"bg-green-500":R.score>60?"bg-yellow-500":"bg-red-500"}`,style:{width:`${R.score}%`}})}),e.jsxs("div",{className:"text-xs text-gray-500 mt-1 text-center",children:["Score: ",R.score,"/100"]})]}),e.jsx("div",{className:"mb-3",children:e.jsx("p",{className:"text-sm text-gray-700",children:R.description})}),e.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg p-3 border border-blue-100",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-blue-500 mt-0.5",children:"💡"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-blue-900 mb-1",children:"Recommendation"}),e.jsx("p",{className:"text-sm text-blue-800 leading-relaxed",children:R.recoveryRecommendation})]})]})})]},`${R.gene}-${$}`))}):e.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-4xl mb-2",children:"🧬"}),e.jsx("p",{className:"text-gray-600",children:"No recovery-related genetic data found"})]})]})},Ln=t=>{const n=t.reduce((i,a)=>i+a,0)/t.length,r=t.map(i=>Math.pow(i-n,2)).reduce((i,a)=>i+a,0)/t.length;return Math.sqrt(r)},mi=(t,n)=>Math.max(0,n-t),ui=(t,n)=>{const s=t.map(l=>{const[o,c]=l.split(":").map(Number);return o*60+c}),r=n.map(l=>{const[o,c]=l.split(":").map(Number);return o*60+c}),i=Ln(s),a=Ln(r);return(i+a)/2},xi=t=>t<=15?"High":t<=45?"Moderate":"Low",hi=t=>t<=15?"#10B981":t<=45?"#F59E0B":"#EF4444",_n=t=>{const n=Math.floor(t/60),s=t%60;return`${n.toString().padStart(2,"0")}:${s.toString().padStart(2,"0")}`},gi=(t,n)=>n>0?t/n*100:0,We=(t,n,s)=>Math.min(s,Math.max(n,t)),Pn=(t,n,s,r,i)=>{const a=We((t||0)/(i||8),0,1),l=We((n||0)/90,0,1),o=We((s||0)/20,0,1),c=We((r||0)/18,0,1),m=a*.35+l*.3+o*.2+c*.15;return Math.round(m*100)},pi=t=>({duration:We((t.sleepDuration||0)/(t.recommendedSleep||8),0,1),efficiency:We((t.sleepEfficiency||0)/90,0,1),deep:We((t.deepSleep||0)/20,0,1),rem:We((t.remSleep||0)/18,0,1)}),fi=(t,n)=>{const[s]=t.split(":").map(Number);return n.split(":").map(Number),s>=23||s>=0&&s<=5?"Evening Type":s>=21&&s<=22?"Intermediate":"Morning Type"},bi=(t,n)=>!0,yi=(t,n,s)=>[{name:"Deep Sleep",value:t},{name:"REM Sleep",value:n},{name:"Light Sleep",value:s}],ji=t=>{const n=[];return t.forEach(s=>{const r=s.sleep_duration_h??0;r>0&&r<6&&n.push("Fragmented Sleep");const i=s.hrv_night??0;i>0&&i<40&&n.push("HRV Suppression"),(s.resting_hr??0)>70&&n.push("Elevated Resting HR");const l=s.deep_sleep_pct??0;l>0&&l<15&&n.push("Low Deep Sleep");const o=s.rem_sleep_pct??0;o>0&&o<15&&n.push("Low REM Sleep")}),n},Ni=({biometricData:t,athleteId:n})=>{const[s,r]=I.useState("30d"),i=s==="7d"?t.slice(-7):t.slice(-30),a=w=>{if(!w||w==="00:00"||w==="")return null;const[C,S]=w.split(":").map(Number);return isNaN(C)||isNaN(S)?null:C*60+S},l=i.map(w=>{const S=w.sleep_duration_h||0,T=mi(S,8),D=S-8,G=a(w.sleep_onset_time||""),Y=a(w.wake_time||"");let q=0;if(G!==null&&Y!==null){let R=Y-G;R<0&&(R+=24*60),q=R/60}else q=S+.5;return{date:w.date,sleepDebt:T,sleepBalance:D,sleepDuration:S,recommendedSleep:8,deepSleep:w.deep_sleep_pct||0,remSleep:w.rem_sleep_pct||0,lightSleep:w.light_sleep_pct||0,sleepEfficiency:S>0&&q>0?gi(S,q):0,timeInBed:q,sleepOnsetTime:w.sleep_onset_time||"00:00",wakeTime:w.wake_time||"00:00",chronotype:w.sleep_onset_time&&w.sleep_onset_time!=="00:00"&&w.wake_time&&w.wake_time!=="00:00"?fi(w.sleep_onset_time,w.wake_time):"Unknown (Missing timing data)",sleepStressIndicators:ji([w])}}),o=i.filter(w=>w.sleep_onset_time&&w.sleep_onset_time!=="00:00"&&w.wake_time&&w.wake_time!=="00:00");let c=0,m="Unknown",d="#9CA3AF";if(o.length>=2){const w=o.map(S=>S.sleep_onset_time),C=o.map(S=>S.wake_time);c=ui(w,C),m=xi(c),d=hi(c)}else m="Insufficient Data";const x=i.length>0?i.reduce((w,C)=>w+(C.deep_sleep_pct||0),0)/i.length:0,g=i.length>0?i.reduce((w,C)=>w+(C.rem_sleep_pct||0),0)/i.length:0,u=i.length>0?i.reduce((w,C)=>w+(C.light_sleep_pct||0),0)/i.length:0,p=yi(x,g,u),h=["#0088FE","#00C49F","#FFBB28"],v=l.map(w=>({date:w.date,sleepDebt:w.sleepDebt})),N=l.map(w=>({date:w.date,sleepDuration:w.sleepDuration,recommendedSleep:w.recommendedSleep})),y=l.map(w=>({date:w.date,sleepEfficiency:w.sleepEfficiency}));l.map(w=>({date:w.date,deepSleep:w.deepSleep,remSleep:w.remSleep,lightSleep:w.lightSleep}));const k=l.map(w=>{const C=Y=>{if(!Y||Y==="00:00"||Y==="")return null;const[q,R]=Y.split(":").map(Number);return isNaN(q)||isNaN(R)?null:q*60+R},S=C(w.sleepOnsetTime),T=C(w.wakeTime),D=S!==null?S:(w.sleepDuration||0)>=8?1320:(w.sleepDuration||0)>=7?1380:1440,G=T!==null?T:D+(w.sleepDuration||0)*60;return{date:w.date,sleepOnset:D,wakeTime:G%1440,hasRealTimingData:S!==null&&T!==null}}),E=l.length>0?l[l.length-1]:null,M=E?Pn(E.sleepDuration,E.sleepEfficiency,E.deepSleep,E.remSleep,E.recommendedSleep):0,A=l.length>0?Math.round(l.reduce((w,C)=>w+Pn(C.sleepDuration,C.sleepEfficiency,C.deepSleep,C.remSleep,C.recommendedSleep),0)/l.length):0,V=E?pi(E):{duration:0,efficiency:0,deep:0,rem:0};return l.reduce((w,C)=>w+(C.sleepDebt||0),0),l.reduce((w,C)=>w+Math.max(0,C.sleepBalance||0),0),l.length>0&&l.reduce((w,C)=>w+(C.sleepEfficiency||0),0)/l.length,l.length>0&&l.reduce((w,C)=>w+(C.sleepDuration||0),0)/l.length,l.filter(w=>(w.sleepDebt||0)>0).length,l.filter(w=>(w.sleepBalance||0)>0).length,i.filter(w=>(w.spo2_night??0)>0&&(w.spo2_night??100)<95).length,e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"🌙 Sleep Metrics"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r("7d"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${s==="7d"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"7 Days"}),e.jsx("button",{onClick:()=>r("30d"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${s==="30d"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"30 Days"})]})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"📊 Sleep Debt"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"relative w-48 h-48 mx-auto",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#e5e7eb",strokeWidth:"8"}),e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:l.length>0?l.reduce((w,C)=>w+C.sleepDebt,0)>3?"#EF4444":l.reduce((w,C)=>w+C.sleepDebt,0)>1.5?"#F59E0B":"#10B981":"#9CA3AF",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:`${Math.min(l.reduce((w,C)=>w+C.sleepDebt,0),16)*10}, 1000`,transform:"rotate(-90 50 50)"}),e.jsx("text",{x:"50",y:"50",textAnchor:"middle",dominantBaseline:"middle",className:"text-2xl font-bold",children:l.length>0?l.reduce((w,C)=>w+C.sleepDebt,0).toFixed(1):"0.0"}),e.jsx("text",{x:"50",y:"60",textAnchor:"middle",dominantBaseline:"middle",className:"text-sm text-gray-600",children:"Hours"})]})})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-gray-900",children:["Cumulative Sleep Debt (",s==="7d"?"7 days":"30 days",")"]}),e.jsxs("p",{className:"text-2xl font-bold mt-1  text-gray-900",children:[l.length>0?l.reduce((w,C)=>w+C.sleepDebt,0).toFixed(1):"0.0"," hours"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:(()=>{const w=l.reduce((C,S)=>C+S.sleepDebt,0);return w>3?"High sleep debt — prioritize earlier bedtime and naps this week":w>1.5?"Moderate sleep debt — aim for +30–60 min earlier bedtime":"Minimal sleep debt — maintain your routine"})()})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Sleep Consistency"}),e.jsxs("p",{className:"text-2xl font-bold mt-1  text-gray-900",children:[c.toFixed(1)," min"]}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Standard deviation of bed/wake times"}),e.jsxs("div",{className:"mt-2",children:[e.jsx("span",{className:"inline-block w-3 h-3 rounded-full mr-2",style:{backgroundColor:d}}),e.jsxs("span",{className:"text-sm font-medium text-black",children:[m," Consistency"]})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Chronotype"}),e.jsx("p",{className:"text-2xl font-bold mt-1 text-black",children:l.length>0?l[l.length-1].chronotype:"Unknown"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:l.length>0&&!l[l.length-1].chronotype.includes("Unknown")&&bi(l[l.length-1].chronotype)?"Within optimal window":l[l.length-1]?.chronotype.includes("Unknown")?"Insufficient timing data":"Outside optimal window"})]})]})})]})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"⭐ Sleep Quality Score"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[e.jsxs("div",{className:"text-center md:w-48",children:[e.jsx("div",{className:"text-5xl font-extrabold text-gray-900",children:M}),e.jsx("div",{className:"text-sm text-gray-600",children:"Last night"}),e.jsxs("div",{className:"mt-1 text-xs text-gray-500",children:["Avg ",A," (",s==="7d"?"7d":"30d",")"]})]}),e.jsxs("div",{className:"flex-1 w-full space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Duration"}),e.jsx("span",{children:E?`${(E.sleepDuration||0).toFixed(1)}h / ${E.recommendedSleep}h`:"—"})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500",style:{width:`${Math.round((V.duration||0)*100)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Efficiency"}),e.jsx("span",{children:E?`${Math.round(E.sleepEfficiency||0)}%`:"—"})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-violet-500",style:{width:`${Math.round((V.efficiency||0)*100)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"Deep"}),e.jsx("span",{children:E?`${(E.deepSleep||0).toFixed(1)}%`:"—"})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-700",style:{width:`${Math.round((V.deep||0)*100)}%`}})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-600 mb-1",children:[e.jsx("span",{children:"REM"}),e.jsx("span",{children:E?`${(E.remSleep||0).toFixed(1)}%`:"—"})]}),e.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500",style:{width:`${Math.round((V.rem||0)*100)}%`}})})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"📈 Sleep Duration Trend"}),e.jsx(ie,{width:"100%",height:300,children:e.jsxs(Me,{data:N,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"date",stroke:"#6b7280"}),e.jsx(Z,{stroke:"#6b7280",tickFormatter:w=>Number(w).toFixed(1)}),e.jsx(ae,{contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px",color:"#1f2937"},formatter:(w,C)=>[`${Number(w).toFixed(1)} h`,C]}),e.jsx(de,{}),e.jsx(J,{type:"monotone",dataKey:"sleepDuration",name:"Actual Sleep (h)",stroke:"#3b82f6",strokeWidth:3,dot:{r:4}}),e.jsx(J,{type:"monotone",dataKey:"recommendedSleep",name:"Recommended (8h)",stroke:"#94a3b8",strokeWidth:2,strokeDasharray:"5 5",dot:!1})]})})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"📉 Sleep Debt Trend"}),e.jsx(ie,{width:"100%",height:300,children:e.jsxs(Hs,{data:v,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"date",stroke:"#6b7280"}),e.jsx(Z,{stroke:"#6b7280",tickFormatter:w=>`${Number(w).toFixed(1)} h`}),e.jsx(ae,{formatter:w=>[`${Number(w).toFixed(1)} hours`,"Sleep Debt"],contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px",color:"#1f2937"}}),e.jsx(de,{}),e.jsx(Te,{dataKey:"sleepDebt",name:"Sleep Debt (hours)",children:v.map((w,C)=>e.jsx(Lt,{fill:w.sleepDebt>0?"#EF4444":"#10B981"},`sd-cell-${C}`))})]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["📊 Sleep Efficiency",l.some(w=>!w.sleepOnsetTime||w.sleepOnsetTime==="00:00"||!w.wakeTime||w.wakeTime==="00:00")&&e.jsx("span",{className:"text-sm font-normal text-gray-600 ml-2",children:"(estimated where timing data unavailable)"})]}),e.jsx(ie,{width:"100%",height:300,children:e.jsxs(Me,{data:y,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"date",stroke:"#6b7280"}),e.jsx(Z,{stroke:"#6b7280",domain:[0,100],tickFormatter:w=>`${Number(w).toFixed(1)}%`}),e.jsx(ae,{formatter:w=>[`${Number(w).toFixed(1)}%`,"Efficiency"],contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px",color:"#1f2937"}}),e.jsx(de,{}),e.jsx(J,{type:"monotone",dataKey:"sleepEfficiency",name:"Efficiency (%)",stroke:"#8b5cf6",strokeWidth:3,dot:{r:4}})]})})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🌙 Sleep Stage Distribution"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[e.jsx("div",{className:"flex-1",children:e.jsx(ie,{width:"100%",height:300,children:e.jsxs(Os,{children:[e.jsx(Gs,{data:p,cx:"50%",cy:"50%",labelLine:!0,outerRadius:80,fill:"#8884d8",dataKey:"value",label:({name:w,percent:C})=>`${w}: ${(C?C*100:0).toFixed(0)}%`,children:p.map((w,C)=>e.jsx(Lt,{fill:h[C%h.length]},`cell-${C}`))}),e.jsx(ae,{formatter:w=>[`${Number(w).toFixed(2)}%`,"Percentage"],contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px",color:"#1f2937"}}),e.jsx(de,{})]})})}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"space-y-3",children:p.map((w,C)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"w-4 h-4 rounded-full mr-3",style:{backgroundColor:h[C%h.length]}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:w.name}),e.jsxs("div",{className:"text-sm text-gray-600",children:[w.value.toFixed(1),"%"]})]})]},w.name))})})]})]})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["⏰ Sleep Timing",k.some(w=>!w.hasRealTimingData)&&e.jsx("span",{className:"text-sm font-normal text-gray-600 ml-2",children:"(estimated times where data unavailable)"})]}),e.jsx(ie,{width:"100%",height:300,children:e.jsxs(Me,{data:k,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"date",stroke:"#6b7280"}),e.jsx(Z,{stroke:"#6b7280",domain:[0,1440],tickFormatter:w=>_n(w)}),e.jsx(ae,{contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px",color:"#1f2937"},formatter:(w,C,S)=>{const T=_n(Number(w)),D=!S.payload.hasRealTimingData;return[`${T}${D?" (estimated)":""}`,C]},labelFormatter:w=>`Date: ${new Date(w).toLocaleDateString()}`}),e.jsx(de,{}),e.jsx(J,{type:"monotone",dataKey:"sleepOnset",name:"Bed Time",stroke:"#10B981",strokeWidth:3,dot:{r:4},activeDot:{r:6}}),e.jsx(J,{type:"monotone",dataKey:"wakeTime",name:"Wake Time",stroke:"#F59E0B",strokeWidth:3,dot:{r:4},activeDot:{r:6}})]})})]}),l.length>0&&(()=>{const w=f=>{const z=new Date(f);return new Date(z.getFullYear(),z.getMonth(),z.getDate(),0,0,0,0)},C=(f,z)=>new Date(f.getTime()+z*6e4),S=(f,z)=>Math.round((f.getTime()-z.getTime())/6e4),T=(f,z)=>({start:Math.max(0,f),end:Math.min(2880,z)}),D=l[l.length-1],G=w(D.date),Y=new Date(G.getTime()-24*60*6e4),q=new Date(Y.getTime()+48*60*6e4),R={light:"#F59E0B",deep:"#1E40AF",rem:"#8B5CF6"},$=f=>{const z=[],U=Math.max(0,Math.round((f.sleepDuration||0)*60));if(U<=0)return z;const F=a(f.sleepOnsetTime||""),_=a(f.wakeTime||""),K=w(f.date);let ne,Q;if(F!==null&&_!==null)_-F<0?(ne=C(new Date(K.getTime()-24*60*6e4),F),Q=C(K,_)):(ne=C(K,F),Q=C(K,_));else if(F!==null){const be=F>=720;ne=C(be?new Date(K.getTime()-24*60*6e4):K,F),Q=C(ne,U)}else _!==null?(Q=C(K,_),ne=C(Q,-U)):(ne=C(new Date(K.getTime()-24*60*6e4),1320),Q=C(ne,U));const he=Math.round(U*((f.deepSleep||0)/100)),Fe=Math.round(U*((f.remSleep||0)/100)),Je=Math.max(0,U-he-Fe),$t=[{type:"light",minutes:Math.floor(Je*.6),label:"Light Sleep"},{type:"deep",minutes:he,label:"Deep Sleep"},{type:"light",minutes:Math.floor(Je*.4),label:"Light Sleep"},{type:"rem",minutes:Fe,label:"REM Sleep"}].filter(be=>be.minutes>0);let Re=new Date(ne),Be=1;const Ue=10;for(const be of $t){const kt=Math.floor(be.minutes/Ue),et=be.minutes%Ue;for(let tt=0;tt<kt;tt++){const dt=S(Re,Y)*1+0,qe=S(C(Re,Ue),Y),{start:Ie,end:mt}=T(dt,qe);mt>Ie&&z.push({type:be.type,startAbs:Ie,endAbs:mt,duration:mt-Ie,label:be.label,color:R[be.type],segment:`${Be}`}),Re=C(Re,Ue),Be++}if(et>0){const tt=S(Re,Y),dt=S(C(Re,et),Y),{start:qe,end:Ie}=T(tt,dt);Ie>qe&&z.push({type:be.type,startAbs:qe,endAbs:Ie,duration:Ie-qe,label:be.label,color:R[be.type],segment:`${Be} (Partial)`}),Re=C(Re,et),Be++}}return z},W=[];for(const f of l){const z=w(f.date);if(z>new Date(q.getTime()+24*60*6e4)||new Date(z.getTime()+24*60*6e4)<new Date(Y.getTime()-24*60*6e4))continue;const U=$(f);W.push(...U)}const P=W.reduce((f,z)=>f+z.duration,0),b=W.filter(f=>f.type==="deep").reduce((f,z)=>f+z.duration,0),X=W.filter(f=>f.type==="light").reduce((f,z)=>f+z.duration,0),O=W.filter(f=>f.type==="rem").reduce((f,z)=>f+z.duration,0);return e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["48‑Hour Sleep Timeline",e.jsx("span",{className:"text-sm font-normal text-gray-600 ml-2",children:"(all sleep episodes within the 48‑hour window)"})]}),e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-blue-800"}),e.jsxs("span",{className:"text-black",children:["Deep Sleep: ",P?(b/P*100).toFixed(1):"0.0","%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-yellow-500"}),e.jsxs("span",{className:"text-black",children:["Light Sleep: ",P?(X/P*100).toFixed(1):"0.0","%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-purple-500"}),e.jsxs("span",{className:"text-black",children:["REM Sleep: ",P?(O/P*100).toFixed(1):"0.0","%"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-gray-400"}),e.jsxs("span",{className:"text-black",children:["Total Sleep: ",(P/60).toFixed(1),"h within window"]})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500 mb-2",children:[e.jsx("span",{children:"Day 1 - 12:00 AM"}),e.jsx("span",{children:"Day 1 - 12:00 PM"}),e.jsx("span",{children:"Day 2 - 12:00 AM"}),e.jsx("span",{children:"Day 2 - 12:00 PM"}),e.jsx("span",{children:"Day 3 - 12:00 AM"})]}),e.jsxs("div",{className:"relative h-24 bg-gray-100 rounded-lg overflow-hidden",children:[Array.from({length:9},(f,z)=>z*6).map(f=>e.jsx("div",{className:"absolute top-0 bottom-0 border-l border-gray-300",style:{left:`${f/48*100}%`}},f)),W.map((f,z)=>{const U=f.startAbs/2880*100,F=(f.endAbs-f.startAbs)/(48*60)*100;return e.jsx("div",{className:"absolute top-0 bottom-0 flex items-center justify-center text-xs font-medium text-white shadow-sm hover:shadow-md transition-shadow",style:{left:`${U}%`,width:`${Math.max(F,.5)}%`,backgroundColor:f.color,minWidth:"1px"},title:`${f.label} (${f.segment}) • ${f.duration} min`},z)})]}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-400 mt-1",children:[e.jsx("span",{children:"0h"}),e.jsx("span",{children:"12h"}),e.jsx("span",{children:"24h"}),e.jsx("span",{children:"36h"}),e.jsx("span",{children:"48h"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"Sleep Stage Segments (10-minute intervals)"}),e.jsx("div",{className:"space-y-2 max-h-64 overflow-y-auto",children:W.map((f,z)=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded-lg border bg-gray-50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:f.color}}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-gray-900 text-sm",children:f.label}),e.jsxs("div",{className:"text-xs text-gray-600",children:["Segment ",f.segment," • Offset ",f.startAbs,"–",f.endAbs," min (within window)"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-bold text-gray-900 text-sm",children:[f.duration," min"]}),e.jsxs("div",{className:"text-xs text-gray-600",children:[P?(f.duration/P*100).toFixed(1):"0.0","% of 48h-sleep"]})]})]},z))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-3",children:"48‑Hour Sleep Context Analysis"}),e.jsxs("div",{className:"space-y-3 text-sm",children:[e.jsxs("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"font-medium text-blue-800 mb-1",children:"48‑Hour Timeline View"}),e.jsx("div",{className:"text-blue-700",children:"All sleep episodes over the last 48 hours are visualized by stage and timing relative to the window."})]}),e.jsxs("div",{className:"p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("div",{className:"font-medium text-purple-800 mb-1",children:"10‑Minute Segment Tracking"}),e.jsx("div",{className:"text-purple-700",children:"Sleep is broken into 10‑minute segments allocated by recorded stage percentages for finer pattern analysis."})]}),e.jsxs("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"font-medium text-green-800 mb-1",children:"Stage Distribution (window‑weighted)"}),e.jsxs("div",{className:"text-green-700",children:["Deep: ",P?(b/P*100).toFixed(1):"0.0","% • REM: ",P?(O/P*100).toFixed(1):"0.0","% • Light: ",P?(X/P*100).toFixed(1):"0.0","%"]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg border border-gray-200",children:[e.jsx("div",{className:"font-medium text-gray-800 mb-1",children:"Timeline Context"}),e.jsx("div",{className:"text-gray-700 text-xs",children:"Window spans 48 hours starting from midnight of the day before the latest record. Any sleep overlapping this window is shown and clipped to the window bounds."})]})]})]})]})]})]})})(),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"⚠️ High Sleep Stress Indicators"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:l.length>0&&l[l.length-1].sleepStressIndicators.length>0?l[l.length-1].sleepStressIndicators.map((w,C)=>e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx("span",{className:"text-red-600",children:"⚠️"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h4",{className:"text-sm font-medium text-red-800",children:w}),e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[w==="Fragmented Sleep"&&"Frequent wake-ups during the night",w==="HRV Suppression"&&"Low HRV during sleep indicates stress",w==="Elevated Resting HR"&&"High resting heart rate at night",w==="Low Deep Sleep"&&"Insufficient deep sleep for recovery",w==="Low REM Sleep"&&"Insufficient REM sleep for cognitive recovery"]})]})]})},C)):e.jsxs("div",{className:"col-span-3 text-center py-8 text-gray-600",children:[e.jsx("p",{children:"No sleep stress indicators detected"}),e.jsx("p",{className:"text-sm mt-2",children:"Great job maintaining healthy sleep patterns!"})]})})]})]})};function vi(t){return t<55?{status:"Optimal",color:"text-green-500",message:"Excellent cardiovascular fitness"}:t<65?{status:"Good",color:"text-green-500",message:"Healthy resting heart rate"}:t<75?{status:"Elevated",color:"text-yellow-500",message:"Slightly elevated, monitor trends"}:{status:"High",color:"text-red-500",message:"Significantly elevated, potential stress/fatigue"}}function wi(t,n){const s=n<25?60:n<35?55:50;return t>s+10?{status:"Excellent",color:"text-green-500",message:"Strong parasympathetic activity"}:t>s?{status:"Good",color:"text-green-500",message:"Healthy HRV levels"}:t>s-10?{status:"Moderate",color:"text-yellow-500",message:"Moderately reduced HRV, monitor trends"}:{status:"Low",color:"text-red-500",message:"Reduced HRV, potential stress/fatigue"}}function st(t,n,s){const r=Math.max(0,Math.min(1,(t-40)/60)),i=s<25?60:s<35?55:50,a=Math.max(0,Math.min(1,n/(i*1.5)));return(r*.6+(1-a)*.4)*100}function En(t){return t<30?{level:"Low",color:"text-green-500",bgColor:"bg-green-500",message:"Low stress levels, good recovery"}:t<60?{level:"Moderate",color:"text-yellow-500",bgColor:"bg-yellow-500",message:"Moderate stress, monitor recovery"}:{level:"High",color:"text-red-500",bgColor:"bg-red-500",message:"High stress levels, prioritize recovery"}}function ki(t,n=7){if(t.length<n*2)return{acuteStress:0,chronicStress:0,stressBalance:0};const s=t.slice(-n),r=s.reduce((x,g)=>x+g.resting_hr,0)/s.length,i=s.reduce((x,g)=>x+g.hrv_night,0)/s.length,a=r/70*50+(1-i/60)*50,l=t.slice(-(n*2),-n),o=l.reduce((x,g)=>x+g.resting_hr,0)/l.length,c=l.reduce((x,g)=>x+g.hrv_night,0)/l.length,m=o/70*50+(1-c/60)*50,d=m-a;return{acuteStress:a,chronicStress:m,stressBalance:d}}function Si(t,n,s,r,i){if(t.length<3)return 50;const a=Math.max(0,100-Math.abs(n)*10),l=Math.max(0,Math.min(100,50+s*2)),o=Math.max(0,100-(r-50)*2),c=i>85?100-(i-85)*2:i<40?100-(40-i)*1.5:100;return a*.25+l*.25+o*.25+c*.25}function In(t,n=7){if(t.length<n)return 0;const s=t.slice(-n),r=t.slice(-(n*2),-n);if(s.length===0||r.length===0)return 0;const i=s.reduce((l,o)=>l+o.hrv_night,0)/s.length,a=r.reduce((l,o)=>l+o.hrv_night,0)/r.length;return i-a}const Ai=({athleteId:t,biometricData:n})=>{const[s,r]=I.useState("7d"),[i,a]=I.useState("24h"),[l,o]=I.useState(void 0),[c,m]=I.useState(!0),[d,x]=I.useState(null);I.useEffect(()=>{t&&(async()=>{try{m(!0),x(null);const f=typeof t=="string"?parseInt(t,10):t,z=await Nt.getAthleteData(f);o(z.athlete),!n.length&&z.biometricData.length}catch{x("Failed to load athlete data")}finally{m(!1)}})()},[t,n.length]);const g=l?.age||25,u=I.useMemo(()=>n.slice(-7).reduce((f,z)=>{const U=z.sleep_duration_h??0;return f+Math.max(0,8-U)},0),[n]),p=s==="7d"?7:30,h=I.useMemo(()=>n.slice(-p),[n,p]),v=I.useMemo(()=>h.filter(O=>{const f=O.resting_hr??0,z=O.hrv_night??0;return f<=0||z<=0?!1:st(f,z,g)>=60}).length,[h,g]),N=I.useMemo(()=>{if(h.length===0)return 0;const O=h.map(f=>f.resting_hr??0).filter(f=>f>0);return O.length?O.reduce((f,z)=>f+z,0)/O.length:0},[h]),y=I.useMemo(()=>{if(h.length===0)return 0;const O=h.map(f=>f.hrv_night??0).filter(f=>f>0);return O.length?O.reduce((f,z)=>f+z,0)/O.length:0},[h]),k=I.useMemo(()=>{if(h.length===0)return 0;const O=h.map(f=>f.sleep_duration_h??0).filter(f=>f>0);return O.length?O.reduce((f,z)=>f+z,0)/O.length:0},[h]),E=I.useMemo(()=>h.reduce((O,f)=>O+Math.max(0,8-(f.sleep_duration_h??0)),0),[h]),M=I.useMemo(()=>{if(!n||n.length===0)return[];const O=s==="7d"?7:30;return n.slice(-O).map(z=>{const U=st(z.resting_hr??0,z.hrv_night??0,g),F=En(U).level,_=In(n,7),K=Si(n,u,_,z.resting_hr??0,z.training_load_pct??0);return{date:z.date,restingHR:z.resting_hr??0,hrv:z.hrv_night??0,strainIndex:U,stressLevel:F,recoveryReadiness:K,trainingLoad:z.training_load_pct??0}})},[n,s,g]),A=M.length>0?M[M.length-1]:null,V=A?vi(A.restingHR):null,w=A?wi(A.hrv,g):null,C=A?A.strainIndex:0,S=A?En(C):null,T=ki(n,7),D=In(n,7),G=Dr.useMemo(()=>S?S.level==="Low"?"#10B981":S.level==="Moderate"?"#F59E0B":"#EF4444":"#9CA3AF",[S]),Y=I.useMemo(()=>A?st(A.restingHR,A.hrv,g):0,[A,g]),q=I.useMemo(()=>{if(M.length<2)return 0;const O=M[M.length-2];return st(O.restingHR,O.hrv,g)},[M,g]),R=Y-q,$=R>=0?`↑ ${R.toFixed(1)}`:`↓ ${Math.abs(R).toFixed(1)}`,W=I.useMemo(()=>{if(n.length===0)return[];if(i==="24h"){const O=n.slice(-24);return O.map((f,z)=>{const U=st(f.resting_hr??0,f.hrv_night??0,g),F=O.length-1-z;return{time:F===0?"Now":`${F}h ago`,heartRate:f.resting_hr??0,stressLevel:U}})}else{const O={};return n.forEach(z=>{const U=z.date;O[U]||(O[U]=[]),O[U].push(z)}),Object.keys(O).sort().slice(-7).map(z=>{const U=O[z],F=U.reduce((he,Fe)=>he+(Fe.resting_hr??0),0)/U.length,_=U.reduce((he,Fe)=>he+(Fe.hrv_night??0),0)/U.length,K=st(F,_,g);return{time:new Date(z).toLocaleDateString("en-US",{weekday:"short"}),heartRate:Math.round(F),stressLevel:K}})}},[n,i,g]),P=I.useMemo(()=>n.length===0?[{id:5,name:"ZONE 5",range:"90–100%",percentage:0,duration:"0:00:00",color:"#EF4444",bgColor:"bg-red-500"},{id:4,name:"ZONE 4",range:"80–90%",percentage:0,duration:"0:00:00",color:"#F97316",bgColor:"bg-orange-500"},{id:3,name:"ZONE 3",range:"70–80%",percentage:0,duration:"0:00:00",color:"#EAB308",bgColor:"bg-yellow-500"},{id:2,name:"ZONE 2",range:"50–70%",percentage:0,duration:"0:00:00",color:"#22C55E",bgColor:"bg-green-500"},{id:1,name:"ZONE 1",range:"0–50%",percentage:0,duration:"0:00:00",color:"#3B82F6",bgColor:"bg-blue-500"}]:[{id:5,name:"ZONE 5",range:"90–100%",percentage:10,duration:"0:15:22",color:"#EF4444",bgColor:"bg-red-500"},{id:4,name:"ZONE 4",range:"80–90%",percentage:20,duration:"0:30:45",color:"#F97316",bgColor:"bg-orange-500"},{id:3,name:"ZONE 3",range:"70–80%",percentage:30,duration:"0:45:10",color:"#EAB308",bgColor:"bg-yellow-500"},{id:2,name:"ZONE 2",range:"50–70%",percentage:25,duration:"0:37:33",color:"#22C55E",bgColor:"bg-green-500"},{id:1,name:"ZONE 1",range:"0–50%",percentage:15,duration:"0:22:10",color:"#3B82F6",bgColor:"bg-blue-500"}],[n]),b=O=>new Date(O).toLocaleDateString("en-US",{month:"short",day:"numeric"}),X=O=>O;return c?e.jsx("div",{className:"space-y-8",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{className:"text-white",children:"Loading athlete data..."})]})})}):d?e.jsx("div",{className:"space-y-8",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-red-500 text-4xl mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Failed to Load Athlete Data"}),e.jsx("p",{className:"text-gray-300 mb-4",children:d}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700 transition-colors",children:"Retry"})]})})}):l?e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"🧘 Stress Management"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>r("7d"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${s==="7d"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"7 Days"}),e.jsx("button",{onClick:()=>r("30d"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${s==="30d"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"30 Days"})]})]}),e.jsx("div",{className:"card-enhanced p-6",children:e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`text-6xl font-bold mb-2 ${S?.level==="High"?"text-red-500":S?.level==="Moderate"?"text-yellow-500":S?.level==="Low"?"text-green-500":"text-gray-500"}`,children:Y.toFixed(1)}),e.jsx("div",{className:"text-lg text-gray-300 mb-1",children:"STRESS SCORE"}),e.jsxs("div",{className:`text-sm font-medium ${R>=0?"text-red-400":"text-green-400"}`,children:[$," from previous"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg",children:[e.jsxs("div",{className:"text-xs uppercase tracking-wide text-gray-500",children:["Cumulative Sleep Debt (",s==="7d"?"7d":"30d",")"]}),e.jsxs("div",{className:"mt-1 text-3xl font-bold text-gray-900",children:[E.toFixed(1),"h"]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Avg Sleep: ",k.toFixed(1),"h"]})]}),e.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-500",children:"HRV Trend (7d)"}),e.jsxs("div",{className:"mt-1 text-3xl font-bold text-gray-900",children:[D>0?"+":"",D.toFixed(1)," ms"]}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Avg HRV: ",y.toFixed(0)," ms"]})]}),e.jsxs("div",{className:"bg-gray-50 p-5 rounded-lg",children:[e.jsx("div",{className:"text-xs uppercase tracking-wide text-gray-500",children:"Stress Days"}),e.jsx("div",{className:"mt-1 text-3xl font-bold text-gray-900",children:v}),e.jsxs("div",{className:"text-sm text-gray-600 mt-1",children:["Avg RHR: ",N.toFixed(0)," bpm"]})]})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Stress Level Indicator"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[e.jsx("div",{className:"flex-1 flex justify-center",children:e.jsxs("div",{className:"relative w-48 h-48",children:[e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-gray-200"}),e.jsx("div",{className:"absolute inset-0 rounded-full border-8 border-transparent",style:{borderTopColor:G,borderRightColor:G,transform:"rotate(45deg)",clipPath:`inset(0 ${100-Math.min(100,Math.max(0,C))}% 0 0)`}}),e.jsx("div",{className:"absolute inset-8 rounded-full bg-white flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-3xl font-bold ${S?.color||"text-gray-500"}`,children:C?Math.round(C):"--"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Stress Index"})]})})]})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Current Stress Level"}),e.jsx("p",{className:`text-2xl font-bold mt-1 ${S?.color||"text-gray-500"}`,children:S?.level||"Unknown"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:S?.message||"No data available"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Resting Heart Rate"}),e.jsx("p",{className:`text-2xl font-bold mt-1 ${V?.color||"text-gray-500"}`,children:A?`${A.restingHR} bpm`:"--"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:V?.message||"No data available"})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Heart Rate Variability"}),e.jsx("p",{className:`text-2xl font-bold mt-1 ${w?.color||"text-gray-500"}`,children:A?`${A.hrv} ms`:"--"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:w?.message||"No data available"})]})]})})]})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:i==="24h"?"HEART RATE TODAY":"HEART RATE THIS WEEK"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Monitor your heart rate patterns throughout the day to understand stress and recovery."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>a("24h"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i==="24h"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"24 Hours"}),e.jsx("button",{onClick:()=>a("7d"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${i==="7d"?"bg-blue-600 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"7 Days"})]})]}),e.jsx("div",{className:"h-64",children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(Ir,{data:W,margin:{top:5,right:20,left:10,bottom:5},children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(oe,{dataKey:"time",stroke:"#9CA3AF",tickFormatter:X}),e.jsx(Z,{yAxisId:"left",stroke:"#9CA3AF",domain:[40,180]}),e.jsx(Z,{yAxisId:"right",orientation:"right",stroke:"#9CA3AF",domain:[0,100]}),e.jsx(ae,{contentStyle:{backgroundColor:"#1F2937",borderColor:"#374151",borderRadius:"0.5rem",color:"#F9FAFB"},formatter:(O,f)=>f==="heartRate"?[`${O} bpm`,"Heart Rate"]:f==="stressLevel"?[`${Number(O).toFixed(1)}`,"Stress Level"]:[O,f]}),e.jsx(Or,{yAxisId:"left",type:"monotone",dataKey:"heartRate",name:"Heart Rate",stroke:"#3B82F6",fill:"url(#colorHeartRate)",strokeWidth:2}),e.jsx(J,{yAxisId:"right",type:"monotone",dataKey:"stressLevel",name:"Stress Level",stroke:"#F59E0B",strokeWidth:2}),e.jsx("defs",{children:e.jsxs("linearGradient",{id:"colorHeartRate",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.8}),e.jsx("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:.1})]})})]})})}),e.jsx("div",{className:"mt-4 text-sm text-gray-400",children:e.jsx("p",{children:"Heart rate range: 100–175 bpm"})})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"STRESS ZONES"}),e.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Distribution of time spent in different heart rate zones indicates training intensity and stress levels."})]}),e.jsx("div",{className:"space-y-4",children:P.map(O=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx("span",{className:"font-medium text-gray-900 mr-2",children:O.name}),e.jsxs("span",{className:"text-gray-400",children:["(",O.range,")"]})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsxs("span",{className:"text-gray-900",children:[O.percentage,"%"]}),e.jsx("span",{className:"text-gray-400",children:O.duration})]})]}),e.jsx("div",{className:"w-full bg-gray-700 rounded-full h-2.5",children:e.jsx("div",{className:"h-2.5 rounded-full",style:{width:`${O.percentage}%`,backgroundColor:O.color}})})]},O.id))})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"HRV Trend (7/30 Days)"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Heart Rate Variability (HRV) is a key indicator of stress and recovery. Higher HRV values indicate better recovery and parasympathetic nervous system activity."}),e.jsx("div",{className:"h-80",children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(Me,{data:M,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"date",tickFormatter:b,stroke:"#6b7280"}),e.jsx(Z,{stroke:"#6b7280"}),e.jsx(ae,{contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px",color:"#1f2937"},formatter:(O,f)=>f==="hrv"?[`${typeof O=="number"?Math.round(O):O} ms`,"HRV"]:f==="restingHR"?[`${typeof O=="number"?Math.round(O):O} bpm`,"Resting HR"]:[typeof O=="number"?Math.round(O):O,f],labelFormatter:O=>`Date: ${new Date(O).toLocaleDateString()}`}),e.jsx(de,{}),e.jsx(J,{type:"monotone",dataKey:"hrv",name:"HRV (ms)",stroke:"#10B981",strokeWidth:3,dot:{r:4},activeDot:{r:6}}),e.jsx(J,{type:"monotone",dataKey:"restingHR",name:"Resting HR (bpm)",stroke:"#EF4444",strokeWidth:3,dot:{r:4},activeDot:{r:6}}),e.jsx(pe,{y:D>0?Math.min(...M.map(O=>O.hrv)):Math.max(...M.map(O=>O.hrv)),stroke:D>0?"#10B981":"#EF4444",strokeDasharray:"3 3"})]})})}),e.jsx("div",{className:"mt-4 text-sm text-gray-600",children:e.jsxs("p",{children:["HRV Trend (7 days):",e.jsxs("span",{className:D>0?"text-green-600 font-medium":D<0?"text-red-600 font-medium":"text-gray-600",children:[" ",D>0?"+":"",D.toFixed(1)," ms"]})," ","| Daily Stress Load:",e.jsxs("span",{className:T.stressBalance>0?"text-green-600 font-medium":T.stressBalance<0?"text-red-600 font-medium":"text-gray-600",children:[" ",T.stressBalance>0?"+":"",Math.round(T.stressBalance)]})]})})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Training Load vs Recovery Readiness"}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"This chart shows the relationship between training load and recovery readiness. Optimal performance occurs when training load and recovery are balanced."}),e.jsx("div",{className:"h-80",children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(Hs,{data:M,margin:{top:20,right:30,left:20,bottom:5},children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"date",tickFormatter:b,stroke:"#6b7280"}),e.jsx(Z,{yAxisId:"left",orientation:"left",stroke:"#6b7280"}),e.jsx(Z,{yAxisId:"right",orientation:"right",stroke:"#6b7280"}),e.jsx(ae,{contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px",color:"#1f2937"},formatter:(O,f)=>f==="trainingLoad"?[`${typeof O=="number"?Math.round(O):O}%`,"Training Load"]:f==="recoveryReadiness"?[`${typeof O=="number"?Math.round(O):O}%`,"Recovery Readiness"]:[typeof O=="number"?Math.round(O):O,f]}),e.jsx(de,{}),e.jsx(Te,{yAxisId:"left",dataKey:"trainingLoad",name:"Training Load (%)",fill:"#3B82F6",radius:[4,4,0,0]}),e.jsx(J,{yAxisId:"right",type:"monotone",dataKey:"recoveryReadiness",name:"Recovery Readiness (%)",stroke:"#10B981",strokeWidth:3,dot:{r:4},activeDot:{r:6}})]})})}),e.jsx("div",{className:"mt-4 text-sm text-gray-600",children:e.jsxs("p",{children:["Recovery Readiness:",e.jsxs("span",{className:A?.recoveryReadiness&&A.recoveryReadiness>70?"text-green-600 font-medium":A?.recoveryReadiness&&A.recoveryReadiness>40?"text-yellow-600 font-medium":"text-red-600 font-medium",children:[" ",A?.recoveryReadiness?Math.round(A.recoveryReadiness):"--","%"]})," ","| Chronic Stress:",e.jsxs("span",{className:T.chronicStress<40?"text-green-600 font-medium":T.chronicStress<60?"text-yellow-600 font-medium":"text-red-600 font-medium",children:[" ",Math.round(T.chronicStress)]})]})})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Stress Insights"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100",children:[e.jsx("h4",{className:"font-medium text-blue-800",children:"Acute Stress Load"}),e.jsx("p",{className:"text-2xl font-bold mt-1 text-blue-600",children:Math.round(T.acuteStress)}),e.jsx("p",{className:"text-sm text-blue-600 mt-1",children:"Last 7 days average"})]}),e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100",children:[e.jsx("h4",{className:"font-medium text-purple-800",children:"Chronic Stress Load"}),e.jsx("p",{className:"text-2xl font-bold mt-1 text-purple-600",children:Math.round(T.chronicStress)}),e.jsx("p",{className:"text-sm text-purple-600 mt-1",children:"Previous 7 days average"})]}),e.jsxs("div",{className:`${T.stressBalance>0?"bg-green-50 border-green-100":T.stressBalance<0?"bg-red-50 border-red-100":"bg-gray-50 border-gray-100"} p-4 rounded-lg border`,children:[e.jsx("h4",{className:`font-medium ${T.stressBalance>0?"text-green-800":T.stressBalance<0?"text-red-800":"text-gray-800"}`,children:"Stress Balance"}),e.jsxs("p",{className:`text-2xl font-bold mt-1 ${T.stressBalance>0?"text-green-600":T.stressBalance<0?"text-red-600":"text-gray-600"}`,children:[T.stressBalance>0?"+":"",Math.round(T.stressBalance)]}),e.jsx("p",{className:"text-sm mt-1",style:{color:T.stressBalance>0?"#059669":T.stressBalance<0?"#DC2626":"#6B7280"},children:T.stressBalance>0?"Improving trend":T.stressBalance<0?"Worsening trend":"Stable"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Stress Management Recommendations"}),e.jsxs("ul",{className:"list-disc pl-5 space-y-1 text-sm text-gray-600",children:[S?.level==="High"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Prioritize sleep hygiene and aim for 7-9 hours of quality sleep"}),e.jsx("li",{children:"Consider active recovery or rest days to allow stress markers to normalize"}),e.jsx("li",{children:"Practice stress-reduction techniques like meditation or breathing exercises"})]}),S?.level==="Moderate"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"Maintain consistent sleep schedule and monitor sleep quality"}),e.jsx("li",{children:"Balance training load with adequate recovery periods"}),e.jsx("li",{children:"Stay hydrated and maintain proper nutrition to support recovery"})]}),S?.level==="Low"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"You're in a good recovery state - maintain current healthy habits"}),e.jsx("li",{children:"Continue monitoring trends to prevent stress accumulation"}),e.jsx("li",{children:"Optimize training timing for peak performance windows"})]}),!S&&e.jsx("li",{children:"Insufficient data to provide specific recommendations. Continue monitoring metrics."})]})]})]})]}):e.jsx("div",{className:"space-y-8",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-gray-400 text-4xl mb-4",children:"👤"}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:"Athlete Not Found"}),e.jsx("p",{className:"text-gray-300",children:"No athlete data available for the selected athlete."})]})})})},$s=({athleteId:t})=>{const[n,s]=I.useState([]),[r,i]=I.useState(!0),[a,l]=I.useState(null);I.useEffect(()=>{(async()=>{try{i(!0),l(null);const d=typeof t=="string"?parseInt(t,10):t,x=await Nt.getAthleteData(d,!0);if(!x.bloodResults||x.bloodResults.length===0){s([]);return}const g=x.bloodResults.filter(p=>p.cortisol_nmol_l!==void 0&&p.cortisol_nmol_l!==null&&p.testosterone!==void 0&&p.testosterone!==null&&p.date);if(g.length===0){s([]);return}const u=g.map(p=>{const h=new Date(p.date),v=h.getTime(),N=p.testosterone,y=Math.min(...g.map(M=>M.testosterone)),k=Math.max(...g.map(M=>M.testosterone)),E=20+(N-y)/(k-y)*80;return{date:v,dateString:h.toLocaleDateString(),cortisol:p.cortisol_nmol_l,testosterone:N,size:E}});u.sort((p,h)=>p.date-h.date),s(u)}catch{l("Failed to load hormone balance data. Please try again.")}finally{i(!1)}})()},[t]);const o=({active:m,payload:d})=>{if(m&&d&&d.length){const x=d[0].payload;return e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-3 shadow-lg",children:[e.jsx("p",{className:"text-white font-medium",children:`Date: ${x.dateString}`}),e.jsx("p",{className:"text-blue-400",children:`Cortisol: ${x.cortisol.toFixed(1)} nmol/L`}),e.jsx("p",{className:"text-green-400",children:`Testosterone: ${x.testosterone.toFixed(1)} nmol/L`})]})}return null},c=m=>m<8.4?"#ef4444":m>28.7?"#10b981":"#3b82f6";return r?e.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl border border-slate-700/50 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"Loading hormone balance data..."})]})}):a?e.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl border border-slate-700/50 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(lt,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-400 font-medium text-lg",children:"Error loading hormone balance data"}),e.jsx("p",{className:"text-gray-400 mt-2",children:a})]})}):n.length===0?e.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl border border-slate-700/50 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx($e,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 font-medium text-lg",children:"No hormone balance data available"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Hormone balance data requires blood test results with both cortisol and testosterone measurements."})]})}):n.length<2?e.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl border border-slate-700/50 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx($e,{className:"w-16 h-16 text-yellow-500 mx-auto mb-4"}),e.jsx("p",{className:"text-yellow-400 font-medium text-lg",children:"Insufficient data for hormone balance chart"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"At least 2 data points with both cortisol and testosterone measurements are required."})]})}):e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl border border-slate-700/50 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Hormone Balance Chart"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Cortisol vs Testosterone levels over time. Bubble size represents testosterone concentration."}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{children:"Low Testosterone (< 8.4 nmol/L)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Normal Testosterone"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{children:"High Testosterone (> 28.7 nmol/L)"})]})]})]}),e.jsx("div",{className:"h-96",children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(mn,{data:n,margin:{top:20,right:20,bottom:20,left:20},children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(oe,{type:"number",dataKey:"date",domain:["dataMin","dataMax"],tickFormatter:m=>new Date(m).toLocaleDateString(),stroke:"#9ca3af"}),e.jsx(Z,{type:"number",dataKey:"cortisol",domain:["dataMin - 10","dataMax + 10"],label:{value:"Cortisol (nmol/L)",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fill:"#9ca3af"}},stroke:"#9ca3af"}),e.jsx(ae,{content:e.jsx(o,{})}),e.jsx(un,{dataKey:"cortisol",fill:"#8884d8",children:n.map((m,d)=>e.jsx(Lt,{fill:c(m.testosterone),r:m.size/10},`cell-${d}`))})]})})}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500",children:[n.length," data point",n.length!==1?"s":""," • Last updated: ",n[n.length-1]?.dateString]})]})},Mi=({athleteId:t})=>{const[n,s]=I.useState([]),[r,i]=I.useState(!0),[a,l]=I.useState(null);I.useEffect(()=>{(async()=>{try{i(!0),l(null);const m=typeof t=="string"?parseInt(t,10):t,d=await Nt.getAthleteData(m,!0);if(!d.bloodResults||d.bloodResults.length===0){s([]);return}const x=d.bloodResults.filter(u=>u.fasting_glucose!==void 0&&u.fasting_glucose!==null||u.hba1c!==void 0&&u.hba1c!==null||u.estimated_average_glucose!==void 0&&u.estimated_average_glucose!==null);if(x.length===0){s([]);return}const g=x.filter(u=>u.date).map(u=>{const p=new Date(u.date);return{date:p.getTime(),dateString:p.toLocaleDateString(),glucose:u.fasting_glucose||0,hba1c:u.hba1c||0,estimatedGlucose:u.estimated_average_glucose}});g.sort((u,p)=>u.date-p.date),s(g)}catch{l("Failed to load metabolic health data. Please try again.")}finally{i(!1)}})()},[t]);const o=({active:c,payload:m,label:d})=>{if(c&&m&&m.length){const x=m[0].payload;return e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-3 shadow-lg",children:[e.jsx("p",{className:"text-white font-medium",children:`Date: ${x.dateString}`}),m.map((g,u)=>e.jsx("p",{style:{color:g.color},children:`${g.name}: ${g.value?.toFixed(1)} ${g.dataKey==="glucose"?"mmol/L":"%"}`},u))]})}return null};return r?e.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl border border-slate-700/50 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"Loading metabolic health data..."})]})}):a?e.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl border border-slate-700/50 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(lt,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-400 font-medium text-lg",children:"Error loading metabolic health data"}),e.jsx("p",{className:"text-gray-400 mt-2",children:a})]})}):n.length===0?e.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl border border-slate-700/50 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx($e,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 font-medium text-lg",children:"No metabolic health data available"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Metabolic health data requires blood test results with glucose or HbA1c measurements."})]})}):e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl border border-slate-700/50 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Metabolic Health Trends"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Glucose and HbA1c levels over time. Monitor metabolic health and diabetes risk."}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Fasting Glucose (3.9-5.6 mmol/L)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{children:"HbA1c (4.0-6.0%)"})]})]})]}),e.jsx("div",{className:"h-96",children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(Me,{data:n,margin:{top:20,right:30,bottom:20,left:20},children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(oe,{type:"number",dataKey:"date",domain:["dataMin","dataMax"],tickFormatter:c=>new Date(c).toLocaleDateString(),stroke:"#9ca3af"}),e.jsx(Z,{yAxisId:"glucose",orientation:"left",domain:["dataMin - 0.5","dataMax + 0.5"],label:{value:"Glucose (mmol/L)",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fill:"#9ca3af"}},stroke:"#3b82f6"}),e.jsx(Z,{yAxisId:"hba1c",orientation:"right",domain:["dataMin - 0.2","dataMax + 0.2"],label:{value:"HbA1c (%)",angle:90,position:"insideRight",style:{textAnchor:"middle",fill:"#9ca3af"}},stroke:"#10b981"}),e.jsx(ae,{content:e.jsx(o,{})}),e.jsx(de,{}),e.jsx(pe,{yAxisId:"glucose",y:3.9,stroke:"#ef4444",strokeDasharray:"5 5",label:"Low Glucose"}),e.jsx(pe,{yAxisId:"glucose",y:5.6,stroke:"#ef4444",strokeDasharray:"5 5",label:"High Glucose"}),e.jsx(pe,{yAxisId:"hba1c",y:4,stroke:"#f59e0b",strokeDasharray:"5 5",label:"Low HbA1c"}),e.jsx(pe,{yAxisId:"hba1c",y:6,stroke:"#f59e0b",strokeDasharray:"5 5",label:"High HbA1c"}),e.jsx(J,{yAxisId:"glucose",type:"monotone",dataKey:"glucose",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2,r:4},name:"Fasting Glucose",connectNulls:!1}),e.jsx(J,{yAxisId:"hba1c",type:"monotone",dataKey:"hba1c",stroke:"#10b981",strokeWidth:2,dot:{fill:"#10b981",strokeWidth:2,r:4},name:"HbA1c",connectNulls:!1})]})})}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500",children:[n.length," data point",n.length!==1?"s":""," • Last updated: ",n[n.length-1]?.dateString]})]})},Ri=({athleteId:t})=>{const[n,s]=I.useState([]),[r,i]=I.useState(!0),[a,l]=I.useState(null);I.useEffect(()=>{(async()=>{try{i(!0),l(null);const m=typeof t=="string"?parseInt(t,10):t,d=await Nt.getAthleteData(m,!0);if(!d.bloodResults||d.bloodResults.length===0){s([]);return}const x=d.bloodResults.filter(u=>u.c_reactive_protein!==void 0&&u.c_reactive_protein!==null||u.esr!==void 0&&u.esr!==null||u.leucocyte_count!==void 0&&u.leucocyte_count!==null||u.nlr!==void 0&&u.nlr!==null);if(x.length===0){s([]);return}const g=x.filter(u=>u.date).map(u=>{const p=new Date(u.date);return{date:p.getTime(),dateString:p.toLocaleDateString(),crp:u.c_reactive_protein||0,esr:u.esr||0,wbc:u.leucocyte_count||0,nlr:u.nlr||0}});g.sort((u,p)=>u.date-p.date),s(g)}catch{l("Failed to load inflammation data. Please try again.")}finally{i(!1)}})()},[t]);const o=({active:c,payload:m,label:d})=>{if(c&&m&&m.length){const x=m[0].payload;return e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-3 shadow-lg",children:[e.jsx("p",{className:"text-white font-medium",children:`Date: ${x.dateString}`}),m.map((g,u)=>{let p="";return g.dataKey==="crp"?p=" mg/L":g.dataKey==="esr"?p=" mm/hr":g.dataKey==="wbc"?p=" ×10⁹/L":g.dataKey==="nlr"&&(p=""),e.jsx("p",{style:{color:g.color},children:`${g.name}: ${g.value?.toFixed(1)}${p}`},u)})]})}return null};return r?e.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl border border-slate-700/50 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"Loading inflammation data..."})]})}):a?e.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl border border-slate-700/50 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(lt,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-400 font-medium text-lg",children:"Error loading inflammation data"}),e.jsx("p",{className:"text-gray-400 mt-2",children:a})]})}):n.length===0?e.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl border border-slate-700/50 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx($e,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 font-medium text-lg",children:"No inflammation data available"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Inflammation data requires blood test results with CRP, ESR, WBC, or NLR measurements."})]})}):e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl border border-slate-700/50 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Inflammation & Immune Response"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Track inflammation markers and immune system activity over time."}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-2 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{children:"CRP (<3.0 mg/L)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),e.jsx("span",{children:"ESR (<20 mm/hr)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{children:"WBC (4.0-11.0 ×10⁹/L)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),e.jsx("span",{children:"NLR (<3.0)"})]})]})]}),e.jsx("div",{className:"h-96",children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(Se,{data:n,margin:{top:20,right:30,bottom:20,left:20},children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(oe,{type:"number",dataKey:"date",domain:["dataMin","dataMax"],tickFormatter:c=>new Date(c).toLocaleDateString(),stroke:"#9ca3af"}),e.jsx(Z,{yAxisId:"inflammation",orientation:"left",domain:["dataMin","dataMax"],label:{value:"Inflammation Markers",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fill:"#9ca3af"}},stroke:"#9ca3af"}),e.jsx(Z,{yAxisId:"immune",orientation:"right",domain:["dataMin","dataMax"],label:{value:"Immune Cells",angle:90,position:"insideRight",style:{textAnchor:"middle",fill:"#9ca3af"}},stroke:"#9ca3af"}),e.jsx(ae,{content:e.jsx(o,{})}),e.jsx(de,{}),e.jsx(pe,{yAxisId:"inflammation",y:3,stroke:"#ef4444",strokeDasharray:"5 5",label:"CRP Normal"}),e.jsx(pe,{yAxisId:"inflammation",y:20,stroke:"#f59e0b",strokeDasharray:"5 5",label:"ESR Normal"}),e.jsx(pe,{yAxisId:"immune",y:4,stroke:"#3b82f6",strokeDasharray:"5 5",label:"WBC Low"}),e.jsx(pe,{yAxisId:"immune",y:11,stroke:"#3b82f6",strokeDasharray:"5 5",label:"WBC High"}),e.jsx(pe,{yAxisId:"immune",y:3,stroke:"#8b5cf6",strokeDasharray:"5 5",label:"NLR Normal"}),e.jsx(J,{yAxisId:"inflammation",type:"monotone",dataKey:"crp",stroke:"#ef4444",strokeWidth:2,dot:{fill:"#ef4444",strokeWidth:2,r:4},name:"C-Reactive Protein",connectNulls:!1}),e.jsx(J,{yAxisId:"inflammation",type:"monotone",dataKey:"esr",stroke:"#f59e0b",strokeWidth:2,dot:{fill:"#f59e0b",strokeWidth:2,r:4},name:"ESR",connectNulls:!1}),e.jsx(Te,{yAxisId:"immune",dataKey:"wbc",fill:"#3b82f6",name:"White Blood Cells",opacity:.7}),e.jsx(J,{yAxisId:"immune",type:"monotone",dataKey:"nlr",stroke:"#8b5cf6",strokeWidth:2,dot:{fill:"#8b5cf6",strokeWidth:2,r:4},name:"Neutrophil-Lymphocyte Ratio",connectNulls:!1})]})})}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500",children:[n.length," data point",n.length!==1?"s":""," • Last updated: ",n[n.length-1]?.dateString]})]})},Ci=({athleteId:t})=>{const[n,s]=I.useState([]),[r,i]=I.useState(!0),[a,l]=I.useState(null);I.useEffect(()=>{(async()=>{try{i(!0),l(null);const m=typeof t=="string"?parseInt(t,10):t,d=await Nt.getAthleteData(m,!0);if(!d.bloodResults||d.bloodResults.length===0){s([]);return}const x=d.bloodResults.filter(u=>u.s_alanine_transaminase!==void 0&&u.s_alanine_transaminase!==null||u.s_aspartate_transaminase!==void 0&&u.s_aspartate_transaminase!==null||u.s_glutamyl_transferase!==void 0&&u.s_glutamyl_transferase!==null||u.creatinine!==void 0&&u.creatinine!==null||u.egfr!==void 0&&u.egfr!==null);if(x.length===0){s([]);return}const g=x.filter(u=>u.date).map(u=>{const p=new Date(u.date);return{date:p.getTime(),dateString:p.toLocaleDateString(),alt:u.s_alanine_transaminase||0,ast:u.s_aspartate_transaminase||0,ggt:u.s_glutamyl_transferase||0,creatinine:u.creatinine||0,egfr:u.egfr||0}});g.sort((u,p)=>u.date-p.date),s(g)}catch{l("Failed to load organ function data. Please try again.")}finally{i(!1)}})()},[t]);const o=({active:c,payload:m,label:d})=>{if(c&&m&&m.length){const x=m[0].payload;return e.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-3 shadow-lg",children:[e.jsx("p",{className:"text-white font-medium",children:`Date: ${x.dateString}`}),m.map((g,u)=>{let p=" U/L";return g.dataKey==="creatinine"?p=" µmol/L":g.dataKey==="egfr"&&(p=" mL/min/1.73m²"),e.jsx("p",{style:{color:g.color},children:`${g.name}: ${g.value?.toFixed(1)}${p}`},u)})]})}return null};return r?e.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl border border-slate-700/50 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"Loading organ function data..."})]})}):a?e.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl border border-slate-700/50 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx(lt,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-400 font-medium text-lg",children:"Error loading organ function data"}),e.jsx("p",{className:"text-gray-400 mt-2",children:a})]})}):n.length===0?e.jsx("div",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl border border-slate-700/50 p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx($e,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 font-medium text-lg",children:"No organ function data available"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Organ function data requires blood test results with liver or kidney markers."})]})}):e.jsxs("div",{className:"bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 rounded-2xl border border-slate-700/50 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Liver & Kidney Function Trends"}),e.jsx("p",{className:"text-gray-400 text-sm",children:"Monitor liver enzymes (ALT, AST, GGT) and kidney function (creatinine, eGFR) over time."}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 mt-2 text-xs text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{children:"Liver Enzymes (ALT <56, AST <40, GGT <48 U/L)"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-3 bg-blue-500 rounded-full"}),e.jsx("span",{children:"Kidney Function (Creatinine 60-110 µmol/L, eGFR >90)"})]})]})]}),e.jsx("div",{className:"h-96",children:e.jsx(ie,{width:"100%",height:"100%",children:e.jsxs(Me,{data:n,margin:{top:20,right:30,bottom:20,left:20},children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#374151"}),e.jsx(oe,{type:"number",dataKey:"date",domain:["dataMin","dataMax"],tickFormatter:c=>new Date(c).toLocaleDateString(),stroke:"#9ca3af"}),e.jsx(Z,{yAxisId:"liver",orientation:"left",domain:["dataMin","dataMax"],label:{value:"Liver Enzymes (U/L)",angle:-90,position:"insideLeft",style:{textAnchor:"middle",fill:"#9ca3af"}},stroke:"#10b981"}),e.jsx(Z,{yAxisId:"kidney",orientation:"right",domain:["dataMin","dataMax"],label:{value:"Kidney Markers",angle:90,position:"insideRight",style:{textAnchor:"middle",fill:"#9ca3af"}},stroke:"#3b82f6"}),e.jsx(ae,{content:e.jsx(o,{})}),e.jsx(de,{}),e.jsx(pe,{yAxisId:"liver",y:56,stroke:"#ef4444",strokeDasharray:"5 5",label:"ALT Normal"}),e.jsx(pe,{yAxisId:"liver",y:40,stroke:"#f59e0b",strokeDasharray:"5 5",label:"AST Normal"}),e.jsx(pe,{yAxisId:"liver",y:48,stroke:"#8b5cf6",strokeDasharray:"5 5",label:"GGT Normal"}),e.jsx(pe,{yAxisId:"kidney",y:60,stroke:"#3b82f6",strokeDasharray:"5 5",label:"Creatinine Low"}),e.jsx(pe,{yAxisId:"kidney",y:110,stroke:"#3b82f6",strokeDasharray:"5 5",label:"Creatinine High"}),e.jsx(pe,{yAxisId:"kidney",y:90,stroke:"#10b981",strokeDasharray:"5 5",label:"eGFR Normal"}),e.jsx(J,{yAxisId:"liver",type:"monotone",dataKey:"alt",stroke:"#10b981",strokeWidth:2,dot:{fill:"#10b981",strokeWidth:2,r:4},name:"ALT",connectNulls:!1}),e.jsx(J,{yAxisId:"liver",type:"monotone",dataKey:"ast",stroke:"#f59e0b",strokeWidth:2,dot:{fill:"#f59e0b",strokeWidth:2,r:4},name:"AST",connectNulls:!1}),e.jsx(J,{yAxisId:"liver",type:"monotone",dataKey:"ggt",stroke:"#8b5cf6",strokeWidth:2,dot:{fill:"#8b5cf6",strokeWidth:2,r:4},name:"GGT",connectNulls:!1}),e.jsx(J,{yAxisId:"kidney",type:"monotone",dataKey:"creatinine",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2,r:4},name:"Creatinine",connectNulls:!1}),e.jsx(J,{yAxisId:"kidney",type:"monotone",dataKey:"egfr",stroke:"#ef4444",strokeWidth:2,dot:{fill:"#ef4444",strokeWidth:2,r:4},name:"eGFR",connectNulls:!1})]})})}),e.jsxs("div",{className:"mt-4 text-center text-sm text-gray-500",children:[n.length," data point",n.length!==1?"s":""," • Last updated: ",n[n.length-1]?.dateString]})]})},Di=({athleteId:t})=>{const[n,s]=I.useState([]),[r,i]=I.useState(!0),[a,l]=I.useState(null);I.useEffect(()=>{(async()=>{try{i(!0),l(null);const g=typeof t=="string"?parseInt(t,10):t,u=await Ts.getBloodResultsByAthlete(g);s(u)}catch{l("Failed to load blood results data. Please try again.")}finally{i(!1)}})()},[t]);const o=(x,g=2)=>x==null?"N/A":x.toFixed(g),c=(x,g)=>x==null||!g?e.jsx(Kr,{className:"w-4 h-4 text-gray-400"}):x<g.min?e.jsx(Vr,{className:"w-4 h-4 text-blue-500"}):x>g.max?e.jsx(Br,{className:"w-4 h-4 text-red-500"}):e.jsx(Dn,{className:"w-4 h-4 text-green-500"}),m=(x,g)=>x==null||!g?"text-gray-400":x<g.min||x>g.max?"text-red-600 bg-red-50":"text-green-600 bg-green-50";if(r)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-blue-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 text-lg",children:"Loading blood results..."})]})});if(a)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(lt,{className:"w-16 h-16 text-red-500 mx-auto mb-4"}),e.jsx("p",{className:"text-red-400 font-medium text-lg",children:"Error loading blood results"}),e.jsx("p",{className:"text-gray-400 mt-2",children:a})]})});if(n.length===0)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx($e,{className:"w-16 h-16 text-gray-500 mx-auto mb-4"}),e.jsx("p",{className:"text-gray-400 font-medium text-lg",children:"No blood results available"}),e.jsx("p",{className:"text-gray-500 mt-2",children:"Blood test results will appear here once uploaded."})]})});const d=n[n.length-1];return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900",children:e.jsxs("div",{className:"relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-transparent via-red-500/5 to-transparent"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-transparent via-pink-500/5 to-transparent"}),e.jsxs("div",{className:"relative z-10 p-8 space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-red-500 to-pink-500 rounded-full mb-4 shadow-lg animate-pulse",children:e.jsx(Gr,{className:"w-10 h-10 text-white"})}),e.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-white via-red-200 to-pink-200 bg-clip-text text-transparent mb-2",children:"Blood Results"}),e.jsxs("p",{className:"text-gray-500 text-sm mt-2",children:[n.length," test result",n.length!==1?"s":""," available"]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-900/50 rounded-2xl border border-slate-700/50 p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(Hr,{className:"w-6 h-6"}),"Test Information"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Test Date"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:d.date?new Date(d.date).toLocaleDateString():"N/A"})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Lab Name"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:d.lab_name||"N/A"})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Test Method"}),e.jsx("div",{className:"text-lg font-semibold text-white",children:d.test_method||"N/A"})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Status"}),e.jsx("div",{className:"text-lg font-semibold text-white flex items-center gap-2",children:d.is_abnormal?e.jsxs(e.Fragment,{children:[e.jsx(lt,{className:"w-5 h-5 text-red-500"}),"Abnormal"]}):e.jsxs(e.Fragment,{children:[e.jsx(Dn,{className:"w-5 h-5 text-green-500"}),"Normal"]})})]})]}),d.notes&&e.jsxs("div",{className:"mt-4 bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsx("div",{className:"text-sm text-gray-400 mb-1",children:"Notes"}),e.jsx("div",{className:"text-white",children:d.notes})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-900/50 rounded-2xl border border-slate-700/50 p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx($r,{className:"w-6 h-6"}),"Hormones"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Cortisol"}),c(d.cortisol_nmol_l,{min:100,max:600})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.cortisol_nmol_l,{min:100,max:600})}`,children:[o(d.cortisol_nmol_l)," nmol/L"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Testosterone"}),c(d.testosterone,{min:8.4,max:28.7})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.testosterone,{min:8.4,max:28.7})}`,children:[o(d.testosterone)," nmol/L"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Vitamin D"}),c(d.vitamin_d,{min:50,max:150})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.vitamin_d,{min:50,max:150})}`,children:[o(d.vitamin_d)," nmol/L"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-900/50 rounded-2xl border border-slate-700/50 p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx($e,{className:"w-6 h-6"}),"Metabolic & Muscle Markers"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Creatine Kinase"}),c(d.ck,{min:30,max:200})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.ck,{min:30,max:200})}`,children:[o(d.ck)," U/L"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Fasting Glucose"}),c(d.fasting_glucose,{min:3.9,max:5.6})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.fasting_glucose,{min:3.9,max:5.6})}`,children:[o(d.fasting_glucose)," mmol/L"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"HbA1c"}),c(d.hba1c,{min:4,max:6})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.hba1c,{min:4,max:6})}`,children:[o(d.hba1c)," %"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-900/50 rounded-2xl border border-slate-700/50 p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(Tn,{className:"w-6 h-6"}),"Kidney Function"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Urea"}),c(d.urea,{min:2.5,max:7.8})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.urea,{min:2.5,max:7.8})}`,children:[o(d.urea)," mmol/L"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Creatinine"}),c(d.creatinine,{min:60,max:110})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.creatinine,{min:60,max:110})}`,children:[o(d.creatinine)," µmol/L"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"eGFR"}),c(d.egfr,{min:90,max:120})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.egfr,{min:90,max:120})}`,children:[o(d.egfr)," mL/min/1.73m²"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Uric Acid"}),c(d.uric_acid,{min:150,max:420})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.uric_acid,{min:150,max:420})}`,children:[o(d.uric_acid)," µmol/L"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-900/50 rounded-2xl border border-slate-700/50 p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx($e,{className:"w-6 h-6"}),"Liver Function"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"ALT"}),c(d.s_alanine_transaminase,{min:7,max:56})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.s_alanine_transaminase,{min:7,max:56})}`,children:[o(d.s_alanine_transaminase)," U/L"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"AST"}),c(d.s_aspartate_transaminase,{min:10,max:40})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.s_aspartate_transaminase,{min:10,max:40})}`,children:[o(d.s_aspartate_transaminase)," U/L"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"GGT"}),c(d.s_glutamyl_transferase,{min:9,max:48})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.s_glutamyl_transferase,{min:9,max:48})}`,children:[o(d.s_glutamyl_transferase)," U/L"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"LDH"}),c(d.lactate_dehydrogenase,{min:125,max:220})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.lactate_dehydrogenase,{min:125,max:220})}`,children:[o(d.lactate_dehydrogenase)," U/L"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-900/50 rounded-2xl border border-slate-700/50 p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx($e,{className:"w-6 h-6"}),"Complete Blood Count"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Hemoglobin"}),c(d.hemoglobin,{min:130,max:170})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.hemoglobin,{min:130,max:170})}`,children:[o(d.hemoglobin)," g/dL"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"White Blood Cells"}),c(d.leucocyte_count,{min:4,max:11})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.leucocyte_count,{min:4,max:11})}`,children:[o(d.leucocyte_count)," ×10⁹/L"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Platelets"}),c(d.platelets,{min:150,max:400})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.platelets,{min:150,max:400})}`,children:[o(d.platelets)," ×10⁹/L"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-900/50 rounded-2xl border border-slate-700/50 p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(Tn,{className:"w-6 h-6"}),"Inflammation & Minerals"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"C-Reactive Protein"}),c(d.c_reactive_protein,{min:0,max:3})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.c_reactive_protein,{min:0,max:3})}`,children:[o(d.c_reactive_protein)," mg/L"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"ESR"}),c(d.esr,{min:1,max:20})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.esr,{min:1,max:20})}`,children:[o(d.esr)," mm/hr"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Calcium"}),c(d.calcium_adjusted,{min:2.15,max:2.55})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.calcium_adjusted,{min:2.15,max:2.55})}`,children:[o(d.calcium_adjusted)," mmol/L"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"text-sm text-gray-400",children:"Magnesium"}),c(d.magnesium,{min:.7,max:1})]}),e.jsxs("div",{className:`text-2xl font-bold ${m(d.magnesium,{min:.7,max:1})}`,children:[o(d.magnesium)," mmol/L"]})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-900/50 rounded-2xl border border-slate-700/50 p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-4 flex items-center gap-2",children:[e.jsx(zr,{className:"w-6 h-6"}),"Summary"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:n.length}),e.jsx("div",{className:"text-sm text-gray-400",children:"Total Tests"})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-400 mb-2",children:d.date?new Date(d.date).toLocaleDateString():"N/A"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Latest Test Date"})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-xl p-4 border border-slate-700/50 text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:d.is_abnormal?"⚠️":"✅"}),e.jsx("div",{className:"text-sm text-gray-400",children:"Overall Status"})]})]})]}),e.jsxs("div",{className:"bg-gradient-to-r from-slate-800/50 to-slate-900/50 rounded-2xl border border-slate-700/50 p-6",children:[e.jsxs("h2",{className:"text-2xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(Wr,{className:"w-6 h-6"}),"Blood Results Trends"]}),e.jsxs("div",{className:"space-y-8",children:[e.jsx($s,{athleteId:t}),e.jsx(Mi,{athleteId:t}),e.jsx(Ri,{athleteId:t}),e.jsx(Ci,{athleteId:t})]})]})]})]})})},On=t=>{if(t.length===0)return 0;t[t.length-1];let n=100;const s=t.map(p=>p.sleep_onset_time||"00:00"),r=t.map(p=>p.wake_time||"00:00"),i=_t(s.map(p=>{const[h,v]=p.split(":").map(Number);return h*60+v})),a=_t(r.map(p=>{const[h,v]=p.split(":").map(Number);return h*60+v})),l=(i+a)/2,o=Math.min(l/2,30),c=t.reduce((p,h)=>p+(h.sleep_duration_h??0),0)/t.length,m=c<7?(7-c)*5:0,d=t.reduce((p,h)=>p+(h.deep_sleep_pct??0),0)/t.length,x=d<20?(20-d)*2:0,g=t.reduce((p,h)=>p+(h.hrv_night??0),0)/t.length,u=g<50?(50-g)*.5:0;return n-=o+m+x+u,Math.max(0,Math.min(100,n))},_t=t=>{const n=t.reduce((i,a)=>i+a,0)/t.length,r=t.map(i=>Math.pow(i-n,2)).reduce((i,a)=>i+a,0)/t.length;return Math.sqrt(r)},Ti=(t,n)=>{const s=t.find(c=>c.gene==="PER3"),r=t.find(c=>c.gene==="CLOCK"),i=t.find(c=>c.gene==="PER2"),a=t.find(c=>c.gene==="ARNTL");let l="Intermediate",o=0;if(r&&(o+=r.genotype==="AA"?1:-.5),s&&(o+=s.genotype==="long"?-1:.5),i&&(o+=i.genotype.includes("C")?.3:-.3),a&&(o+=a.genotype.includes("G")?.2:-.2),o>.5?l="Morning Type":o<-.5?l="Evening Type":l="Intermediate",n.length>0){const c=n.reduce((d,x)=>{const[g]=(x.sleep_onset_time||"00:00").split(":").map(Number);return d+g},0)/n.length,m=n.reduce((d,x)=>{const[g]=(x.wake_time||"00:00").split(":").map(Number);return d+g},0)/n.length;if(c>=23||c<=3)return"Evening Type";if(c<=21&&m<=7)return"Morning Type";if(c>=22&&c<=23)return"Intermediate"}return l},Fi=t=>{const n=[];if(t.length<2)return n;const s=t.map(c=>{const[m,d]=(c.sleep_onset_time||"00:00").split(":").map(Number);return m*60+d});return _t(s)>60&&n.push("Irregular Sleep Schedule"),t.reduce((c,m)=>c+(m.sleep_duration_h??0),0)/t.length<7&&n.push("Chronic Sleep Deprivation"),t.reduce((c,m)=>c+(m.deep_sleep_pct??0),0)/t.length<15&&n.push("Insufficient Deep Sleep"),t.reduce((c,m)=>c+(m.resting_hr??0),0)/t.length>65&&n.push("Elevated Nighttime Heart Rate"),t.reduce((c,m)=>c+(m.hrv_night??0),0)/t.length<40&&n.push("Poor Nighttime Recovery"),n},Li=(t,n,s,r)=>{const i=[];t==="Morning Type"?(i.push("Maintain consistent early bedtime (9-10 PM) and wake time (5-6 AM)"),i.push("Schedule high-intensity training in the morning when cortisol is naturally higher"),i.push("Avoid late-night screen time and bright lights after sunset")):t==="Evening Type"?(i.push("Allow flexible scheduling but maintain consistent sleep duration"),i.push("Consider later training sessions when energy levels are higher"),i.push("Use morning sunlight exposure to help regulate circadian rhythm")):(i.push("Aim for 10-11 PM bedtime and 6-7 AM wake time as a balanced approach"),i.push("Monitor energy levels throughout the day to optimize training timing")),n.includes("Irregular Sleep Schedule")&&(i.push("Establish a consistent sleep schedule, even on weekends"),i.push("Use alarm clocks for both bedtime and wake time")),n.includes("Chronic Sleep Deprivation")&&(i.push("Prioritize 7-9 hours of sleep nightly"),i.push("Consider naps (20-30 minutes) if sleep debt accumulates")),n.includes("Insufficient Deep Sleep")&&(i.push("Maintain cooler bedroom temperature (65-68°F/18-20°C)"),i.push("Avoid alcohol and heavy meals 3 hours before bedtime")),n.includes("Elevated Nighttime Heart Rate")&&(i.push("Incorporate evening relaxation techniques (meditation, light stretching)"),i.push("Reduce screen time and blue light exposure 1 hour before bed"));const a=s.find(y=>y.gene==="CLOCK");a&&(a.genotype==="AA"?i.push("Strong circadian drive (CLOCK AA) - maintain strict sleep consistency"):i.push("Flexible circadian rhythm - use time-restricted eating (10-hour window)"));const l=s.find(y=>y.gene==="PER3");l&&(l.genotype==="long"?(i.push("Evening chronotype (PER3 long) - consider magnesium glycinate for better sleep onset"),i.push("Evening types: Stop caffeine by 3 PM to avoid sleep disruption")):(i.push("Morning chronotype (PER3 short) - optimize with morning sunlight exposure"),i.push("Morning types: Can consume caffeine until 2 PM without major sleep impact"))),s.find(y=>y.gene==="PER2")&&i.push("PER2 variant detected - monitor light exposure timing for optimal circadian regulation"),s.find(y=>y.gene==="ARNTL")&&i.push("BMAL1 (ARNTL) gene influences circadian strength - maintain consistent light/dark cycles");const m=s.find(y=>y.gene==="COMT");m&&(m.genotype==="GG"?i.push("Efficient dopamine metabolism (COMT GG) - better stress response during sleep deprivation"):i.push("Slower dopamine clearance - prioritize sleep quality over quantity"));const d=s.find(y=>y.gene==="BDNF");d&&(d.genotype==="Val/Val"?i.push("Enhanced neuroplasticity (BDNF Val/Val) - better sleep-dependent memory consolidation"):i.push("Reduced neuroplasticity - ensure adequate deep sleep for cognitive recovery")),s.find(y=>y.gene==="PPARGC1A")&&i.push("Mitochondrial biogenesis gene (PPARGC1A) - cold exposure may enhance sleep quality");const g=s.find(y=>y.gene==="SLC6A4");return g&&(g.genotype==="LL"?i.push("Efficient serotonin transport (SLC6A4 LL) - better mood stability with light exposure"):i.push("Reduced serotonin transport - monitor seasonal mood changes")),s.find(y=>y.gene==="TPH2")&&i.push("Serotonin synthesis gene (TPH2) - light therapy may help regulate mood and sleep"),s.find(y=>y.gene==="MAOA")&&i.push("Monoamine oxidase gene (MAOA) - stress management crucial for sleep quality"),s.find(y=>y.gene==="GC")&&i.push("Vitamin D binding protein gene (GC) - monitor vitamin D levels, consider supplementation"),s.find(y=>y.gene==="CYP2R1")&&i.push("Vitamin D activation gene (CYP2R1) - may need higher UV exposure for vitamin D production"),s.find(y=>y.gene==="VDR")&&i.push("Vitamin D receptor gene (VDR) - optimize vitamin D utilization through diet and sunlight"),t==="Morning Type"?(i.push("Stop caffeine consumption by 2 PM to avoid sleep interference"),i.push("Optimal caffeine timing: 8-11 AM when cortisol is naturally elevated")):t==="Evening Type"?(i.push("Stop caffeine consumption by 4 PM to prevent delayed sleep onset"),i.push("Limit caffeine to morning hours only (before 12 PM)")):(i.push("Stop caffeine consumption by 3 PM for balanced circadian rhythm"),i.push("Monitor individual response and adjust caffeine cutoff time accordingly")),r.length>0&&(r.reduce((k,E)=>{const[M]=(E.sleep_onset_time||"00:00").split(":").map(Number);return k+M},0)/r.length<23?i.push("Early sleep onset detected - stop caffeine 6-8 hours before bedtime"):i.push("Later sleep onset - stop caffeine 4-6 hours before bedtime")),i},_i=({biometricData:t,geneticData:n,athleteId:s})=>{const[r,i]=I.useState("30d"),a=r==="7d"?t.slice(-7):t.slice(-30),l=a.length?a[a.length-1]:void 0,o=l?.sleep_duration_h??0,c=l?.deep_sleep_pct??0,m=l?.temp_trend_c??36.5,d=l?.training_load_pct??0,x=a.length?a.reduce((y,k)=>y+(k.sleep_duration_h??0),0)/a.length:0,g=On(a),u=Ti(n,a),p=Fi(a),h=Li(u,p,n,a),v=a.map(y=>({date:y.date,sleepDuration:y.sleep_duration_h??0,deepSleep:y.deep_sleep_pct??0,hrvNight:y.hrv_night??0,restingHr:y.resting_hr??0,circadianScore:On([y])})),N=[{name:"Sleep Duration",value:a.length>0?a.reduce((y,k)=>y+(k.sleep_duration_h??0),0)/a.length:0,max:10},{name:"Deep Sleep %",value:a.length>0?a.reduce((y,k)=>y+(k.deep_sleep_pct??0),0)/a.length:0,max:30},{name:"Night HRV",value:a.length>0?a.reduce((y,k)=>y+(k.hrv_night??0),0)/a.length:0,max:100},{name:"Resting HR",value:a.length>0?100-a.reduce((y,k)=>y+(k.resting_hr??0),0)/a.length:0,max:100},{name:"Sleep Consistency",value:100-Math.min(_t(a.map(y=>{const[k]=(y.sleep_onset_time||"00:00").split(":").map(Number);return k}))*5,100),max:100}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"⏰ Circadian Rhythm Analysis"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>i("7d"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r==="7d"?"bg-blue-600 text-gray-900":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"7 Days"}),e.jsx("button",{onClick:()=>i("30d"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${r==="30d"?"bg-blue-600 text-gray-900":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:"30 Days"})]})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🕐 Daily Circadian Rhythm"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"relative w-64 h-64 mx-auto",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 120 120",children:[e.jsx("circle",{cx:"60",cy:"60",r:"55",fill:"none",stroke:"#e5e7eb",strokeWidth:"2"}),Array.from({length:24},(y,k)=>{const E=k*15-90,M=60+45*Math.cos(E*Math.PI/180),A=60+45*Math.sin(E*Math.PI/180),V=60+50*Math.cos(E*Math.PI/180),w=60+50*Math.sin(E*Math.PI/180);return e.jsx("line",{x1:M,y1:A,x2:V,y2:w,stroke:"#6b7280",strokeWidth:k%6===0?"2":"1"},k)}),[6,12,18,24].map(y=>{const k=y*15-90,E=60+38*Math.cos(k*Math.PI/180),M=60+38*Math.sin(k*Math.PI/180);return e.jsx("text",{x:E,y:M,textAnchor:"middle",dominantBaseline:"middle",className:"text-xs font-medium fill-gray-600",children:y===24?"0":y},y)}),u==="Morning Type"&&e.jsx("path",{d:"M 60,60 Q 45,30 30,55 Q 45,80 60,60",fill:"none",stroke:"#F59E0B",strokeWidth:"3",opacity:"0.8"}),u==="Evening Type"&&e.jsx("path",{d:"M 60,60 Q 45,40 30,65 Q 45,90 60,60",fill:"none",stroke:"#F59E0B",strokeWidth:"3",opacity:"0.8"}),u==="Intermediate"&&e.jsx("path",{d:"M 60,60 Q 45,35 30,60 Q 45,85 60,60",fill:"none",stroke:"#F59E0B",strokeWidth:"3",opacity:"0.8"}),a.length>0&&e.jsx("path",{d:`M 60,60 Q ${75+(o<7?5:0)},${35-(c>20?5:0)} ${90+(o<7?5:0)},${60-(c>20?10:0)} Q ${75+(o<7?5:0)},${85+(c>20?5:0)} 60,60`,fill:"none",stroke:"#8B5CF6",strokeWidth:"3",opacity:"0.8"}),a.length>0&&e.jsx("path",{d:`M 30,${70-(m>36.5?5:0)} Q 45,${65-(m>36.5?3:0)} 60,${60-(m>36.5?0:5)} Q 75,${55-(m>36.5?0:3)} 90,${70-(m>36.5?5:0)}`,fill:"none",stroke:"#EF4444",strokeWidth:"2",opacity:"0.7"}),a.length>0&&e.jsx("path",{d:`M 35,${75-(g>70?15:g>50?10:5)} Q 50,${50-(g>70?10:g>50?5:0)} 65,${45-(g>70?5:0)} Q 80,${50-(g>70?10:g>50?5:0)} 95,${75-(g>70?15:g>50?10:5)}`,fill:"none",stroke:"#10B981",strokeWidth:"2",opacity:"0.7"})]})})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-orange-50 p-3 rounded-lg border border-orange-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),e.jsx("span",{className:"font-medium text-orange-800",children:"Cortisol"})]}),e.jsx("p",{className:"text-sm text-orange-700",children:"Peaks in morning, drives wakefulness and energy"})]}),e.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 bg-purple-500 rounded-full"}),e.jsx("span",{className:"font-medium text-purple-800",children:"Melatonin"})]}),e.jsx("p",{className:"text-sm text-purple-700",children:"Rises in evening, promotes sleep and recovery"})]}),e.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full"}),e.jsx("span",{className:"font-medium text-red-800",children:"Body Temperature"})]}),e.jsx("p",{className:"text-sm text-red-700",children:"Lowest at night, peaks in afternoon/evening"})]}),e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),e.jsx("span",{className:"font-medium text-green-800",children:"Energy Levels"})]}),e.jsx("p",{className:"text-sm text-green-700",children:"Highest mid-morning to early afternoon"})]})]})})]}),e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-2xl mb-1",children:"🌅"}),e.jsx("div",{className:"font-medium text-blue-800",children:u==="Morning Type"?"5-8 AM":u==="Evening Type"?"7-10 AM":"6-9 AM"}),e.jsx("div",{className:"text-sm text-blue-600",children:g>70?"High-Intensity Training":"Light Exercise"})]}),e.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-2xl mb-1",children:"⚡"}),e.jsx("div",{className:"font-medium text-green-800",children:u==="Morning Type"?"9 AM-1 PM":u==="Evening Type"?"11 AM-3 PM":"10 AM-2 PM"}),e.jsxs("div",{className:"text-sm text-green-600",children:["Peak Performance ",g>70?"(Optimal)":"(Moderate)"]})]}),e.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx("div",{className:"text-2xl mb-1",children:"🧘"}),e.jsx("div",{className:"font-medium text-orange-800",children:u==="Morning Type"?"2-5 PM":u==="Evening Type"?"4-7 PM":"3-6 PM"}),e.jsxs("div",{className:"text-sm text-orange-600",children:["Recovery & ",d>80?"Active Rest":"Skill Work"]})]}),e.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg border border-purple-200",children:[e.jsx("div",{className:"text-2xl mb-1",children:"😴"}),e.jsx("div",{className:"font-medium text-purple-800",children:l?.sleep_onset_time?(()=>{const y=parseInt(l.sleep_onset_time.split(":")[0]),k=Math.floor((y+o)%24);return`${y>12?y-12:y} ${y>=12?"PM":"AM"}-${k>12?k-12:k===0?12:k} ${k>=12&&k!==0?"PM":"AM"}`})():"10 PM-6 AM"}),e.jsxs("div",{className:"text-sm text-purple-600",children:["Sleep (",x>0?x.toFixed(1):"8.0","h avg)"]})]})]})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"📊 Circadian Rhythm Score"}),e.jsxs("div",{className:"flex flex-col md:flex-row items-center gap-8",children:[e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:"relative w-48 h-48 mx-auto",children:e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 100 100",children:[e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:"#e5e7eb",strokeWidth:"8"}),e.jsx("circle",{cx:"50",cy:"50",r:"45",fill:"none",stroke:g>70?"#10B981":g>50?"#F59E0B":"#EF4444",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:`${g*2.83}, 1000`,transform:"rotate(-90 50 50)"}),e.jsx("text",{x:"50",y:"50",textAnchor:"middle",dominantBaseline:"middle",className:"text-2xl font-bold",children:g.toFixed(0)}),e.jsx("text",{x:"50",y:"66",textAnchor:"middle",dominantBaseline:"middle",className:"text-xs text-gray-600",children:"Score"})]})})}),e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Chronotype"}),e.jsx("p",{className:"text-2xl font-bold mt-1 text-gray-900",children:u}),e.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[u==="Morning Type"&&"Early riser, peaks in morning",u==="Evening Type"&&"Night owl, peaks in evening",u==="Intermediate"&&"Balanced sleep pattern"]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Genetic Influence"}),e.jsxs("div",{className:"space-y-2 mt-2",children:[n.filter(y=>["CLOCK","PER2","PER3","ARNTL","COMT","BDNF","PPARGC1A","SLC6A4","TPH2","MAOA","GC","CYP2R1","VDR"].includes(y.gene)).map((y,k)=>e.jsxs("div",{className:"text-sm text-gray-900",children:[e.jsxs("span",{className:"font-medium text-gray-900",children:[y.gene,":"]})," ",e.jsx("span",{className:"text-gray-700",children:y.genotype})]},k)),n.filter(y=>["CLOCK","PER2","PER3","ARNTL","COMT","BDNF","PPARGC1A","SLC6A4","TPH2","MAOA","GC","CYP2R1","VDR"].includes(y.gene)).length===0&&e.jsx("p",{className:"text-sm text-gray-700",children:"No circadian-related genetic data available"})]})]})]})})]})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🧭 Circadian Stability & Schedule"}),(()=>{const y=U=>{if(!U||U==="00:00")return null;const[F,_]=U.split(":").map(Number);return isNaN(F)||isNaN(_)?null:F*60+_},k=a.filter(U=>y(U.sleep_onset_time)!==null&&(U.sleep_duration_h??0)>0),E=k.map(U=>y(U.sleep_onset_time)),M=k.map(U=>{const F=y(U.sleep_onset_time),_=Math.round((U.sleep_duration_h??0)*60);return(F+_)%1440}),A=U=>U.length?U.reduce((F,_)=>F+_,0)/U.length:0,V=U=>{if(U.length===0)return 0;const F=A(U),_=A(U.map(K=>(K-F)*(K-F)));return Math.sqrt(_)},w=V(E),C=V(M),S=(w+C)/2,T=Math.max(0,Math.min(100,100-S/120*100)),D=k.filter(U=>{const F=new Date(U.date).getDay();return F!==0&&F!==6}),G=k.filter(U=>{const F=new Date(U.date).getDay();return F===0||F===6}),Y=U=>{const F=y(U.sleep_onset_time),_=Math.round((U.sleep_duration_h??0)*60);return(F+Math.round(_/2))%1440},q=A(D.map(Y)),R=A(G.map(Y)),W=Math.abs(R-q)/60,P=U=>{U=(Math.round(U)%1440+1440)%1440;const F=Math.floor(U/60),_=U%60,K=F>=12?"PM":"AM";return`${(F%12||12).toString()}:${_.toString().padStart(2,"0")} ${K}`},X=(Math.floor(A(E)/60)-8+24)%24,O=u==="Morning Type"?"8–12":u==="Evening Type"?"10–13":"9–12",f=u==="Morning Type"?"14–16":u==="Evening Type"?"17–20":"15–18",z=S>60?"Advance bedtime by 15–30 min nightly for 5–7 days and anchor wake time":"Maintain current schedule; micro-adjust by 10–15 min if needed";return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Sleep Regularity Index"}),e.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[Math.round(T),"%"]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Avg std dev: ",Math.round(S)," min"]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("div",{className:"text-sm text-blue-700",children:"Social Jet Lag"}),e.jsxs("div",{className:"text-3xl font-bold text-blue-800",children:[isNaN(W)?"0.0":W.toFixed(1)," h"]}),e.jsx("div",{className:"text-xs text-blue-700",children:"Mid-sleep weekend vs weekday"})]}),e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("div",{className:"text-sm text-green-700",children:"Caffeine Cutoff"}),e.jsx("div",{className:"text-3xl font-bold text-green-800",children:P(X*60)}),e.jsx("div",{className:"text-xs text-green-700",children:"Based on average sleep onset"})]}),e.jsxs("div",{className:"p-4 bg-indigo-50 rounded-lg border border-indigo-200 md:col-span-3",children:[e.jsx("div",{className:"text-sm text-indigo-700",children:"Training Windows"}),e.jsxs("div",{className:"text-gray-900 font-medium mt-1",children:["AM: ",O," • PM: ",f]}),e.jsxs("div",{className:"text-xs text-indigo-700 mt-1",children:["Chronotype: ",u]})]}),e.jsxs("div",{className:"p-4 bg-orange-50 rounded-lg border border-orange-200 md:col-span-3",children:[e.jsx("div",{className:"text-sm text-orange-700",children:"Phase Shift Plan"}),e.jsx("div",{className:"text-gray-900 font-medium mt-1",children:z}),e.jsx("div",{className:"text-xs text-orange-700 mt-1",children:"Morning bright light; reduce evening blue light 2h pre-bed"})]})]})})()]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"🎯 Circadian Rhythm Markers"}),e.jsx(ie,{width:"100%",height:400,children:e.jsxs(Ls,{data:N,children:[e.jsx(_s,{stroke:"#e5e7eb"}),e.jsx(Ps,{dataKey:"name",tick:{fontSize:12}}),e.jsx(Es,{angle:90,domain:[0,"dataMax"],tick:{fontSize:10},tickFormatter:y=>`${y}`}),e.jsx(Is,{name:"Circadian Health",dataKey:"value",stroke:"#3b82f6",fill:"#3b82f6",fillOpacity:.3,strokeWidth:2}),e.jsx(ae,{contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px",color:"#1f2937"},formatter:(y,k)=>{const E=String(k).toLowerCase();return E.includes("deep sleep")?[`${Number(y).toFixed(2)}%`,k]:E.includes("sleep duration")?[`${Number(y).toFixed(1)} h`,k]:E.includes("hrv")?[`${Number(y).toFixed(0)} ms`,k]:E.includes("resting hr")?[`${(100-Number(y)).toFixed(0)} bpm`,k]:[Number(y).toFixed(2),k]}})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"📈 Sleep Duration & Quality"}),e.jsx(ie,{width:"100%",height:300,children:e.jsxs(Me,{data:v,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"date",stroke:"#6b7280"}),e.jsx(Z,{yAxisId:"left",stroke:"#6b7280",tickFormatter:y=>Number(y).toFixed(1)}),e.jsx(Z,{yAxisId:"right",orientation:"right",stroke:"#6b7280",tickFormatter:y=>`${Number(y).toFixed(2)}%`}),e.jsx(ae,{contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px",color:"#1f2937"},formatter:(y,k)=>typeof k=="string"&&k.includes("%")?[`${Number(y).toFixed(2)}%`,k]:[`${Number(y).toFixed(1)} h`,k]}),e.jsx(de,{}),e.jsx(J,{yAxisId:"left",type:"monotone",dataKey:"sleepDuration",name:"Sleep Duration (h)",stroke:"#3b82f6",strokeWidth:3,dot:{r:4}}),e.jsx(J,{yAxisId:"right",type:"monotone",dataKey:"deepSleep",name:"Deep Sleep (%)",stroke:"#10B981",strokeWidth:3,dot:{r:4}})]})})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"❤️ Nighttime Recovery"}),e.jsx(ie,{width:"100%",height:300,children:e.jsxs(Me,{data:v,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"date",stroke:"#6b7280"}),e.jsx(Z,{yAxisId:"left",stroke:"#6b7280"}),e.jsx(Z,{yAxisId:"right",orientation:"right",stroke:"#6b7280"}),e.jsx(ae,{contentStyle:{background:"#fff",border:"1px solid #e5e7eb",borderRadius:"6px",color:"#1f2937"},formatter:(y,k)=>{const E=String(k).toLowerCase();return E.includes("hrv")?[`${Number(y).toFixed(0)} ms`,k]:E.includes("resting hr")?[`${Number(y).toFixed(0)} bpm`,k]:[Number(y).toFixed(2),k]}}),e.jsx(de,{}),e.jsx(J,{yAxisId:"left",type:"monotone",dataKey:"hrvNight",name:"Night HRV (ms)",stroke:"#8b5cf6",strokeWidth:3,dot:{r:4}}),e.jsx(J,{yAxisId:"right",type:"monotone",dataKey:"restingHr",name:"Resting HR (bpm)",stroke:"#EF4444",strokeWidth:3,dot:{r:4}})]})})]})]}),p.length>0&&e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"⚠️ Circadian Disruptions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:p.map((y,k)=>e.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-red-100 flex items-center justify-center",children:e.jsx("span",{className:"text-red-600",children:"⚠️"})})}),e.jsxs("div",{className:"ml-3",children:[e.jsx("h4",{className:"text-sm font-medium text-red-800",children:y}),e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:[y==="Irregular Sleep Schedule"&&"Inconsistent bed/wake times disrupt circadian rhythm",y==="Chronic Sleep Deprivation"&&"Insufficient sleep duration affects hormone regulation",y==="Insufficient Deep Sleep"&&"Reduced deep sleep impairs physical recovery",y==="Elevated Nighttime Heart Rate"&&"High stress levels preventing proper recovery",y==="Poor Nighttime Recovery"&&"Low HRV indicates inadequate parasympathetic activity"]})]})]})},k))})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"💡 Personalized Recommendations"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:h.map((y,k)=>e.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-8 h-8 rounded-full bg-blue-100 flex items-center justify-center",children:e.jsx("span",{className:"text-blue-600",children:"💡"})})}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm text-blue-800",children:y})})]})},k))})]})]})};function Pi(t,n){const s=n||{};return(t[t.length-1]===""?[...t,""]:t).join((s.padRight?" ":"")+","+(s.padLeft===!1?"":" ")).trim()}const Ei=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Ii=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Oi={};function Gn(t,n){return((n||Oi).jsx?Ii:Ei).test(t)}const Gi=/[ \t\n\f\r]/g;function Hi(t){return typeof t=="object"?t.type==="text"?Hn(t.value):!1:Hn(t)}function Hn(t){return t.replace(Gi,"")===""}class vt{constructor(n,s,r){this.normal=s,this.property=n,r&&(this.space=r)}}vt.prototype.normal={};vt.prototype.property={};vt.prototype.space=void 0;function zs(t,n){const s={},r={};for(const i of t)Object.assign(s,i.property),Object.assign(r,i.normal);return new vt(s,r,n)}function Jt(t){return t.toLowerCase()}class Ne{constructor(n,s){this.attribute=s,this.property=n}}Ne.prototype.attribute="";Ne.prototype.booleanish=!1;Ne.prototype.boolean=!1;Ne.prototype.commaOrSpaceSeparated=!1;Ne.prototype.commaSeparated=!1;Ne.prototype.defined=!1;Ne.prototype.mustUseProperty=!1;Ne.prototype.number=!1;Ne.prototype.overloadedBoolean=!1;Ne.prototype.property="";Ne.prototype.spaceSeparated=!1;Ne.prototype.space=void 0;let $i=0;const se=Ze(),ge=Ze(),en=Ze(),H=Ze(),ue=Ze(),it=Ze(),we=Ze();function Ze(){return 2**++$i}const tn=Object.freeze(Object.defineProperty({__proto__:null,boolean:se,booleanish:ge,commaOrSpaceSeparated:we,commaSeparated:it,number:H,overloadedBoolean:en,spaceSeparated:ue},Symbol.toStringTag,{value:"Module"})),zt=Object.keys(tn);class xn extends Ne{constructor(n,s,r,i){let a=-1;if(super(n,s),$n(this,"space",i),typeof r=="number")for(;++a<zt.length;){const l=zt[a];$n(this,zt[a],(r&tn[l])===tn[l])}}}xn.prototype.defined=!0;function $n(t,n,s){s&&(t[n]=s)}function ot(t){const n={},s={};for(const[r,i]of Object.entries(t.properties)){const a=new xn(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),n[r]=a,s[Jt(r)]=r,s[Jt(a.attribute)]=r}return new vt(n,s,t.space)}const Ws=ot({properties:{ariaActiveDescendant:null,ariaAtomic:ge,ariaAutoComplete:null,ariaBusy:ge,ariaChecked:ge,ariaColCount:H,ariaColIndex:H,ariaColSpan:H,ariaControls:ue,ariaCurrent:null,ariaDescribedBy:ue,ariaDetails:null,ariaDisabled:ge,ariaDropEffect:ue,ariaErrorMessage:null,ariaExpanded:ge,ariaFlowTo:ue,ariaGrabbed:ge,ariaHasPopup:null,ariaHidden:ge,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ue,ariaLevel:H,ariaLive:null,ariaModal:ge,ariaMultiLine:ge,ariaMultiSelectable:ge,ariaOrientation:null,ariaOwns:ue,ariaPlaceholder:null,ariaPosInSet:H,ariaPressed:ge,ariaReadOnly:ge,ariaRelevant:null,ariaRequired:ge,ariaRoleDescription:ue,ariaRowCount:H,ariaRowIndex:H,ariaRowSpan:H,ariaSelected:ge,ariaSetSize:H,ariaSort:null,ariaValueMax:H,ariaValueMin:H,ariaValueNow:H,ariaValueText:null,role:null},transform(t,n){return n==="role"?n:"aria-"+n.slice(4).toLowerCase()}});function Ks(t,n){return n in t?t[n]:n}function Vs(t,n){return Ks(t,n.toLowerCase())}const zi=ot({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:it,acceptCharset:ue,accessKey:ue,action:null,allow:null,allowFullScreen:se,allowPaymentRequest:se,allowUserMedia:se,alt:null,as:null,async:se,autoCapitalize:null,autoComplete:ue,autoFocus:se,autoPlay:se,blocking:ue,capture:null,charSet:null,checked:se,cite:null,className:ue,cols:H,colSpan:null,content:null,contentEditable:ge,controls:se,controlsList:ue,coords:H|it,crossOrigin:null,data:null,dateTime:null,decoding:null,default:se,defer:se,dir:null,dirName:null,disabled:se,download:en,draggable:ge,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:se,formTarget:null,headers:ue,height:H,hidden:en,high:H,href:null,hrefLang:null,htmlFor:ue,httpEquiv:ue,id:null,imageSizes:null,imageSrcSet:null,inert:se,inputMode:null,integrity:null,is:null,isMap:se,itemId:null,itemProp:ue,itemRef:ue,itemScope:se,itemType:ue,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:se,low:H,manifest:null,max:null,maxLength:H,media:null,method:null,min:null,minLength:H,multiple:se,muted:se,name:null,nonce:null,noModule:se,noValidate:se,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:se,optimum:H,pattern:null,ping:ue,placeholder:null,playsInline:se,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:se,referrerPolicy:null,rel:ue,required:se,reversed:se,rows:H,rowSpan:H,sandbox:ue,scope:null,scoped:se,seamless:se,selected:se,shadowRootClonable:se,shadowRootDelegatesFocus:se,shadowRootMode:null,shape:null,size:H,sizes:null,slot:null,span:H,spellCheck:ge,src:null,srcDoc:null,srcLang:null,srcSet:null,start:H,step:null,style:null,tabIndex:H,target:null,title:null,translate:null,type:null,typeMustMatch:se,useMap:null,value:ge,width:H,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ue,axis:null,background:null,bgColor:null,border:H,borderColor:null,bottomMargin:H,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:se,declare:se,event:null,face:null,frame:null,frameBorder:null,hSpace:H,leftMargin:H,link:null,longDesc:null,lowSrc:null,marginHeight:H,marginWidth:H,noResize:se,noHref:se,noShade:se,noWrap:se,object:null,profile:null,prompt:null,rev:null,rightMargin:H,rules:null,scheme:null,scrolling:ge,standby:null,summary:null,text:null,topMargin:H,valueType:null,version:null,vAlign:null,vLink:null,vSpace:H,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:se,disableRemotePlayback:se,prefix:null,property:null,results:H,security:null,unselectable:null},space:"html",transform:Vs}),Wi=ot({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:we,accentHeight:H,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:H,amplitude:H,arabicForm:null,ascent:H,attributeName:null,attributeType:null,azimuth:H,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:H,by:null,calcMode:null,capHeight:H,className:ue,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:H,diffuseConstant:H,direction:null,display:null,dur:null,divisor:H,dominantBaseline:null,download:se,dx:null,dy:null,edgeMode:null,editable:null,elevation:H,enableBackground:null,end:null,event:null,exponent:H,externalResourcesRequired:null,fill:null,fillOpacity:H,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:it,g2:it,glyphName:it,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:H,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:H,horizOriginX:H,horizOriginY:H,id:null,ideographic:H,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:H,k:H,k1:H,k2:H,k3:H,k4:H,kernelMatrix:we,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:H,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:H,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:H,overlineThickness:H,paintOrder:null,panose1:null,path:null,pathLength:H,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ue,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:H,pointsAtY:H,pointsAtZ:H,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:we,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:we,rev:we,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:we,requiredFeatures:we,requiredFonts:we,requiredFormats:we,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:H,specularExponent:H,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:H,strikethroughThickness:H,string:null,stroke:null,strokeDashArray:we,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:H,strokeOpacity:H,strokeWidth:null,style:null,surfaceScale:H,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:we,tabIndex:H,tableValues:null,target:null,targetX:H,targetY:H,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:we,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:H,underlineThickness:H,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:H,values:null,vAlphabetic:H,vMathematical:H,vectorEffect:null,vHanging:H,vIdeographic:H,version:null,vertAdvY:H,vertOriginX:H,vertOriginY:H,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:H,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Ks}),Bs=ot({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,n){return"xlink:"+n.slice(5).toLowerCase()}}),Us=ot({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:Vs}),qs=ot({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,n){return"xml:"+n.slice(3).toLowerCase()}}),Ki={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Vi=/[A-Z]/g,zn=/-[a-z]/g,Bi=/^data[-\w.:]+$/i;function Ui(t,n){const s=Jt(n);let r=n,i=Ne;if(s in t.normal)return t.property[t.normal[s]];if(s.length>4&&s.slice(0,4)==="data"&&Bi.test(n)){if(n.charAt(4)==="-"){const a=n.slice(5).replace(zn,Yi);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=n.slice(4);if(!zn.test(a)){let l=a.replace(Vi,qi);l.charAt(0)!=="-"&&(l="-"+l),n="data"+l}}i=xn}return new i(r,n)}function qi(t){return"-"+t.toLowerCase()}function Yi(t){return t.charAt(1).toUpperCase()}const Xi=zs([Ws,zi,Bs,Us,qs],"html"),hn=zs([Ws,Wi,Bs,Us,qs],"svg");function Qi(t){return t.join(" ").trim()}var gn={},Wn=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Zi=/\n/g,Ji=/^\s*/,ea=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,ta=/^:\s*/,na=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,sa=/^[;\s]*/,ra=/^\s+|\s+$/g,ia=`
`,Kn="/",Vn="*",Qe="",aa="comment",la="declaration",oa=function(t,n){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];n=n||{};var s=1,r=1;function i(p){var h=p.match(Zi);h&&(s+=h.length);var v=p.lastIndexOf(ia);r=~v?p.length-v:r+p.length}function a(){var p={line:s,column:r};return function(h){return h.position=new l(p),m(),h}}function l(p){this.start=p,this.end={line:s,column:r},this.source=n.source}l.prototype.content=t;function o(p){var h=new Error(n.source+":"+s+":"+r+": "+p);if(h.reason=p,h.filename=n.source,h.line=s,h.column=r,h.source=t,!n.silent)throw h}function c(p){var h=p.exec(t);if(h){var v=h[0];return i(v),t=t.slice(v.length),h}}function m(){c(Ji)}function d(p){var h;for(p=p||[];h=x();)h!==!1&&p.push(h);return p}function x(){var p=a();if(!(Kn!=t.charAt(0)||Vn!=t.charAt(1))){for(var h=2;Qe!=t.charAt(h)&&(Vn!=t.charAt(h)||Kn!=t.charAt(h+1));)++h;if(h+=2,Qe===t.charAt(h-1))return o("End of comment missing");var v=t.slice(2,h-2);return r+=2,i(v),t=t.slice(h),r+=2,p({type:aa,comment:v})}}function g(){var p=a(),h=c(ea);if(h){if(x(),!c(ta))return o("property missing ':'");var v=c(na),N=p({type:la,property:Bn(h[0].replace(Wn,Qe)),value:v?Bn(v[0].replace(Wn,Qe)):Qe});return c(sa),N}}function u(){var p=[];d(p);for(var h;h=g();)h!==!1&&(p.push(h),d(p));return p}return m(),u()};function Bn(t){return t?t.replace(ra,Qe):Qe}var ca=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gn,"__esModule",{value:!0});gn.default=ma;const da=ca(oa);function ma(t,n){let s=null;if(!t||typeof t!="string")return s;const r=(0,da.default)(t),i=typeof n=="function";return r.forEach(a=>{if(a.type!=="declaration")return;const{property:l,value:o}=a;i?n(l,o,a):o&&(s=s||{},s[l]=o)}),s}var It={};Object.defineProperty(It,"__esModule",{value:!0});It.camelCase=void 0;var ua=/^--[a-zA-Z0-9_-]+$/,xa=/-([a-z])/g,ha=/^[^-]+$/,ga=/^-(webkit|moz|ms|o|khtml)-/,pa=/^-(ms)-/,fa=function(t){return!t||ha.test(t)||ua.test(t)},ba=function(t,n){return n.toUpperCase()},Un=function(t,n){return"".concat(n,"-")},ya=function(t,n){return n===void 0&&(n={}),fa(t)?t:(t=t.toLowerCase(),n.reactCompat?t=t.replace(pa,Un):t=t.replace(ga,Un),t.replace(xa,ba))};It.camelCase=ya;var ja=Tt&&Tt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},Na=ja(gn),va=It;function nn(t,n){var s={};return!t||typeof t!="string"||(0,Na.default)(t,function(r,i){r&&i&&(s[(0,va.camelCase)(r,n)]=i)}),s}nn.default=nn;var wa=nn;const ka=Fs(wa),Ys=Xs("end"),pn=Xs("start");function Xs(t){return n;function n(s){const r=s&&s.position&&s.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function Sa(t){const n=pn(t),s=Ys(t);if(n&&s)return{start:n,end:s}}function pt(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?qn(t.position):"start"in t||"end"in t?qn(t):"line"in t||"column"in t?sn(t):""}function sn(t){return Yn(t&&t.line)+":"+Yn(t&&t.column)}function qn(t){return sn(t&&t.start)+"-"+sn(t&&t.end)}function Yn(t){return t&&typeof t=="number"?t:1}class fe extends Error{constructor(n,s,r){super(),typeof s=="string"&&(r=s,s=void 0);let i="",a={},l=!1;if(s&&("line"in s&&"column"in s?a={place:s}:"start"in s&&"end"in s?a={place:s}:"type"in s?a={ancestors:[s],place:s.position}:a={...s}),typeof n=="string"?i=n:!a.cause&&n&&(l=!0,i=n.message,a.cause=n),!a.ruleId&&!a.source&&typeof r=="string"){const c=r.indexOf(":");c===-1?a.ruleId=r:(a.source=r.slice(0,c),a.ruleId=r.slice(c+1))}if(!a.place&&a.ancestors&&a.ancestors){const c=a.ancestors[a.ancestors.length-1];c&&(a.place=c.position)}const o=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=o?o.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=o?o.line:void 0,this.name=pt(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=l&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}fe.prototype.file="";fe.prototype.name="";fe.prototype.reason="";fe.prototype.message="";fe.prototype.stack="";fe.prototype.column=void 0;fe.prototype.line=void 0;fe.prototype.ancestors=void 0;fe.prototype.cause=void 0;fe.prototype.fatal=void 0;fe.prototype.place=void 0;fe.prototype.ruleId=void 0;fe.prototype.source=void 0;const fn={}.hasOwnProperty,Aa=new Map,Ma=/[A-Z]/g,Ra=new Set(["table","tbody","thead","tfoot","tr"]),Ca=new Set(["td","th"]),Qs="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Da(t,n){if(!n||n.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const s=n.filePath||void 0;let r;if(n.development){if(typeof n.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Oa(s,n.jsxDEV)}else{if(typeof n.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof n.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Ia(s,n.jsx,n.jsxs)}const i={Fragment:n.Fragment,ancestors:[],components:n.components||{},create:r,elementAttributeNameCase:n.elementAttributeNameCase||"react",evaluater:n.createEvaluater?n.createEvaluater():void 0,filePath:s,ignoreInvalidStyle:n.ignoreInvalidStyle||!1,passKeys:n.passKeys!==!1,passNode:n.passNode||!1,schema:n.space==="svg"?hn:Xi,stylePropertyNameCase:n.stylePropertyNameCase||"dom",tableCellAlignToStyle:n.tableCellAlignToStyle!==!1},a=Zs(i,t,void 0);return a&&typeof a!="string"?a:i.create(t,i.Fragment,{children:a||void 0},void 0)}function Zs(t,n,s){if(n.type==="element")return Ta(t,n,s);if(n.type==="mdxFlowExpression"||n.type==="mdxTextExpression")return Fa(t,n);if(n.type==="mdxJsxFlowElement"||n.type==="mdxJsxTextElement")return _a(t,n,s);if(n.type==="mdxjsEsm")return La(t,n);if(n.type==="root")return Pa(t,n,s);if(n.type==="text")return Ea(t,n)}function Ta(t,n,s){const r=t.schema;let i=r;n.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=hn,t.schema=i),t.ancestors.push(n);const a=er(t,n.tagName,!1),l=Ga(t,n);let o=yn(t,n);return Ra.has(n.tagName)&&(o=o.filter(function(c){return typeof c=="string"?!Hi(c):!0})),Js(t,l,a,n),bn(l,o),t.ancestors.pop(),t.schema=r,t.create(n,a,l,s)}function Fa(t,n){if(n.data&&n.data.estree&&t.evaluater){const r=n.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}jt(t,n.position)}function La(t,n){if(n.data&&n.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(n.data.estree);jt(t,n.position)}function _a(t,n,s){const r=t.schema;let i=r;n.name==="svg"&&r.space==="html"&&(i=hn,t.schema=i),t.ancestors.push(n);const a=n.name===null?t.Fragment:er(t,n.name,!0),l=Ha(t,n),o=yn(t,n);return Js(t,l,a,n),bn(l,o),t.ancestors.pop(),t.schema=r,t.create(n,a,l,s)}function Pa(t,n,s){const r={};return bn(r,yn(t,n)),t.create(n,t.Fragment,r,s)}function Ea(t,n){return n.value}function Js(t,n,s,r){typeof s!="string"&&s!==t.Fragment&&t.passNode&&(n.node=r)}function bn(t,n){if(n.length>0){const s=n.length>1?n:n[0];s&&(t.children=s)}}function Ia(t,n,s){return r;function r(i,a,l,o){const m=Array.isArray(l.children)?s:n;return o?m(a,l,o):m(a,l)}}function Oa(t,n){return s;function s(r,i,a,l){const o=Array.isArray(a.children),c=pn(r);return n(i,a,l,o,{columnNumber:c?c.column-1:void 0,fileName:t,lineNumber:c?c.line:void 0},void 0)}}function Ga(t,n){const s={};let r,i;for(i in n.properties)if(i!=="children"&&fn.call(n.properties,i)){const a=$a(t,i,n.properties[i]);if(a){const[l,o]=a;t.tableCellAlignToStyle&&l==="align"&&typeof o=="string"&&Ca.has(n.tagName)?r=o:s[l]=o}}if(r){const a=s.style||(s.style={});a[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return s}function Ha(t,n){const s={};for(const r of n.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const a=r.data.estree.body[0];a.type;const l=a.expression;l.type;const o=l.properties[0];o.type,Object.assign(s,t.evaluater.evaluateExpression(o.argument))}else jt(t,n.position);else{const i=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const o=r.value.data.estree.body[0];o.type,a=t.evaluater.evaluateExpression(o.expression)}else jt(t,n.position);else a=r.value===null?!0:r.value;s[i]=a}return s}function yn(t,n){const s=[];let r=-1;const i=t.passKeys?new Map:Aa;for(;++r<n.children.length;){const a=n.children[r];let l;if(t.passKeys){const c=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(c){const m=i.get(c)||0;l=c+"-"+m,i.set(c,m+1)}}const o=Zs(t,a,l);o!==void 0&&s.push(o)}return s}function $a(t,n,s){const r=Ui(t.schema,n);if(!(s==null||typeof s=="number"&&Number.isNaN(s))){if(Array.isArray(s)&&(s=r.commaSeparated?Pi(s):Qi(s)),r.property==="style"){let i=typeof s=="object"?s:za(t,String(s));return t.stylePropertyNameCase==="css"&&(i=Wa(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?Ki[r.property]||r.property:r.attribute,s]}}function za(t,n){try{return ka(n,{reactCompat:!0})}catch(s){if(t.ignoreInvalidStyle)return{};const r=s,i=new fe("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=Qs+"#cannot-parse-style-attribute",i}}function er(t,n,s){let r;if(!s)r={type:"Literal",value:n};else if(n.includes(".")){const i=n.split(".");let a=-1,l;for(;++a<i.length;){const o=Gn(i[a])?{type:"Identifier",name:i[a]}:{type:"Literal",value:i[a]};l=l?{type:"MemberExpression",object:l,property:o,computed:!!(a&&o.type==="Literal"),optional:!1}:o}r=l}else r=Gn(n)&&!/^[a-z]/.test(n)?{type:"Identifier",name:n}:{type:"Literal",value:n};if(r.type==="Literal"){const i=r.value;return fn.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);jt(t)}function jt(t,n){const s=new fe("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:n,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw s.file=t.filePath||void 0,s.url=Qs+"#cannot-handle-mdx-estrees-without-createevaluater",s}function Wa(t){const n={};let s;for(s in t)fn.call(t,s)&&(n[Ka(s)]=t[s]);return n}function Ka(t){let n=t.replace(Ma,Va);return n.slice(0,3)==="ms-"&&(n="-"+n),n}function Va(t){return"-"+t.toLowerCase()}const Wt={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Ba={};function Ua(t,n){const s=n||Ba,r=typeof s.includeImageAlt=="boolean"?s.includeImageAlt:!0,i=typeof s.includeHtml=="boolean"?s.includeHtml:!0;return tr(t,r,i)}function tr(t,n,s){if(qa(t)){if("value"in t)return t.type==="html"&&!s?"":t.value;if(n&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Xn(t.children,n,s)}return Array.isArray(t)?Xn(t,n,s):""}function Xn(t,n,s){const r=[];let i=-1;for(;++i<t.length;)r[i]=tr(t[i],n,s);return r.join("")}function qa(t){return!!(t&&typeof t=="object")}const Qn=document.createElement("i");function jn(t){const n="&"+t+";";Qn.innerHTML=n;const s=Qn.textContent;return s.charCodeAt(s.length-1)===59&&t!=="semi"||s===n?!1:s}function Ee(t,n,s,r){const i=t.length;let a=0,l;if(n<0?n=-n>i?0:i+n:n=n>i?i:n,s=s>0?s:0,r.length<1e4)l=Array.from(r),l.unshift(n,s),t.splice(...l);else for(s&&t.splice(n,s);a<r.length;)l=r.slice(a,a+1e4),l.unshift(n,0),t.splice(...l),a+=1e4,n+=1e4}function Ae(t,n){return t.length>0?(Ee(t,t.length,0,n),t):n}const Zn={}.hasOwnProperty;function Ya(t){const n={};let s=-1;for(;++s<t.length;)Xa(n,t[s]);return n}function Xa(t,n){let s;for(s in n){const i=(Zn.call(t,s)?t[s]:void 0)||(t[s]={}),a=n[s];let l;if(a)for(l in a){Zn.call(i,l)||(i[l]=[]);const o=a[l];Qa(i[l],Array.isArray(o)?o:o?[o]:[])}}}function Qa(t,n){let s=-1;const r=[];for(;++s<n.length;)(n[s].add==="after"?t:r).push(n[s]);Ee(t,0,0,r)}function nr(t,n){const s=Number.parseInt(t,n);return s<9||s===11||s>13&&s<32||s>126&&s<160||s>55295&&s<57344||s>64975&&s<65008||(s&65535)===65535||(s&65535)===65534||s>1114111?"�":String.fromCodePoint(s)}function at(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Pe=Ve(/[A-Za-z]/),ke=Ve(/[\dA-Za-z]/),Za=Ve(/[#-'*+\--9=?A-Z^-~]/);function rn(t){return t!==null&&(t<32||t===127)}const an=Ve(/\d/),Ja=Ve(/[\dA-Fa-f]/),el=Ve(/[!-/:-@[-`{-~]/);function ee(t){return t!==null&&t<-2}function je(t){return t!==null&&(t<0||t===32)}function le(t){return t===-2||t===-1||t===32}const tl=Ve(/\p{P}|\p{S}/u),nl=Ve(/\s/);function Ve(t){return n;function n(s){return s!==null&&s>-1&&t.test(String.fromCharCode(s))}}function ct(t){const n=[];let s=-1,r=0,i=0;for(;++s<t.length;){const a=t.charCodeAt(s);let l="";if(a===37&&ke(t.charCodeAt(s+1))&&ke(t.charCodeAt(s+2)))i=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(l=String.fromCharCode(a));else if(a>55295&&a<57344){const o=t.charCodeAt(s+1);a<56320&&o>56319&&o<57344?(l=String.fromCharCode(a,o),i=1):l="�"}else l=String.fromCharCode(a);l&&(n.push(t.slice(r,s),encodeURIComponent(l)),r=s+i+1,l=""),i&&(s+=i,i=0)}return n.join("")+t.slice(r)}function xe(t,n,s,r){const i=r?r-1:Number.POSITIVE_INFINITY;let a=0;return l;function l(c){return le(c)?(t.enter(s),o(c)):n(c)}function o(c){return le(c)&&a++<i?(t.consume(c),o):(t.exit(s),n(c))}}const sl={tokenize:rl};function rl(t){const n=t.attempt(this.parser.constructs.contentInitial,r,i);let s;return n;function r(o){if(o===null){t.consume(o);return}return t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),xe(t,n,"linePrefix")}function i(o){return t.enter("paragraph"),a(o)}function a(o){const c=t.enter("chunkText",{contentType:"text",previous:s});return s&&(s.next=c),s=c,l(o)}function l(o){if(o===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(o);return}return ee(o)?(t.consume(o),t.exit("chunkText"),a):(t.consume(o),l)}}const il={tokenize:al},Jn={tokenize:ll};function al(t){const n=this,s=[];let r=0,i,a,l;return o;function o(k){if(r<s.length){const E=s[r];return n.containerState=E[1],t.attempt(E[0].continuation,c,m)(k)}return m(k)}function c(k){if(r++,n.containerState._closeFlow){n.containerState._closeFlow=void 0,i&&y();const E=n.events.length;let M=E,A;for(;M--;)if(n.events[M][0]==="exit"&&n.events[M][1].type==="chunkFlow"){A=n.events[M][1].end;break}N(r);let V=E;for(;V<n.events.length;)n.events[V][1].end={...A},V++;return Ee(n.events,M+1,0,n.events.slice(E)),n.events.length=V,m(k)}return o(k)}function m(k){if(r===s.length){if(!i)return g(k);if(i.currentConstruct&&i.currentConstruct.concrete)return p(k);n.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return n.containerState={},t.check(Jn,d,x)(k)}function d(k){return i&&y(),N(r),g(k)}function x(k){return n.parser.lazy[n.now().line]=r!==s.length,l=n.now().offset,p(k)}function g(k){return n.containerState={},t.attempt(Jn,u,p)(k)}function u(k){return r++,s.push([n.currentConstruct,n.containerState]),g(k)}function p(k){if(k===null){i&&y(),N(0),t.consume(k);return}return i=i||n.parser.flow(n.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:a}),h(k)}function h(k){if(k===null){v(t.exit("chunkFlow"),!0),N(0),t.consume(k);return}return ee(k)?(t.consume(k),v(t.exit("chunkFlow")),r=0,n.interrupt=void 0,o):(t.consume(k),h)}function v(k,E){const M=n.sliceStream(k);if(E&&M.push(null),k.previous=a,a&&(a.next=k),a=k,i.defineSkip(k.start),i.write(M),n.parser.lazy[k.start.line]){let A=i.events.length;for(;A--;)if(i.events[A][1].start.offset<l&&(!i.events[A][1].end||i.events[A][1].end.offset>l))return;const V=n.events.length;let w=V,C,S;for(;w--;)if(n.events[w][0]==="exit"&&n.events[w][1].type==="chunkFlow"){if(C){S=n.events[w][1].end;break}C=!0}for(N(r),A=V;A<n.events.length;)n.events[A][1].end={...S},A++;Ee(n.events,w+1,0,n.events.slice(V)),n.events.length=A}}function N(k){let E=s.length;for(;E-- >k;){const M=s[E];n.containerState=M[1],M[0].exit.call(n,t)}s.length=k}function y(){i.write([null]),a=void 0,i=void 0,n.containerState._closeFlow=void 0}}function ll(t,n,s){return xe(t,t.attempt(this.parser.constructs.document,n,s),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function es(t){if(t===null||je(t)||nl(t))return 1;if(tl(t))return 2}function Nn(t,n,s){const r=[];let i=-1;for(;++i<t.length;){const a=t[i].resolveAll;a&&!r.includes(a)&&(n=a(n,s),r.push(a))}return n}const ln={name:"attention",resolveAll:ol,tokenize:cl};function ol(t,n){let s=-1,r,i,a,l,o,c,m,d;for(;++s<t.length;)if(t[s][0]==="enter"&&t[s][1].type==="attentionSequence"&&t[s][1]._close){for(r=s;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&n.sliceSerialize(t[r][1]).charCodeAt(0)===n.sliceSerialize(t[s][1]).charCodeAt(0)){if((t[r][1]._close||t[s][1]._open)&&(t[s][1].end.offset-t[s][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[s][1].end.offset-t[s][1].start.offset)%3))continue;c=t[r][1].end.offset-t[r][1].start.offset>1&&t[s][1].end.offset-t[s][1].start.offset>1?2:1;const x={...t[r][1].end},g={...t[s][1].start};ts(x,-c),ts(g,c),l={type:c>1?"strongSequence":"emphasisSequence",start:x,end:{...t[r][1].end}},o={type:c>1?"strongSequence":"emphasisSequence",start:{...t[s][1].start},end:g},a={type:c>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[s][1].start}},i={type:c>1?"strong":"emphasis",start:{...l.start},end:{...o.end}},t[r][1].end={...l.start},t[s][1].start={...o.end},m=[],t[r][1].end.offset-t[r][1].start.offset&&(m=Ae(m,[["enter",t[r][1],n],["exit",t[r][1],n]])),m=Ae(m,[["enter",i,n],["enter",l,n],["exit",l,n],["enter",a,n]]),m=Ae(m,Nn(n.parser.constructs.insideSpan.null,t.slice(r+1,s),n)),m=Ae(m,[["exit",a,n],["enter",o,n],["exit",o,n],["exit",i,n]]),t[s][1].end.offset-t[s][1].start.offset?(d=2,m=Ae(m,[["enter",t[s][1],n],["exit",t[s][1],n]])):d=0,Ee(t,r-1,s-r+3,m),s=r+m.length-d-2;break}}for(s=-1;++s<t.length;)t[s][1].type==="attentionSequence"&&(t[s][1].type="data");return t}function cl(t,n){const s=this.parser.constructs.attentionMarkers.null,r=this.previous,i=es(r);let a;return l;function l(c){return a=c,t.enter("attentionSequence"),o(c)}function o(c){if(c===a)return t.consume(c),o;const m=t.exit("attentionSequence"),d=es(c),x=!d||d===2&&i||s.includes(c),g=!i||i===2&&d||s.includes(r);return m._open=!!(a===42?x:x&&(i||!g)),m._close=!!(a===42?g:g&&(d||!x)),n(c)}}function ts(t,n){t.column+=n,t.offset+=n,t._bufferIndex+=n}const dl={name:"autolink",tokenize:ml};function ml(t,n,s){let r=0;return i;function i(u){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(u),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),a}function a(u){return Pe(u)?(t.consume(u),l):u===64?s(u):m(u)}function l(u){return u===43||u===45||u===46||ke(u)?(r=1,o(u)):m(u)}function o(u){return u===58?(t.consume(u),r=0,c):(u===43||u===45||u===46||ke(u))&&r++<32?(t.consume(u),o):(r=0,m(u))}function c(u){return u===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(u),t.exit("autolinkMarker"),t.exit("autolink"),n):u===null||u===32||u===60||rn(u)?s(u):(t.consume(u),c)}function m(u){return u===64?(t.consume(u),d):Za(u)?(t.consume(u),m):s(u)}function d(u){return ke(u)?x(u):s(u)}function x(u){return u===46?(t.consume(u),r=0,d):u===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(u),t.exit("autolinkMarker"),t.exit("autolink"),n):g(u)}function g(u){if((u===45||ke(u))&&r++<63){const p=u===45?g:x;return t.consume(u),p}return s(u)}}const Ot={partial:!0,tokenize:ul};function ul(t,n,s){return r;function r(a){return le(a)?xe(t,i,"linePrefix")(a):i(a)}function i(a){return a===null||ee(a)?n(a):s(a)}}const sr={continuation:{tokenize:hl},exit:gl,name:"blockQuote",tokenize:xl};function xl(t,n,s){const r=this;return i;function i(l){if(l===62){const o=r.containerState;return o.open||(t.enter("blockQuote",{_container:!0}),o.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(l),t.exit("blockQuoteMarker"),a}return s(l)}function a(l){return le(l)?(t.enter("blockQuotePrefixWhitespace"),t.consume(l),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),n):(t.exit("blockQuotePrefix"),n(l))}}function hl(t,n,s){const r=this;return i;function i(l){return le(l)?xe(t,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(l):a(l)}function a(l){return t.attempt(sr,n,s)(l)}}function gl(t){t.exit("blockQuote")}const rr={name:"characterEscape",tokenize:pl};function pl(t,n,s){return r;function r(a){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(a),t.exit("escapeMarker"),i}function i(a){return el(a)?(t.enter("characterEscapeValue"),t.consume(a),t.exit("characterEscapeValue"),t.exit("characterEscape"),n):s(a)}}const ir={name:"characterReference",tokenize:fl};function fl(t,n,s){const r=this;let i=0,a,l;return o;function o(x){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(x),t.exit("characterReferenceMarker"),c}function c(x){return x===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(x),t.exit("characterReferenceMarkerNumeric"),m):(t.enter("characterReferenceValue"),a=31,l=ke,d(x))}function m(x){return x===88||x===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(x),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),a=6,l=Ja,d):(t.enter("characterReferenceValue"),a=7,l=an,d(x))}function d(x){if(x===59&&i){const g=t.exit("characterReferenceValue");return l===ke&&!jn(r.sliceSerialize(g))?s(x):(t.enter("characterReferenceMarker"),t.consume(x),t.exit("characterReferenceMarker"),t.exit("characterReference"),n)}return l(x)&&i++<a?(t.consume(x),d):s(x)}}const ns={partial:!0,tokenize:yl},ss={concrete:!0,name:"codeFenced",tokenize:bl};function bl(t,n,s){const r=this,i={partial:!0,tokenize:M};let a=0,l=0,o;return c;function c(A){return m(A)}function m(A){const V=r.events[r.events.length-1];return a=V&&V[1].type==="linePrefix"?V[2].sliceSerialize(V[1],!0).length:0,o=A,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(A)}function d(A){return A===o?(l++,t.consume(A),d):l<3?s(A):(t.exit("codeFencedFenceSequence"),le(A)?xe(t,x,"whitespace")(A):x(A))}function x(A){return A===null||ee(A)?(t.exit("codeFencedFence"),r.interrupt?n(A):t.check(ns,h,E)(A)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),g(A))}function g(A){return A===null||ee(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),x(A)):le(A)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),xe(t,u,"whitespace")(A)):A===96&&A===o?s(A):(t.consume(A),g)}function u(A){return A===null||ee(A)?x(A):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),p(A))}function p(A){return A===null||ee(A)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),x(A)):A===96&&A===o?s(A):(t.consume(A),p)}function h(A){return t.attempt(i,E,v)(A)}function v(A){return t.enter("lineEnding"),t.consume(A),t.exit("lineEnding"),N}function N(A){return a>0&&le(A)?xe(t,y,"linePrefix",a+1)(A):y(A)}function y(A){return A===null||ee(A)?t.check(ns,h,E)(A):(t.enter("codeFlowValue"),k(A))}function k(A){return A===null||ee(A)?(t.exit("codeFlowValue"),y(A)):(t.consume(A),k)}function E(A){return t.exit("codeFenced"),n(A)}function M(A,V,w){let C=0;return S;function S(q){return A.enter("lineEnding"),A.consume(q),A.exit("lineEnding"),T}function T(q){return A.enter("codeFencedFence"),le(q)?xe(A,D,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(q):D(q)}function D(q){return q===o?(A.enter("codeFencedFenceSequence"),G(q)):w(q)}function G(q){return q===o?(C++,A.consume(q),G):C>=l?(A.exit("codeFencedFenceSequence"),le(q)?xe(A,Y,"whitespace")(q):Y(q)):w(q)}function Y(q){return q===null||ee(q)?(A.exit("codeFencedFence"),V(q)):w(q)}}}function yl(t,n,s){const r=this;return i;function i(l){return l===null?s(l):(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a)}function a(l){return r.parser.lazy[r.now().line]?s(l):n(l)}}const Kt={name:"codeIndented",tokenize:Nl},jl={partial:!0,tokenize:vl};function Nl(t,n,s){const r=this;return i;function i(m){return t.enter("codeIndented"),xe(t,a,"linePrefix",4+1)(m)}function a(m){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?l(m):s(m)}function l(m){return m===null?c(m):ee(m)?t.attempt(jl,l,c)(m):(t.enter("codeFlowValue"),o(m))}function o(m){return m===null||ee(m)?(t.exit("codeFlowValue"),l(m)):(t.consume(m),o)}function c(m){return t.exit("codeIndented"),n(m)}}function vl(t,n,s){const r=this;return i;function i(l){return r.parser.lazy[r.now().line]?s(l):ee(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),i):xe(t,a,"linePrefix",4+1)(l)}function a(l){const o=r.events[r.events.length-1];return o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?n(l):ee(l)?i(l):s(l)}}const wl={name:"codeText",previous:Sl,resolve:kl,tokenize:Al};function kl(t){let n=t.length-4,s=3,r,i;if((t[s][1].type==="lineEnding"||t[s][1].type==="space")&&(t[n][1].type==="lineEnding"||t[n][1].type==="space")){for(r=s;++r<n;)if(t[r][1].type==="codeTextData"){t[s][1].type="codeTextPadding",t[n][1].type="codeTextPadding",s+=2,n-=2;break}}for(r=s-1,n++;++r<=n;)i===void 0?r!==n&&t[r][1].type!=="lineEnding"&&(i=r):(r===n||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),n-=r-i-2,r=i+2),i=void 0);return t}function Sl(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Al(t,n,s){let r=0,i,a;return l;function l(x){return t.enter("codeText"),t.enter("codeTextSequence"),o(x)}function o(x){return x===96?(t.consume(x),r++,o):(t.exit("codeTextSequence"),c(x))}function c(x){return x===null?s(x):x===32?(t.enter("space"),t.consume(x),t.exit("space"),c):x===96?(a=t.enter("codeTextSequence"),i=0,d(x)):ee(x)?(t.enter("lineEnding"),t.consume(x),t.exit("lineEnding"),c):(t.enter("codeTextData"),m(x))}function m(x){return x===null||x===32||x===96||ee(x)?(t.exit("codeTextData"),c(x)):(t.consume(x),m)}function d(x){return x===96?(t.consume(x),i++,d):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),n(x)):(a.type="codeTextData",m(x))}}class Ml{constructor(n){this.left=n?[...n]:[],this.right=[]}get(n){if(n<0||n>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+n+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return n<this.left.length?this.left[n]:this.right[this.right.length-n+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(n,s){const r=s??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(n,r):n>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-n+this.left.length).reverse():this.left.slice(n).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(n,s,r){const i=s||0;this.setCursor(Math.trunc(n));const a=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&ht(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(n){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(n)}pushMany(n){this.setCursor(Number.POSITIVE_INFINITY),ht(this.left,n)}unshift(n){this.setCursor(0),this.right.push(n)}unshiftMany(n){this.setCursor(0),ht(this.right,n.reverse())}setCursor(n){if(!(n===this.left.length||n>this.left.length&&this.right.length===0||n<0&&this.left.length===0))if(n<this.left.length){const s=this.left.splice(n,Number.POSITIVE_INFINITY);ht(this.right,s.reverse())}else{const s=this.right.splice(this.left.length+this.right.length-n,Number.POSITIVE_INFINITY);ht(this.left,s.reverse())}}}function ht(t,n){let s=0;if(n.length<1e4)t.push(...n);else for(;s<n.length;)t.push(...n.slice(s,s+1e4)),s+=1e4}function ar(t){const n={};let s=-1,r,i,a,l,o,c,m;const d=new Ml(t);for(;++s<d.length;){for(;s in n;)s=n[s];if(r=d.get(s),s&&r[1].type==="chunkFlow"&&d.get(s-1)[1].type==="listItemPrefix"&&(c=r[1]._tokenizer.events,a=0,a<c.length&&c[a][1].type==="lineEndingBlank"&&(a+=2),a<c.length&&c[a][1].type==="content"))for(;++a<c.length&&c[a][1].type!=="content";)c[a][1].type==="chunkText"&&(c[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(n,Rl(d,s)),s=n[s],m=!0);else if(r[1]._container){for(a=s,i=void 0;a--;)if(l=d.get(a),l[1].type==="lineEnding"||l[1].type==="lineEndingBlank")l[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),l[1].type="lineEnding",i=a);else if(!(l[1].type==="linePrefix"||l[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},o=d.slice(i,s),o.unshift(r),d.splice(i,s-i+1,o))}}return Ee(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!m}function Rl(t,n){const s=t.get(n)[1],r=t.get(n)[2];let i=n-1;const a=[];let l=s._tokenizer;l||(l=r.parser[s.contentType](s.start),s._contentTypeTextTrailing&&(l._contentTypeTextTrailing=!0));const o=l.events,c=[],m={};let d,x,g=-1,u=s,p=0,h=0;const v=[h];for(;u;){for(;t.get(++i)[1]!==u;);a.push(i),u._tokenizer||(d=r.sliceStream(u),u.next||d.push(null),x&&l.defineSkip(u.start),u._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=!0),l.write(d),u._isInFirstContentOfListItem&&(l._gfmTasklistFirstContentOfListItem=void 0)),x=u,u=u.next}for(u=s;++g<o.length;)o[g][0]==="exit"&&o[g-1][0]==="enter"&&o[g][1].type===o[g-1][1].type&&o[g][1].start.line!==o[g][1].end.line&&(h=g+1,v.push(h),u._tokenizer=void 0,u.previous=void 0,u=u.next);for(l.events=[],u?(u._tokenizer=void 0,u.previous=void 0):v.pop(),g=v.length;g--;){const N=o.slice(v[g],v[g+1]),y=a.pop();c.push([y,y+N.length-1]),t.splice(y,2,N)}for(c.reverse(),g=-1;++g<c.length;)m[p+c[g][0]]=p+c[g][1],p+=c[g][1]-c[g][0]-1;return m}const Cl={resolve:Tl,tokenize:Fl},Dl={partial:!0,tokenize:Ll};function Tl(t){return ar(t),t}function Fl(t,n){let s;return r;function r(o){return t.enter("content"),s=t.enter("chunkContent",{contentType:"content"}),i(o)}function i(o){return o===null?a(o):ee(o)?t.check(Dl,l,a)(o):(t.consume(o),i)}function a(o){return t.exit("chunkContent"),t.exit("content"),n(o)}function l(o){return t.consume(o),t.exit("chunkContent"),s.next=t.enter("chunkContent",{contentType:"content",previous:s}),s=s.next,i}}function Ll(t,n,s){const r=this;return i;function i(l){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),xe(t,a,"linePrefix")}function a(l){if(l===null||ee(l))return s(l);const o=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&o&&o[1].type==="linePrefix"&&o[2].sliceSerialize(o[1],!0).length>=4?n(l):t.interrupt(r.parser.constructs.flow,s,n)(l)}}function lr(t,n,s,r,i,a,l,o,c){const m=c||Number.POSITIVE_INFINITY;let d=0;return x;function x(N){return N===60?(t.enter(r),t.enter(i),t.enter(a),t.consume(N),t.exit(a),g):N===null||N===32||N===41||rn(N)?s(N):(t.enter(r),t.enter(l),t.enter(o),t.enter("chunkString",{contentType:"string"}),h(N))}function g(N){return N===62?(t.enter(a),t.consume(N),t.exit(a),t.exit(i),t.exit(r),n):(t.enter(o),t.enter("chunkString",{contentType:"string"}),u(N))}function u(N){return N===62?(t.exit("chunkString"),t.exit(o),g(N)):N===null||N===60||ee(N)?s(N):(t.consume(N),N===92?p:u)}function p(N){return N===60||N===62||N===92?(t.consume(N),u):u(N)}function h(N){return!d&&(N===null||N===41||je(N))?(t.exit("chunkString"),t.exit(o),t.exit(l),t.exit(r),n(N)):d<m&&N===40?(t.consume(N),d++,h):N===41?(t.consume(N),d--,h):N===null||N===32||N===40||rn(N)?s(N):(t.consume(N),N===92?v:h)}function v(N){return N===40||N===41||N===92?(t.consume(N),h):h(N)}}function or(t,n,s,r,i,a){const l=this;let o=0,c;return m;function m(u){return t.enter(r),t.enter(i),t.consume(u),t.exit(i),t.enter(a),d}function d(u){return o>999||u===null||u===91||u===93&&!c||u===94&&!o&&"_hiddenFootnoteSupport"in l.parser.constructs?s(u):u===93?(t.exit(a),t.enter(i),t.consume(u),t.exit(i),t.exit(r),n):ee(u)?(t.enter("lineEnding"),t.consume(u),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),x(u))}function x(u){return u===null||u===91||u===93||ee(u)||o++>999?(t.exit("chunkString"),d(u)):(t.consume(u),c||(c=!le(u)),u===92?g:x)}function g(u){return u===91||u===92||u===93?(t.consume(u),o++,x):x(u)}}function cr(t,n,s,r,i,a){let l;return o;function o(g){return g===34||g===39||g===40?(t.enter(r),t.enter(i),t.consume(g),t.exit(i),l=g===40?41:g,c):s(g)}function c(g){return g===l?(t.enter(i),t.consume(g),t.exit(i),t.exit(r),n):(t.enter(a),m(g))}function m(g){return g===l?(t.exit(a),c(l)):g===null?s(g):ee(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),xe(t,m,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(g))}function d(g){return g===l||g===null||ee(g)?(t.exit("chunkString"),m(g)):(t.consume(g),g===92?x:d)}function x(g){return g===l||g===92?(t.consume(g),d):d(g)}}function ft(t,n){let s;return r;function r(i){return ee(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),s=!0,r):le(i)?xe(t,r,s?"linePrefix":"lineSuffix")(i):n(i)}}const _l={name:"definition",tokenize:El},Pl={partial:!0,tokenize:Il};function El(t,n,s){const r=this;let i;return a;function a(u){return t.enter("definition"),l(u)}function l(u){return or.call(r,t,o,s,"definitionLabel","definitionLabelMarker","definitionLabelString")(u)}function o(u){return i=at(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),u===58?(t.enter("definitionMarker"),t.consume(u),t.exit("definitionMarker"),c):s(u)}function c(u){return je(u)?ft(t,m)(u):m(u)}function m(u){return lr(t,d,s,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(u)}function d(u){return t.attempt(Pl,x,x)(u)}function x(u){return le(u)?xe(t,g,"whitespace")(u):g(u)}function g(u){return u===null||ee(u)?(t.exit("definition"),r.parser.defined.push(i),n(u)):s(u)}}function Il(t,n,s){return r;function r(o){return je(o)?ft(t,i)(o):s(o)}function i(o){return cr(t,a,s,"definitionTitle","definitionTitleMarker","definitionTitleString")(o)}function a(o){return le(o)?xe(t,l,"whitespace")(o):l(o)}function l(o){return o===null||ee(o)?n(o):s(o)}}const Ol={name:"hardBreakEscape",tokenize:Gl};function Gl(t,n,s){return r;function r(a){return t.enter("hardBreakEscape"),t.consume(a),i}function i(a){return ee(a)?(t.exit("hardBreakEscape"),n(a)):s(a)}}const Hl={name:"headingAtx",resolve:$l,tokenize:zl};function $l(t,n){let s=t.length-2,r=3,i,a;return t[r][1].type==="whitespace"&&(r+=2),s-2>r&&t[s][1].type==="whitespace"&&(s-=2),t[s][1].type==="atxHeadingSequence"&&(r===s-1||s-4>r&&t[s-2][1].type==="whitespace")&&(s-=r+1===s?2:4),s>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[s][1].end},a={type:"chunkText",start:t[r][1].start,end:t[s][1].end,contentType:"text"},Ee(t,r,s-r+1,[["enter",i,n],["enter",a,n],["exit",a,n],["exit",i,n]])),t}function zl(t,n,s){let r=0;return i;function i(d){return t.enter("atxHeading"),a(d)}function a(d){return t.enter("atxHeadingSequence"),l(d)}function l(d){return d===35&&r++<6?(t.consume(d),l):d===null||je(d)?(t.exit("atxHeadingSequence"),o(d)):s(d)}function o(d){return d===35?(t.enter("atxHeadingSequence"),c(d)):d===null||ee(d)?(t.exit("atxHeading"),n(d)):le(d)?xe(t,o,"whitespace")(d):(t.enter("atxHeadingText"),m(d))}function c(d){return d===35?(t.consume(d),c):(t.exit("atxHeadingSequence"),o(d))}function m(d){return d===null||d===35||je(d)?(t.exit("atxHeadingText"),o(d)):(t.consume(d),m)}}const Wl=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],rs=["pre","script","style","textarea"],Kl={concrete:!0,name:"htmlFlow",resolveTo:Ul,tokenize:ql},Vl={partial:!0,tokenize:Xl},Bl={partial:!0,tokenize:Yl};function Ul(t){let n=t.length;for(;n--&&!(t[n][0]==="enter"&&t[n][1].type==="htmlFlow"););return n>1&&t[n-2][1].type==="linePrefix"&&(t[n][1].start=t[n-2][1].start,t[n+1][1].start=t[n-2][1].start,t.splice(n-2,2)),t}function ql(t,n,s){const r=this;let i,a,l,o,c;return m;function m(f){return d(f)}function d(f){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(f),x}function x(f){return f===33?(t.consume(f),g):f===47?(t.consume(f),a=!0,h):f===63?(t.consume(f),i=3,r.interrupt?n:b):Pe(f)?(t.consume(f),l=String.fromCharCode(f),v):s(f)}function g(f){return f===45?(t.consume(f),i=2,u):f===91?(t.consume(f),i=5,o=0,p):Pe(f)?(t.consume(f),i=4,r.interrupt?n:b):s(f)}function u(f){return f===45?(t.consume(f),r.interrupt?n:b):s(f)}function p(f){const z="CDATA[";return f===z.charCodeAt(o++)?(t.consume(f),o===z.length?r.interrupt?n:D:p):s(f)}function h(f){return Pe(f)?(t.consume(f),l=String.fromCharCode(f),v):s(f)}function v(f){if(f===null||f===47||f===62||je(f)){const z=f===47,U=l.toLowerCase();return!z&&!a&&rs.includes(U)?(i=1,r.interrupt?n(f):D(f)):Wl.includes(l.toLowerCase())?(i=6,z?(t.consume(f),N):r.interrupt?n(f):D(f)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?s(f):a?y(f):k(f))}return f===45||ke(f)?(t.consume(f),l+=String.fromCharCode(f),v):s(f)}function N(f){return f===62?(t.consume(f),r.interrupt?n:D):s(f)}function y(f){return le(f)?(t.consume(f),y):S(f)}function k(f){return f===47?(t.consume(f),S):f===58||f===95||Pe(f)?(t.consume(f),E):le(f)?(t.consume(f),k):S(f)}function E(f){return f===45||f===46||f===58||f===95||ke(f)?(t.consume(f),E):M(f)}function M(f){return f===61?(t.consume(f),A):le(f)?(t.consume(f),M):k(f)}function A(f){return f===null||f===60||f===61||f===62||f===96?s(f):f===34||f===39?(t.consume(f),c=f,V):le(f)?(t.consume(f),A):w(f)}function V(f){return f===c?(t.consume(f),c=null,C):f===null||ee(f)?s(f):(t.consume(f),V)}function w(f){return f===null||f===34||f===39||f===47||f===60||f===61||f===62||f===96||je(f)?M(f):(t.consume(f),w)}function C(f){return f===47||f===62||le(f)?k(f):s(f)}function S(f){return f===62?(t.consume(f),T):s(f)}function T(f){return f===null||ee(f)?D(f):le(f)?(t.consume(f),T):s(f)}function D(f){return f===45&&i===2?(t.consume(f),R):f===60&&i===1?(t.consume(f),$):f===62&&i===4?(t.consume(f),X):f===63&&i===3?(t.consume(f),b):f===93&&i===5?(t.consume(f),P):ee(f)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(Vl,O,G)(f)):f===null||ee(f)?(t.exit("htmlFlowData"),G(f)):(t.consume(f),D)}function G(f){return t.check(Bl,Y,O)(f)}function Y(f){return t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),q}function q(f){return f===null||ee(f)?G(f):(t.enter("htmlFlowData"),D(f))}function R(f){return f===45?(t.consume(f),b):D(f)}function $(f){return f===47?(t.consume(f),l="",W):D(f)}function W(f){if(f===62){const z=l.toLowerCase();return rs.includes(z)?(t.consume(f),X):D(f)}return Pe(f)&&l.length<8?(t.consume(f),l+=String.fromCharCode(f),W):D(f)}function P(f){return f===93?(t.consume(f),b):D(f)}function b(f){return f===62?(t.consume(f),X):f===45&&i===2?(t.consume(f),b):D(f)}function X(f){return f===null||ee(f)?(t.exit("htmlFlowData"),O(f)):(t.consume(f),X)}function O(f){return t.exit("htmlFlow"),n(f)}}function Yl(t,n,s){const r=this;return i;function i(l){return ee(l)?(t.enter("lineEnding"),t.consume(l),t.exit("lineEnding"),a):s(l)}function a(l){return r.parser.lazy[r.now().line]?s(l):n(l)}}function Xl(t,n,s){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(Ot,n,s)}}const Ql={name:"htmlText",tokenize:Zl};function Zl(t,n,s){const r=this;let i,a,l;return o;function o(b){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(b),c}function c(b){return b===33?(t.consume(b),m):b===47?(t.consume(b),M):b===63?(t.consume(b),k):Pe(b)?(t.consume(b),w):s(b)}function m(b){return b===45?(t.consume(b),d):b===91?(t.consume(b),a=0,p):Pe(b)?(t.consume(b),y):s(b)}function d(b){return b===45?(t.consume(b),u):s(b)}function x(b){return b===null?s(b):b===45?(t.consume(b),g):ee(b)?(l=x,$(b)):(t.consume(b),x)}function g(b){return b===45?(t.consume(b),u):x(b)}function u(b){return b===62?R(b):b===45?g(b):x(b)}function p(b){const X="CDATA[";return b===X.charCodeAt(a++)?(t.consume(b),a===X.length?h:p):s(b)}function h(b){return b===null?s(b):b===93?(t.consume(b),v):ee(b)?(l=h,$(b)):(t.consume(b),h)}function v(b){return b===93?(t.consume(b),N):h(b)}function N(b){return b===62?R(b):b===93?(t.consume(b),N):h(b)}function y(b){return b===null||b===62?R(b):ee(b)?(l=y,$(b)):(t.consume(b),y)}function k(b){return b===null?s(b):b===63?(t.consume(b),E):ee(b)?(l=k,$(b)):(t.consume(b),k)}function E(b){return b===62?R(b):k(b)}function M(b){return Pe(b)?(t.consume(b),A):s(b)}function A(b){return b===45||ke(b)?(t.consume(b),A):V(b)}function V(b){return ee(b)?(l=V,$(b)):le(b)?(t.consume(b),V):R(b)}function w(b){return b===45||ke(b)?(t.consume(b),w):b===47||b===62||je(b)?C(b):s(b)}function C(b){return b===47?(t.consume(b),R):b===58||b===95||Pe(b)?(t.consume(b),S):ee(b)?(l=C,$(b)):le(b)?(t.consume(b),C):R(b)}function S(b){return b===45||b===46||b===58||b===95||ke(b)?(t.consume(b),S):T(b)}function T(b){return b===61?(t.consume(b),D):ee(b)?(l=T,$(b)):le(b)?(t.consume(b),T):C(b)}function D(b){return b===null||b===60||b===61||b===62||b===96?s(b):b===34||b===39?(t.consume(b),i=b,G):ee(b)?(l=D,$(b)):le(b)?(t.consume(b),D):(t.consume(b),Y)}function G(b){return b===i?(t.consume(b),i=void 0,q):b===null?s(b):ee(b)?(l=G,$(b)):(t.consume(b),G)}function Y(b){return b===null||b===34||b===39||b===60||b===61||b===96?s(b):b===47||b===62||je(b)?C(b):(t.consume(b),Y)}function q(b){return b===47||b===62||je(b)?C(b):s(b)}function R(b){return b===62?(t.consume(b),t.exit("htmlTextData"),t.exit("htmlText"),n):s(b)}function $(b){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(b),t.exit("lineEnding"),W}function W(b){return le(b)?xe(t,P,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(b):P(b)}function P(b){return t.enter("htmlTextData"),l(b)}}const vn={name:"labelEnd",resolveAll:no,resolveTo:so,tokenize:ro},Jl={tokenize:io},eo={tokenize:ao},to={tokenize:lo};function no(t){let n=-1;const s=[];for(;++n<t.length;){const r=t[n][1];if(s.push(t[n]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",n+=i}}return t.length!==s.length&&Ee(t,0,t.length,s),t}function so(t,n){let s=t.length,r=0,i,a,l,o;for(;s--;)if(i=t[s][1],a){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[s][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(l){if(t[s][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(a=s,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(l=s);const c={type:t[a][1].type==="labelLink"?"link":"image",start:{...t[a][1].start},end:{...t[t.length-1][1].end}},m={type:"label",start:{...t[a][1].start},end:{...t[l][1].end}},d={type:"labelText",start:{...t[a+r+2][1].end},end:{...t[l-2][1].start}};return o=[["enter",c,n],["enter",m,n]],o=Ae(o,t.slice(a+1,a+r+3)),o=Ae(o,[["enter",d,n]]),o=Ae(o,Nn(n.parser.constructs.insideSpan.null,t.slice(a+r+4,l-3),n)),o=Ae(o,[["exit",d,n],t[l-2],t[l-1],["exit",m,n]]),o=Ae(o,t.slice(l+1)),o=Ae(o,[["exit",c,n]]),Ee(t,a,t.length,o),t}function ro(t,n,s){const r=this;let i=r.events.length,a,l;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){a=r.events[i][1];break}return o;function o(g){return a?a._inactive?x(g):(l=r.parser.defined.includes(at(r.sliceSerialize({start:a.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(g),t.exit("labelMarker"),t.exit("labelEnd"),c):s(g)}function c(g){return g===40?t.attempt(Jl,d,l?d:x)(g):g===91?t.attempt(eo,d,l?m:x)(g):l?d(g):x(g)}function m(g){return t.attempt(to,d,x)(g)}function d(g){return n(g)}function x(g){return a._balanced=!0,s(g)}}function io(t,n,s){return r;function r(x){return t.enter("resource"),t.enter("resourceMarker"),t.consume(x),t.exit("resourceMarker"),i}function i(x){return je(x)?ft(t,a)(x):a(x)}function a(x){return x===41?d(x):lr(t,l,o,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(x)}function l(x){return je(x)?ft(t,c)(x):d(x)}function o(x){return s(x)}function c(x){return x===34||x===39||x===40?cr(t,m,s,"resourceTitle","resourceTitleMarker","resourceTitleString")(x):d(x)}function m(x){return je(x)?ft(t,d)(x):d(x)}function d(x){return x===41?(t.enter("resourceMarker"),t.consume(x),t.exit("resourceMarker"),t.exit("resource"),n):s(x)}}function ao(t,n,s){const r=this;return i;function i(o){return or.call(r,t,a,l,"reference","referenceMarker","referenceString")(o)}function a(o){return r.parser.defined.includes(at(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?n(o):s(o)}function l(o){return s(o)}}function lo(t,n,s){return r;function r(a){return t.enter("reference"),t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),i}function i(a){return a===93?(t.enter("referenceMarker"),t.consume(a),t.exit("referenceMarker"),t.exit("reference"),n):s(a)}}const oo={name:"labelStartImage",resolveAll:vn.resolveAll,tokenize:co};function co(t,n,s){const r=this;return i;function i(o){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(o),t.exit("labelImageMarker"),a}function a(o){return o===91?(t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelImage"),l):s(o)}function l(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?s(o):n(o)}}const mo={name:"labelStartLink",resolveAll:vn.resolveAll,tokenize:uo};function uo(t,n,s){const r=this;return i;function i(l){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(l),t.exit("labelMarker"),t.exit("labelLink"),a}function a(l){return l===94&&"_hiddenFootnoteSupport"in r.parser.constructs?s(l):n(l)}}const Vt={name:"lineEnding",tokenize:xo};function xo(t,n){return s;function s(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),xe(t,n,"linePrefix")}}const Ct={name:"thematicBreak",tokenize:ho};function ho(t,n,s){let r=0,i;return a;function a(m){return t.enter("thematicBreak"),l(m)}function l(m){return i=m,o(m)}function o(m){return m===i?(t.enter("thematicBreakSequence"),c(m)):r>=3&&(m===null||ee(m))?(t.exit("thematicBreak"),n(m)):s(m)}function c(m){return m===i?(t.consume(m),r++,c):(t.exit("thematicBreakSequence"),le(m)?xe(t,o,"whitespace")(m):o(m))}}const ye={continuation:{tokenize:bo},exit:jo,name:"list",tokenize:fo},go={partial:!0,tokenize:No},po={partial:!0,tokenize:yo};function fo(t,n,s){const r=this,i=r.events[r.events.length-1];let a=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,l=0;return o;function o(u){const p=r.containerState.type||(u===42||u===43||u===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||u===r.containerState.marker:an(u)){if(r.containerState.type||(r.containerState.type=p,t.enter(p,{_container:!0})),p==="listUnordered")return t.enter("listItemPrefix"),u===42||u===45?t.check(Ct,s,m)(u):m(u);if(!r.interrupt||u===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),c(u)}return s(u)}function c(u){return an(u)&&++l<10?(t.consume(u),c):(!r.interrupt||l<2)&&(r.containerState.marker?u===r.containerState.marker:u===41||u===46)?(t.exit("listItemValue"),m(u)):s(u)}function m(u){return t.enter("listItemMarker"),t.consume(u),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||u,t.check(Ot,r.interrupt?s:d,t.attempt(go,g,x))}function d(u){return r.containerState.initialBlankLine=!0,a++,g(u)}function x(u){return le(u)?(t.enter("listItemPrefixWhitespace"),t.consume(u),t.exit("listItemPrefixWhitespace"),g):s(u)}function g(u){return r.containerState.size=a+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,n(u)}}function bo(t,n,s){const r=this;return r.containerState._closeFlow=void 0,t.check(Ot,i,a);function i(o){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,xe(t,n,"listItemIndent",r.containerState.size+1)(o)}function a(o){return r.containerState.furtherBlankLines||!le(o)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,l(o)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(po,n,l)(o))}function l(o){return r.containerState._closeFlow=!0,r.interrupt=void 0,xe(t,t.attempt(ye,n,s),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o)}}function yo(t,n,s){const r=this;return xe(t,i,"listItemIndent",r.containerState.size+1);function i(a){const l=r.events[r.events.length-1];return l&&l[1].type==="listItemIndent"&&l[2].sliceSerialize(l[1],!0).length===r.containerState.size?n(a):s(a)}}function jo(t){t.exit(this.containerState.type)}function No(t,n,s){const r=this;return xe(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4+1);function i(a){const l=r.events[r.events.length-1];return!le(a)&&l&&l[1].type==="listItemPrefixWhitespace"?n(a):s(a)}}const is={name:"setextUnderline",resolveTo:vo,tokenize:wo};function vo(t,n){let s=t.length,r,i,a;for(;s--;)if(t[s][0]==="enter"){if(t[s][1].type==="content"){r=s;break}t[s][1].type==="paragraph"&&(i=s)}else t[s][1].type==="content"&&t.splice(s,1),!a&&t[s][1].type==="definition"&&(a=s);const l={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",a?(t.splice(i,0,["enter",l,n]),t.splice(a+1,0,["exit",t[r][1],n]),t[r][1].end={...t[a][1].end}):t[r][1]=l,t.push(["exit",l,n]),t}function wo(t,n,s){const r=this;let i;return a;function a(m){let d=r.events.length,x;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){x=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||x)?(t.enter("setextHeadingLine"),i=m,l(m)):s(m)}function l(m){return t.enter("setextHeadingLineSequence"),o(m)}function o(m){return m===i?(t.consume(m),o):(t.exit("setextHeadingLineSequence"),le(m)?xe(t,c,"lineSuffix")(m):c(m))}function c(m){return m===null||ee(m)?(t.exit("setextHeadingLine"),n(m)):s(m)}}const ko={tokenize:So};function So(t){const n=this,s=t.attempt(Ot,r,t.attempt(this.parser.constructs.flowInitial,i,xe(t,t.attempt(this.parser.constructs.flow,i,t.attempt(Cl,i)),"linePrefix")));return s;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEndingBlank"),t.consume(a),t.exit("lineEndingBlank"),n.currentConstruct=void 0,s}function i(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),n.currentConstruct=void 0,s}}const Ao={resolveAll:mr()},Mo=dr("string"),Ro=dr("text");function dr(t){return{resolveAll:mr(t==="text"?Co:void 0),tokenize:n};function n(s){const r=this,i=this.parser.constructs[t],a=s.attempt(i,l,o);return l;function l(d){return m(d)?a(d):o(d)}function o(d){if(d===null){s.consume(d);return}return s.enter("data"),s.consume(d),c}function c(d){return m(d)?(s.exit("data"),a(d)):(s.consume(d),c)}function m(d){if(d===null)return!0;const x=i[d];let g=-1;if(x)for(;++g<x.length;){const u=x[g];if(!u.previous||u.previous.call(r,r.previous))return!0}return!1}}}function mr(t){return n;function n(s,r){let i=-1,a;for(;++i<=s.length;)a===void 0?s[i]&&s[i][1].type==="data"&&(a=i,i++):(!s[i]||s[i][1].type!=="data")&&(i!==a+2&&(s[a][1].end=s[i-1][1].end,s.splice(a+2,i-a-2),i=a+2),a=void 0);return t?t(s,r):s}}function Co(t,n){let s=0;for(;++s<=t.length;)if((s===t.length||t[s][1].type==="lineEnding")&&t[s-1][1].type==="data"){const r=t[s-1][1],i=n.sliceStream(r);let a=i.length,l=-1,o=0,c;for(;a--;){const m=i[a];if(typeof m=="string"){for(l=m.length;m.charCodeAt(l-1)===32;)o++,l--;if(l)break;l=-1}else if(m===-2)c=!0,o++;else if(m!==-1){a++;break}}if(n._contentTypeTextTrailing&&s===t.length&&(o=0),o){const m={type:s===t.length||c||o<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?l:r.start._bufferIndex+l,_index:r.start._index+a,line:r.end.line,column:r.end.column-o,offset:r.end.offset-o},end:{...r.end}};r.end={...m.start},r.start.offset===r.end.offset?Object.assign(r,m):(t.splice(s,0,["enter",m,n],["exit",m,n]),s+=2)}s++}return t}const Do={42:ye,43:ye,45:ye,48:ye,49:ye,50:ye,51:ye,52:ye,53:ye,54:ye,55:ye,56:ye,57:ye,62:sr},To={91:_l},Fo={[-2]:Kt,[-1]:Kt,32:Kt},Lo={35:Hl,42:Ct,45:[is,Ct],60:Kl,61:is,95:Ct,96:ss,126:ss},_o={38:ir,92:rr},Po={[-5]:Vt,[-4]:Vt,[-3]:Vt,33:oo,38:ir,42:ln,60:[dl,Ql],91:mo,92:[Ol,rr],93:vn,95:ln,96:wl},Eo={null:[ln,Ao]},Io={null:[42,95]},Oo={null:[]},Go=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Io,contentInitial:To,disable:Oo,document:Do,flow:Lo,flowInitial:Fo,insideSpan:Eo,string:_o,text:Po},Symbol.toStringTag,{value:"Module"}));function Ho(t,n,s){let r={_bufferIndex:-1,_index:0,line:s&&s.line||1,column:s&&s.column||1,offset:s&&s.offset||0};const i={},a=[];let l=[],o=[];const c={attempt:V(M),check:V(A),consume:y,enter:k,exit:E,interrupt:V(A,{interrupt:!0})},m={code:null,containerState:{},defineSkip:h,events:[],now:p,parser:t,previous:null,sliceSerialize:g,sliceStream:u,write:x};let d=n.tokenize.call(m,c);return n.resolveAll&&a.push(n),m;function x(T){return l=Ae(l,T),v(),l[l.length-1]!==null?[]:(w(n,0),m.events=Nn(a,m.events,m),m.events)}function g(T,D){return zo(u(T),D)}function u(T){return $o(l,T)}function p(){const{_bufferIndex:T,_index:D,line:G,column:Y,offset:q}=r;return{_bufferIndex:T,_index:D,line:G,column:Y,offset:q}}function h(T){i[T.line]=T.column,S()}function v(){let T;for(;r._index<l.length;){const D=l[r._index];if(typeof D=="string")for(T=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===T&&r._bufferIndex<D.length;)N(D.charCodeAt(r._bufferIndex));else N(D)}}function N(T){d=d(T)}function y(T){ee(T)?(r.line++,r.column=1,r.offset+=T===-3?2:1,S()):T!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===l[r._index].length&&(r._bufferIndex=-1,r._index++)),m.previous=T}function k(T,D){const G=D||{};return G.type=T,G.start=p(),m.events.push(["enter",G,m]),o.push(G),G}function E(T){const D=o.pop();return D.end=p(),m.events.push(["exit",D,m]),D}function M(T,D){w(T,D.from)}function A(T,D){D.restore()}function V(T,D){return G;function G(Y,q,R){let $,W,P,b;return Array.isArray(Y)?O(Y):"tokenize"in Y?O([Y]):X(Y);function X(F){return _;function _(K){const ne=K!==null&&F[K],Q=K!==null&&F.null,he=[...Array.isArray(ne)?ne:ne?[ne]:[],...Array.isArray(Q)?Q:Q?[Q]:[]];return O(he)(K)}}function O(F){return $=F,W=0,F.length===0?R:f(F[W])}function f(F){return _;function _(K){return b=C(),P=F,F.partial||(m.currentConstruct=F),F.name&&m.parser.constructs.disable.null.includes(F.name)?U():F.tokenize.call(D?Object.assign(Object.create(m),D):m,c,z,U)(K)}}function z(F){return T(P,b),q}function U(F){return b.restore(),++W<$.length?f($[W]):R}}}function w(T,D){T.resolveAll&&!a.includes(T)&&a.push(T),T.resolve&&Ee(m.events,D,m.events.length-D,T.resolve(m.events.slice(D),m)),T.resolveTo&&(m.events=T.resolveTo(m.events,m))}function C(){const T=p(),D=m.previous,G=m.currentConstruct,Y=m.events.length,q=Array.from(o);return{from:Y,restore:R};function R(){r=T,m.previous=D,m.currentConstruct=G,m.events.length=Y,o=q,S()}}function S(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function $o(t,n){const s=n.start._index,r=n.start._bufferIndex,i=n.end._index,a=n.end._bufferIndex;let l;if(s===i)l=[t[s].slice(r,a)];else{if(l=t.slice(s,i),r>-1){const o=l[0];typeof o=="string"?l[0]=o.slice(r):l.shift()}a>0&&l.push(t[i].slice(0,a))}return l}function zo(t,n){let s=-1;const r=[];let i;for(;++s<t.length;){const a=t[s];let l;if(typeof a=="string")l=a;else switch(a){case-5:{l="\r";break}case-4:{l=`
`;break}case-3:{l=`\r
`;break}case-2:{l=n?" ":"	";break}case-1:{if(!n&&i)continue;l=" ";break}default:l=String.fromCharCode(a)}i=a===-2,r.push(l)}return r.join("")}function Wo(t){const r={constructs:Ya([Go,...(t||{}).extensions||[]]),content:i(sl),defined:[],document:i(il),flow:i(ko),lazy:{},string:i(Mo),text:i(Ro)};return r;function i(a){return l;function l(o){return Ho(r,a,o)}}}function Ko(t){for(;!ar(t););return t}const as=/[\0\t\n\r]/g;function Vo(){let t=1,n="",s=!0,r;return i;function i(a,l,o){const c=[];let m,d,x,g,u;for(a=n+(typeof a=="string"?a.toString():new TextDecoder(l||void 0).decode(a)),x=0,n="",s&&(a.charCodeAt(0)===65279&&x++,s=void 0);x<a.length;){if(as.lastIndex=x,m=as.exec(a),g=m&&m.index!==void 0?m.index:a.length,u=a.charCodeAt(g),!m){n=a.slice(x);break}if(u===10&&x===g&&r)c.push(-3),r=void 0;else switch(r&&(c.push(-5),r=void 0),x<g&&(c.push(a.slice(x,g)),t+=g-x),u){case 0:{c.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,c.push(-2);t++<d;)c.push(-1);break}case 10:{c.push(-4),t=1;break}default:r=!0,t=1}x=g+1}return o&&(r&&c.push(-5),n&&c.push(n),c.push(null)),c}}const Bo=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function Uo(t){return t.replace(Bo,qo)}function qo(t,n,s){if(n)return n;if(s.charCodeAt(0)===35){const i=s.charCodeAt(1),a=i===120||i===88;return nr(s.slice(a?2:1),a?16:10)}return jn(s)||t}const ur={}.hasOwnProperty;function Yo(t,n,s){return typeof n!="string"&&(s=n,n=void 0),Xo(s)(Ko(Wo(s).document().write(Vo()(t,n,!0))))}function Xo(t){const n={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a(kt),autolinkProtocol:C,autolinkEmail:C,atxHeading:a(Re),blockQuote:a(Q),characterEscape:C,characterReference:C,codeFenced:a(he),codeFencedFenceInfo:l,codeFencedFenceMeta:l,codeIndented:a(he,l),codeText:a(Fe,l),codeTextData:C,data:C,codeFlowValue:C,definition:a(Je),definitionDestinationString:l,definitionLabelString:l,definitionTitleString:l,emphasis:a($t),hardBreakEscape:a(Be),hardBreakTrailing:a(Be),htmlFlow:a(Ue,l),htmlFlowData:C,htmlText:a(Ue,l),htmlTextData:C,image:a(be),label:l,link:a(kt),listItem:a(tt),listItemValue:g,listOrdered:a(et,x),listUnordered:a(et),paragraph:a(dt),reference:f,referenceString:l,resourceDestinationString:l,resourceTitleString:l,setextHeading:a(Re),strong:a(qe),thematicBreak:a(mt)},exit:{atxHeading:c(),atxHeadingSequence:M,autolink:c(),autolinkEmail:ne,autolinkProtocol:K,blockQuote:c(),characterEscapeValue:S,characterReferenceMarkerHexadecimal:U,characterReferenceMarkerNumeric:U,characterReferenceValue:F,characterReference:_,codeFenced:c(v),codeFencedFence:h,codeFencedFenceInfo:u,codeFencedFenceMeta:p,codeFlowValue:S,codeIndented:c(N),codeText:c(q),codeTextData:S,data:S,definition:c(),definitionDestinationString:E,definitionLabelString:y,definitionTitleString:k,emphasis:c(),hardBreakEscape:c(D),hardBreakTrailing:c(D),htmlFlow:c(G),htmlFlowData:S,htmlText:c(Y),htmlTextData:S,image:c($),label:P,labelText:W,lineEnding:T,link:c(R),listItem:c(),listOrdered:c(),listUnordered:c(),paragraph:c(),referenceString:z,resourceDestinationString:b,resourceTitleString:X,resource:O,setextHeading:c(w),setextHeadingLineSequence:V,setextHeadingText:A,strong:c(),thematicBreak:c()}};xr(n,(t||{}).mdastExtensions||[]);const s={};return r;function r(L){let B={type:"root",children:[]};const te={stack:[B],tokenStack:[],config:n,enter:o,exit:m,buffer:l,resume:d,data:s},re=[];let me=-1;for(;++me<L.length;)if(L[me][1].type==="listOrdered"||L[me][1].type==="listUnordered")if(L[me][0]==="enter")re.push(me);else{const Ce=re.pop();me=i(L,Ce,me)}for(me=-1;++me<L.length;){const Ce=n[L[me][0]];ur.call(Ce,L[me][1].type)&&Ce[L[me][1].type].call(Object.assign({sliceSerialize:L[me][2].sliceSerialize},te),L[me][1])}if(te.tokenStack.length>0){const Ce=te.tokenStack[te.tokenStack.length-1];(Ce[1]||ls).call(te,void 0,Ce[0])}for(B.position={start:ze(L.length>0?L[0][1].start:{line:1,column:1,offset:0}),end:ze(L.length>0?L[L.length-2][1].end:{line:1,column:1,offset:0})},me=-1;++me<n.transforms.length;)B=n.transforms[me](B)||B;return B}function i(L,B,te){let re=B-1,me=-1,Ce=!1,Ye,Oe,ut,xt;for(;++re<=te;){const ve=L[re];switch(ve[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{ve[0]==="enter"?me++:me--,xt=void 0;break}case"lineEndingBlank":{ve[0]==="enter"&&(Ye&&!xt&&!me&&!ut&&(ut=re),xt=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:xt=void 0}if(!me&&ve[0]==="enter"&&ve[1].type==="listItemPrefix"||me===-1&&ve[0]==="exit"&&(ve[1].type==="listUnordered"||ve[1].type==="listOrdered")){if(Ye){let nt=re;for(Oe=void 0;nt--;){const Ge=L[nt];if(Ge[1].type==="lineEnding"||Ge[1].type==="lineEndingBlank"){if(Ge[0]==="exit")continue;Oe&&(L[Oe][1].type="lineEndingBlank",Ce=!0),Ge[1].type="lineEnding",Oe=nt}else if(!(Ge[1].type==="linePrefix"||Ge[1].type==="blockQuotePrefix"||Ge[1].type==="blockQuotePrefixWhitespace"||Ge[1].type==="blockQuoteMarker"||Ge[1].type==="listItemIndent"))break}ut&&(!Oe||ut<Oe)&&(Ye._spread=!0),Ye.end=Object.assign({},Oe?L[Oe][1].start:ve[1].end),L.splice(Oe||re,0,["exit",Ye,ve[2]]),re++,te++}if(ve[1].type==="listItemPrefix"){const nt={type:"listItem",_spread:!1,start:Object.assign({},ve[1].start),end:void 0};Ye=nt,L.splice(re,0,["enter",nt,ve[2]]),re++,te++,ut=void 0,xt=!0}}}return L[B][1]._spread=Ce,te}function a(L,B){return te;function te(re){o.call(this,L(re),re),B&&B.call(this,re)}}function l(){this.stack.push({type:"fragment",children:[]})}function o(L,B,te){this.stack[this.stack.length-1].children.push(L),this.stack.push(L),this.tokenStack.push([B,te||void 0]),L.position={start:ze(B.start),end:void 0}}function c(L){return B;function B(te){L&&L.call(this,te),m.call(this,te)}}function m(L,B){const te=this.stack.pop(),re=this.tokenStack.pop();if(re)re[0].type!==L.type&&(B?B.call(this,L,re[0]):(re[1]||ls).call(this,L,re[0]));else throw new Error("Cannot close `"+L.type+"` ("+pt({start:L.start,end:L.end})+"): it’s not open");te.position.end=ze(L.end)}function d(){return Ua(this.stack.pop())}function x(){this.data.expectingFirstListItemValue=!0}function g(L){if(this.data.expectingFirstListItemValue){const B=this.stack[this.stack.length-2];B.start=Number.parseInt(this.sliceSerialize(L),10),this.data.expectingFirstListItemValue=void 0}}function u(){const L=this.resume(),B=this.stack[this.stack.length-1];B.lang=L}function p(){const L=this.resume(),B=this.stack[this.stack.length-1];B.meta=L}function h(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function v(){const L=this.resume(),B=this.stack[this.stack.length-1];B.value=L.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function N(){const L=this.resume(),B=this.stack[this.stack.length-1];B.value=L.replace(/(\r?\n|\r)$/g,"")}function y(L){const B=this.resume(),te=this.stack[this.stack.length-1];te.label=B,te.identifier=at(this.sliceSerialize(L)).toLowerCase()}function k(){const L=this.resume(),B=this.stack[this.stack.length-1];B.title=L}function E(){const L=this.resume(),B=this.stack[this.stack.length-1];B.url=L}function M(L){const B=this.stack[this.stack.length-1];if(!B.depth){const te=this.sliceSerialize(L).length;B.depth=te}}function A(){this.data.setextHeadingSlurpLineEnding=!0}function V(L){const B=this.stack[this.stack.length-1];B.depth=this.sliceSerialize(L).codePointAt(0)===61?1:2}function w(){this.data.setextHeadingSlurpLineEnding=void 0}function C(L){const te=this.stack[this.stack.length-1].children;let re=te[te.length-1];(!re||re.type!=="text")&&(re=Ie(),re.position={start:ze(L.start),end:void 0},te.push(re)),this.stack.push(re)}function S(L){const B=this.stack.pop();B.value+=this.sliceSerialize(L),B.position.end=ze(L.end)}function T(L){const B=this.stack[this.stack.length-1];if(this.data.atHardBreak){const te=B.children[B.children.length-1];te.position.end=ze(L.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&n.canContainEols.includes(B.type)&&(C.call(this,L),S.call(this,L))}function D(){this.data.atHardBreak=!0}function G(){const L=this.resume(),B=this.stack[this.stack.length-1];B.value=L}function Y(){const L=this.resume(),B=this.stack[this.stack.length-1];B.value=L}function q(){const L=this.resume(),B=this.stack[this.stack.length-1];B.value=L}function R(){const L=this.stack[this.stack.length-1];if(this.data.inReference){const B=this.data.referenceType||"shortcut";L.type+="Reference",L.referenceType=B,delete L.url,delete L.title}else delete L.identifier,delete L.label;this.data.referenceType=void 0}function $(){const L=this.stack[this.stack.length-1];if(this.data.inReference){const B=this.data.referenceType||"shortcut";L.type+="Reference",L.referenceType=B,delete L.url,delete L.title}else delete L.identifier,delete L.label;this.data.referenceType=void 0}function W(L){const B=this.sliceSerialize(L),te=this.stack[this.stack.length-2];te.label=Uo(B),te.identifier=at(B).toLowerCase()}function P(){const L=this.stack[this.stack.length-1],B=this.resume(),te=this.stack[this.stack.length-1];if(this.data.inReference=!0,te.type==="link"){const re=L.children;te.children=re}else te.alt=B}function b(){const L=this.resume(),B=this.stack[this.stack.length-1];B.url=L}function X(){const L=this.resume(),B=this.stack[this.stack.length-1];B.title=L}function O(){this.data.inReference=void 0}function f(){this.data.referenceType="collapsed"}function z(L){const B=this.resume(),te=this.stack[this.stack.length-1];te.label=B,te.identifier=at(this.sliceSerialize(L)).toLowerCase(),this.data.referenceType="full"}function U(L){this.data.characterReferenceType=L.type}function F(L){const B=this.sliceSerialize(L),te=this.data.characterReferenceType;let re;te?(re=nr(B,te==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):re=jn(B);const me=this.stack[this.stack.length-1];me.value+=re}function _(L){const B=this.stack.pop();B.position.end=ze(L.end)}function K(L){S.call(this,L);const B=this.stack[this.stack.length-1];B.url=this.sliceSerialize(L)}function ne(L){S.call(this,L);const B=this.stack[this.stack.length-1];B.url="mailto:"+this.sliceSerialize(L)}function Q(){return{type:"blockquote",children:[]}}function he(){return{type:"code",lang:null,meta:null,value:""}}function Fe(){return{type:"inlineCode",value:""}}function Je(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function $t(){return{type:"emphasis",children:[]}}function Re(){return{type:"heading",depth:0,children:[]}}function Be(){return{type:"break"}}function Ue(){return{type:"html",value:""}}function be(){return{type:"image",title:null,url:"",alt:null}}function kt(){return{type:"link",title:null,url:"",children:[]}}function et(L){return{type:"list",ordered:L.type==="listOrdered",start:null,spread:L._spread,children:[]}}function tt(L){return{type:"listItem",spread:L._spread,checked:null,children:[]}}function dt(){return{type:"paragraph",children:[]}}function qe(){return{type:"strong",children:[]}}function Ie(){return{type:"text",value:""}}function mt(){return{type:"thematicBreak"}}}function ze(t){return{line:t.line,column:t.column,offset:t.offset}}function xr(t,n){let s=-1;for(;++s<n.length;){const r=n[s];Array.isArray(r)?xr(t,r):Qo(t,r)}}function Qo(t,n){let s;for(s in n)if(ur.call(n,s))switch(s){case"canContainEols":{const r=n[s];r&&t[s].push(...r);break}case"transforms":{const r=n[s];r&&t[s].push(...r);break}case"enter":case"exit":{const r=n[s];r&&Object.assign(t[s],r);break}}}function ls(t,n){throw t?new Error("Cannot close `"+t.type+"` ("+pt({start:t.start,end:t.end})+"): a different token (`"+n.type+"`, "+pt({start:n.start,end:n.end})+") is open"):new Error("Cannot close document, a token (`"+n.type+"`, "+pt({start:n.start,end:n.end})+") is still open")}function Zo(t){const n=this;n.parser=s;function s(r){return Yo(r,{...n.data("settings"),...t,extensions:n.data("micromarkExtensions")||[],mdastExtensions:n.data("fromMarkdownExtensions")||[]})}}function Jo(t,n){const s={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(n),!0)};return t.patch(n,s),t.applyData(n,s)}function ec(t,n){const s={type:"element",tagName:"br",properties:{},children:[]};return t.patch(n,s),[t.applyData(n,s),{type:"text",value:`
`}]}function tc(t,n){const s=n.value?n.value+`
`:"",r={};n.lang&&(r.className=["language-"+n.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:s}]};return n.meta&&(i.data={meta:n.meta}),t.patch(n,i),i=t.applyData(n,i),i={type:"element",tagName:"pre",properties:{},children:[i]},t.patch(n,i),i}function nc(t,n){const s={type:"element",tagName:"del",properties:{},children:t.all(n)};return t.patch(n,s),t.applyData(n,s)}function sc(t,n){const s={type:"element",tagName:"em",properties:{},children:t.all(n)};return t.patch(n,s),t.applyData(n,s)}function rc(t,n){const s=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(n.identifier).toUpperCase(),i=ct(r.toLowerCase()),a=t.footnoteOrder.indexOf(r);let l,o=t.footnoteCounts.get(r);o===void 0?(o=0,t.footnoteOrder.push(r),l=t.footnoteOrder.length):l=a+1,o+=1,t.footnoteCounts.set(r,o);const c={type:"element",tagName:"a",properties:{href:"#"+s+"fn-"+i,id:s+"fnref-"+i+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(l)}]};t.patch(n,c);const m={type:"element",tagName:"sup",properties:{},children:[c]};return t.patch(n,m),t.applyData(n,m)}function ic(t,n){const s={type:"element",tagName:"h"+n.depth,properties:{},children:t.all(n)};return t.patch(n,s),t.applyData(n,s)}function ac(t,n){if(t.options.allowDangerousHtml){const s={type:"raw",value:n.value};return t.patch(n,s),t.applyData(n,s)}}function hr(t,n){const s=n.referenceType;let r="]";if(s==="collapsed"?r+="[]":s==="full"&&(r+="["+(n.label||n.identifier)+"]"),n.type==="imageReference")return[{type:"text",value:"!["+n.alt+r}];const i=t.all(n),a=i[0];a&&a.type==="text"?a.value="["+a.value:i.unshift({type:"text",value:"["});const l=i[i.length-1];return l&&l.type==="text"?l.value+=r:i.push({type:"text",value:r}),i}function lc(t,n){const s=String(n.identifier).toUpperCase(),r=t.definitionById.get(s);if(!r)return hr(t,n);const i={src:ct(r.url||""),alt:n.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"img",properties:i,children:[]};return t.patch(n,a),t.applyData(n,a)}function oc(t,n){const s={src:ct(n.url)};n.alt!==null&&n.alt!==void 0&&(s.alt=n.alt),n.title!==null&&n.title!==void 0&&(s.title=n.title);const r={type:"element",tagName:"img",properties:s,children:[]};return t.patch(n,r),t.applyData(n,r)}function cc(t,n){const s={type:"text",value:n.value.replace(/\r?\n|\r/g," ")};t.patch(n,s);const r={type:"element",tagName:"code",properties:{},children:[s]};return t.patch(n,r),t.applyData(n,r)}function dc(t,n){const s=String(n.identifier).toUpperCase(),r=t.definitionById.get(s);if(!r)return hr(t,n);const i={href:ct(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const a={type:"element",tagName:"a",properties:i,children:t.all(n)};return t.patch(n,a),t.applyData(n,a)}function mc(t,n){const s={href:ct(n.url)};n.title!==null&&n.title!==void 0&&(s.title=n.title);const r={type:"element",tagName:"a",properties:s,children:t.all(n)};return t.patch(n,r),t.applyData(n,r)}function uc(t,n,s){const r=t.all(n),i=s?xc(s):gr(n),a={},l=[];if(typeof n.checked=="boolean"){const d=r[0];let x;d&&d.type==="element"&&d.tagName==="p"?x=d:(x={type:"element",tagName:"p",properties:{},children:[]},r.unshift(x)),x.children.length>0&&x.children.unshift({type:"text",value:" "}),x.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:n.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let o=-1;for(;++o<r.length;){const d=r[o];(i||o!==0||d.type!=="element"||d.tagName!=="p")&&l.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?l.push(...d.children):l.push(d)}const c=r[r.length-1];c&&(i||c.type!=="element"||c.tagName!=="p")&&l.push({type:"text",value:`
`});const m={type:"element",tagName:"li",properties:a,children:l};return t.patch(n,m),t.applyData(n,m)}function xc(t){let n=!1;if(t.type==="list"){n=t.spread||!1;const s=t.children;let r=-1;for(;!n&&++r<s.length;)n=gr(s[r])}return n}function gr(t){const n=t.spread;return n??t.children.length>1}function hc(t,n){const s={},r=t.all(n);let i=-1;for(typeof n.start=="number"&&n.start!==1&&(s.start=n.start);++i<r.length;){const l=r[i];if(l.type==="element"&&l.tagName==="li"&&l.properties&&Array.isArray(l.properties.className)&&l.properties.className.includes("task-list-item")){s.className=["contains-task-list"];break}}const a={type:"element",tagName:n.ordered?"ol":"ul",properties:s,children:t.wrap(r,!0)};return t.patch(n,a),t.applyData(n,a)}function gc(t,n){const s={type:"element",tagName:"p",properties:{},children:t.all(n)};return t.patch(n,s),t.applyData(n,s)}function pc(t,n){const s={type:"root",children:t.wrap(t.all(n))};return t.patch(n,s),t.applyData(n,s)}function fc(t,n){const s={type:"element",tagName:"strong",properties:{},children:t.all(n)};return t.patch(n,s),t.applyData(n,s)}function bc(t,n){const s=t.all(n),r=s.shift(),i=[];if(r){const l={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(n.children[0],l),i.push(l)}if(s.length>0){const l={type:"element",tagName:"tbody",properties:{},children:t.wrap(s,!0)},o=pn(n.children[1]),c=Ys(n.children[n.children.length-1]);o&&c&&(l.position={start:o,end:c}),i.push(l)}const a={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(n,a),t.applyData(n,a)}function yc(t,n,s){const r=s?s.children:void 0,a=(r?r.indexOf(n):1)===0?"th":"td",l=s&&s.type==="table"?s.align:void 0,o=l?l.length:n.children.length;let c=-1;const m=[];for(;++c<o;){const x=n.children[c],g={},u=l?l[c]:void 0;u&&(g.align=u);let p={type:"element",tagName:a,properties:g,children:[]};x&&(p.children=t.all(x),t.patch(x,p),p=t.applyData(x,p)),m.push(p)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(m,!0)};return t.patch(n,d),t.applyData(n,d)}function jc(t,n){const s={type:"element",tagName:"td",properties:{},children:t.all(n)};return t.patch(n,s),t.applyData(n,s)}const os=9,cs=32;function Nc(t){const n=String(t),s=/\r?\n|\r/g;let r=s.exec(n),i=0;const a=[];for(;r;)a.push(ds(n.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=s.exec(n);return a.push(ds(n.slice(i),i>0,!1)),a.join("")}function ds(t,n,s){let r=0,i=t.length;if(n){let a=t.codePointAt(r);for(;a===os||a===cs;)r++,a=t.codePointAt(r)}if(s){let a=t.codePointAt(i-1);for(;a===os||a===cs;)i--,a=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function vc(t,n){const s={type:"text",value:Nc(String(n.value))};return t.patch(n,s),t.applyData(n,s)}function wc(t,n){const s={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(n,s),t.applyData(n,s)}const kc={blockquote:Jo,break:ec,code:tc,delete:nc,emphasis:sc,footnoteReference:rc,heading:ic,html:ac,imageReference:lc,image:oc,inlineCode:cc,linkReference:dc,link:mc,listItem:uc,list:hc,paragraph:gc,root:pc,strong:fc,table:bc,tableCell:jc,tableRow:yc,text:vc,thematicBreak:wc,toml:At,yaml:At,definition:At,footnoteDefinition:At};function At(){}const pr=-1,Gt=0,bt=1,Pt=2,wn=3,kn=4,Sn=5,An=6,fr=7,br=8,ms=typeof self=="object"?self:globalThis,Sc=(t,n)=>{const s=(i,a)=>(t.set(a,i),i),r=i=>{if(t.has(i))return t.get(i);const[a,l]=n[i];switch(a){case Gt:case pr:return s(l,i);case bt:{const o=s([],i);for(const c of l)o.push(r(c));return o}case Pt:{const o=s({},i);for(const[c,m]of l)o[r(c)]=r(m);return o}case wn:return s(new Date(l),i);case kn:{const{source:o,flags:c}=l;return s(new RegExp(o,c),i)}case Sn:{const o=s(new Map,i);for(const[c,m]of l)o.set(r(c),r(m));return o}case An:{const o=s(new Set,i);for(const c of l)o.add(r(c));return o}case fr:{const{name:o,message:c}=l;return s(new ms[o](c),i)}case br:return s(BigInt(l),i);case"BigInt":return s(Object(BigInt(l)),i);case"ArrayBuffer":return s(new Uint8Array(l).buffer,l);case"DataView":{const{buffer:o}=new Uint8Array(l);return s(new DataView(o),l)}}return s(new ms[a](l),i)};return r},us=t=>Sc(new Map,t)(0),rt="",{toString:Ac}={},{keys:Mc}=Object,gt=t=>{const n=typeof t;if(n!=="object"||!t)return[Gt,n];const s=Ac.call(t).slice(8,-1);switch(s){case"Array":return[bt,rt];case"Object":return[Pt,rt];case"Date":return[wn,rt];case"RegExp":return[kn,rt];case"Map":return[Sn,rt];case"Set":return[An,rt];case"DataView":return[bt,s]}return s.includes("Array")?[bt,s]:s.includes("Error")?[fr,s]:[Pt,s]},Mt=([t,n])=>t===Gt&&(n==="function"||n==="symbol"),Rc=(t,n,s,r)=>{const i=(l,o)=>{const c=r.push(l)-1;return s.set(o,c),c},a=l=>{if(s.has(l))return s.get(l);let[o,c]=gt(l);switch(o){case Gt:{let d=l;switch(c){case"bigint":o=br,d=l.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+c);d=null;break;case"undefined":return i([pr],l)}return i([o,d],l)}case bt:{if(c){let g=l;return c==="DataView"?g=new Uint8Array(l.buffer):c==="ArrayBuffer"&&(g=new Uint8Array(l)),i([c,[...g]],l)}const d=[],x=i([o,d],l);for(const g of l)d.push(a(g));return x}case Pt:{if(c)switch(c){case"BigInt":return i([c,l.toString()],l);case"Boolean":case"Number":case"String":return i([c,l.valueOf()],l)}if(n&&"toJSON"in l)return a(l.toJSON());const d=[],x=i([o,d],l);for(const g of Mc(l))(t||!Mt(gt(l[g])))&&d.push([a(g),a(l[g])]);return x}case wn:return i([o,l.toISOString()],l);case kn:{const{source:d,flags:x}=l;return i([o,{source:d,flags:x}],l)}case Sn:{const d=[],x=i([o,d],l);for(const[g,u]of l)(t||!(Mt(gt(g))||Mt(gt(u))))&&d.push([a(g),a(u)]);return x}case An:{const d=[],x=i([o,d],l);for(const g of l)(t||!Mt(gt(g)))&&d.push(a(g));return x}}const{message:m}=l;return i([o,{name:c,message:m}],l)};return a},xs=(t,{json:n,lossy:s}={})=>{const r=[];return Rc(!(n||s),!!n,new Map,r)(t),r},Et=typeof structuredClone=="function"?(t,n)=>n&&("json"in n||"lossy"in n)?us(xs(t,n)):structuredClone(t):(t,n)=>us(xs(t,n));function Cc(t,n){const s=[{type:"text",value:"↩"}];return n>1&&s.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(n)}]}),s}function Dc(t,n){return"Back to reference "+(t+1)+(n>1?"-"+n:"")}function Tc(t){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",s=t.options.footnoteBackContent||Cc,r=t.options.footnoteBackLabel||Dc,i=t.options.footnoteLabel||"Footnotes",a=t.options.footnoteLabelTagName||"h2",l=t.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let c=-1;for(;++c<t.footnoteOrder.length;){const m=t.footnoteById.get(t.footnoteOrder[c]);if(!m)continue;const d=t.all(m),x=String(m.identifier).toUpperCase(),g=ct(x.toLowerCase());let u=0;const p=[],h=t.footnoteCounts.get(x);for(;h!==void 0&&++u<=h;){p.length>0&&p.push({type:"text",value:" "});let y=typeof s=="string"?s:s(c,u);typeof y=="string"&&(y={type:"text",value:y}),p.push({type:"element",tagName:"a",properties:{href:"#"+n+"fnref-"+g+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(c,u),className:["data-footnote-backref"]},children:Array.isArray(y)?y:[y]})}const v=d[d.length-1];if(v&&v.type==="element"&&v.tagName==="p"){const y=v.children[v.children.length-1];y&&y.type==="text"?y.value+=" ":v.children.push({type:"text",value:" "}),v.children.push(...p)}else d.push(...p);const N={type:"element",tagName:"li",properties:{id:n+"fn-"+g},children:t.wrap(d,!0)};t.patch(m,N),o.push(N)}if(o.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...Et(l),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(o,!0)},{type:"text",value:`
`}]}}const yr=function(t){if(t==null)return Pc;if(typeof t=="function")return Ht(t);if(typeof t=="object")return Array.isArray(t)?Fc(t):Lc(t);if(typeof t=="string")return _c(t);throw new Error("Expected function, string, or object as test")};function Fc(t){const n=[];let s=-1;for(;++s<t.length;)n[s]=yr(t[s]);return Ht(r);function r(...i){let a=-1;for(;++a<n.length;)if(n[a].apply(this,i))return!0;return!1}}function Lc(t){const n=t;return Ht(s);function s(r){const i=r;let a;for(a in t)if(i[a]!==n[a])return!1;return!0}}function _c(t){return Ht(n);function n(s){return s&&s.type===t}}function Ht(t){return n;function n(s,r,i){return!!(Ec(s)&&t.call(this,s,typeof r=="number"?r:void 0,i||void 0))}}function Pc(){return!0}function Ec(t){return t!==null&&typeof t=="object"&&"type"in t}const jr=[],Ic=!0,hs=!1,Oc="skip";function Gc(t,n,s,r){let i;typeof n=="function"&&typeof s!="function"?(r=s,s=n):i=n;const a=yr(i),l=r?-1:1;o(t,void 0,[])();function o(c,m,d){const x=c&&typeof c=="object"?c:{};if(typeof x.type=="string"){const u=typeof x.tagName=="string"?x.tagName:typeof x.name=="string"?x.name:void 0;Object.defineProperty(g,"name",{value:"node ("+(c.type+(u?"<"+u+">":""))+")"})}return g;function g(){let u=jr,p,h,v;if((!n||a(c,m,d[d.length-1]||void 0))&&(u=Hc(s(c,d)),u[0]===hs))return u;if("children"in c&&c.children){const N=c;if(N.children&&u[0]!==Oc)for(h=(r?N.children.length:-1)+l,v=d.concat(N);h>-1&&h<N.children.length;){const y=N.children[h];if(p=o(y,h,v)(),p[0]===hs)return p;h=typeof p[1]=="number"?p[1]:h+l}}return u}}}function Hc(t){return Array.isArray(t)?t:typeof t=="number"?[Ic,t]:t==null?jr:[t]}function Nr(t,n,s,r){let i,a,l;typeof n=="function"&&typeof s!="function"?(a=void 0,l=n,i=s):(a=n,l=s,i=r),Gc(t,a,o,i);function o(c,m){const d=m[m.length-1],x=d?d.children.indexOf(c):void 0;return l(c,x,d)}}const on={}.hasOwnProperty,$c={};function zc(t,n){const s=n||$c,r=new Map,i=new Map,a=new Map,l={...kc,...s.handlers},o={all:m,applyData:Kc,definitionById:r,footnoteById:i,footnoteCounts:a,footnoteOrder:[],handlers:l,one:c,options:s,patch:Wc,wrap:Bc};return Nr(t,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const x=d.type==="definition"?r:i,g=String(d.identifier).toUpperCase();x.has(g)||x.set(g,d)}}),o;function c(d,x){const g=d.type,u=o.handlers[g];if(on.call(o.handlers,g)&&u)return u(o,d,x);if(o.options.passThrough&&o.options.passThrough.includes(g)){if("children"in d){const{children:h,...v}=d,N=Et(v);return N.children=o.all(d),N}return Et(d)}return(o.options.unknownHandler||Vc)(o,d,x)}function m(d){const x=[];if("children"in d){const g=d.children;let u=-1;for(;++u<g.length;){const p=o.one(g[u],d);if(p){if(u&&g[u-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=gs(p.value)),!Array.isArray(p)&&p.type==="element")){const h=p.children[0];h&&h.type==="text"&&(h.value=gs(h.value))}Array.isArray(p)?x.push(...p):x.push(p)}}}return x}}function Wc(t,n){t.position&&(n.position=Sa(t))}function Kc(t,n){let s=n;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,a=t.data.hProperties;if(typeof r=="string")if(s.type==="element")s.tagName=r;else{const l="children"in s?s.children:[s];s={type:"element",tagName:r,properties:{},children:l}}s.type==="element"&&a&&Object.assign(s.properties,Et(a)),"children"in s&&s.children&&i!==null&&i!==void 0&&(s.children=i)}return s}function Vc(t,n){const s=n.data||{},r="value"in n&&!(on.call(s,"hProperties")||on.call(s,"hChildren"))?{type:"text",value:n.value}:{type:"element",tagName:"div",properties:{},children:t.all(n)};return t.patch(n,r),t.applyData(n,r)}function Bc(t,n){const s=[];let r=-1;for(n&&s.push({type:"text",value:`
`});++r<t.length;)r&&s.push({type:"text",value:`
`}),s.push(t[r]);return n&&t.length>0&&s.push({type:"text",value:`
`}),s}function gs(t){let n=0,s=t.charCodeAt(n);for(;s===9||s===32;)n++,s=t.charCodeAt(n);return t.slice(n)}function ps(t,n){const s=zc(t,n),r=s.one(t,void 0),i=Tc(s),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&a.children.push({type:"text",value:`
`},i),a}function Uc(t,n){return t&&"run"in t?async function(s,r){const i=ps(s,{file:r,...n});await t.run(i,r)}:function(s,r){return ps(s,{file:r,...t||n})}}function fs(t){if(t)throw t}var Dt=Object.prototype.hasOwnProperty,vr=Object.prototype.toString,bs=Object.defineProperty,ys=Object.getOwnPropertyDescriptor,js=function(n){return typeof Array.isArray=="function"?Array.isArray(n):vr.call(n)==="[object Array]"},Ns=function(n){if(!n||vr.call(n)!=="[object Object]")return!1;var s=Dt.call(n,"constructor"),r=n.constructor&&n.constructor.prototype&&Dt.call(n.constructor.prototype,"isPrototypeOf");if(n.constructor&&!s&&!r)return!1;var i;for(i in n);return typeof i>"u"||Dt.call(n,i)},vs=function(n,s){bs&&s.name==="__proto__"?bs(n,s.name,{enumerable:!0,configurable:!0,value:s.newValue,writable:!0}):n[s.name]=s.newValue},ws=function(n,s){if(s==="__proto__")if(Dt.call(n,s)){if(ys)return ys(n,s).value}else return;return n[s]},qc=function t(){var n,s,r,i,a,l,o=arguments[0],c=1,m=arguments.length,d=!1;for(typeof o=="boolean"&&(d=o,o=arguments[1]||{},c=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});c<m;++c)if(n=arguments[c],n!=null)for(s in n)r=ws(o,s),i=ws(n,s),o!==i&&(d&&i&&(Ns(i)||(a=js(i)))?(a?(a=!1,l=r&&js(r)?r:[]):l=r&&Ns(r)?r:{},vs(o,{name:s,newValue:t(d,l,i)})):typeof i<"u"&&vs(o,{name:s,newValue:i}));return o};const Bt=Fs(qc);function cn(t){if(typeof t!="object"||t===null)return!1;const n=Object.getPrototypeOf(t);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function Yc(){const t=[],n={run:s,use:r};return n;function s(...i){let a=-1;const l=i.pop();if(typeof l!="function")throw new TypeError("Expected function as last argument, not "+l);o(null,...i);function o(c,...m){const d=t[++a];let x=-1;if(c){l(c);return}for(;++x<i.length;)(m[x]===null||m[x]===void 0)&&(m[x]=i[x]);i=m,d?Xc(d,o)(...m):l(null,...m)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),n}}function Xc(t,n){let s;return r;function r(...l){const o=t.length>l.length;let c;o&&l.push(i);try{c=t.apply(this,l)}catch(m){const d=m;if(o&&s)throw d;return i(d)}o||(c&&c.then&&typeof c.then=="function"?c.then(a,i):c instanceof Error?i(c):a(c))}function i(l,...o){s||(s=!0,n(l,...o))}function a(l){i(null,l)}}const _e={basename:Qc,dirname:Zc,extname:Jc,join:ed,sep:"/"};function Qc(t,n){if(n!==void 0&&typeof n!="string")throw new TypeError('"ext" argument must be a string');wt(t);let s=0,r=-1,i=t.length,a;if(n===void 0||n.length===0||n.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(a){s=i+1;break}}else r<0&&(a=!0,r=i+1);return r<0?"":t.slice(s,r)}if(n===t)return"";let l=-1,o=n.length-1;for(;i--;)if(t.codePointAt(i)===47){if(a){s=i+1;break}}else l<0&&(a=!0,l=i+1),o>-1&&(t.codePointAt(i)===n.codePointAt(o--)?o<0&&(r=i):(o=-1,r=l));return s===r?r=l:r<0&&(r=t.length),t.slice(s,r)}function Zc(t){if(wt(t),t.length===0)return".";let n=-1,s=t.length,r;for(;--s;)if(t.codePointAt(s)===47){if(r){n=s;break}}else r||(r=!0);return n<0?t.codePointAt(0)===47?"/":".":n===1&&t.codePointAt(0)===47?"//":t.slice(0,n)}function Jc(t){wt(t);let n=t.length,s=-1,r=0,i=-1,a=0,l;for(;n--;){const o=t.codePointAt(n);if(o===47){if(l){r=n+1;break}continue}s<0&&(l=!0,s=n+1),o===46?i<0?i=n:a!==1&&(a=1):i>-1&&(a=-1)}return i<0||s<0||a===0||a===1&&i===s-1&&i===r+1?"":t.slice(i,s)}function ed(...t){let n=-1,s;for(;++n<t.length;)wt(t[n]),t[n]&&(s=s===void 0?t[n]:s+"/"+t[n]);return s===void 0?".":td(s)}function td(t){wt(t);const n=t.codePointAt(0)===47;let s=nd(t,!n);return s.length===0&&!n&&(s="."),s.length>0&&t.codePointAt(t.length-1)===47&&(s+="/"),n?"/"+s:s}function nd(t,n){let s="",r=0,i=-1,a=0,l=-1,o,c;for(;++l<=t.length;){if(l<t.length)o=t.codePointAt(l);else{if(o===47)break;o=47}if(o===47){if(!(i===l-1||a===1))if(i!==l-1&&a===2){if(s.length<2||r!==2||s.codePointAt(s.length-1)!==46||s.codePointAt(s.length-2)!==46){if(s.length>2){if(c=s.lastIndexOf("/"),c!==s.length-1){c<0?(s="",r=0):(s=s.slice(0,c),r=s.length-1-s.lastIndexOf("/")),i=l,a=0;continue}}else if(s.length>0){s="",r=0,i=l,a=0;continue}}n&&(s=s.length>0?s+"/..":"..",r=2)}else s.length>0?s+="/"+t.slice(i+1,l):s=t.slice(i+1,l),r=l-i-1;i=l,a=0}else o===46&&a>-1?a++:a=-1}return s}function wt(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const sd={cwd:rd};function rd(){return"/"}function dn(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function id(t){if(typeof t=="string")t=new URL(t);else if(!dn(t)){const n=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw n.code="ERR_INVALID_ARG_TYPE",n}if(t.protocol!=="file:"){const n=new TypeError("The URL must be of scheme file");throw n.code="ERR_INVALID_URL_SCHEME",n}return ad(t)}function ad(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const n=t.pathname;let s=-1;for(;++s<n.length;)if(n.codePointAt(s)===37&&n.codePointAt(s+1)===50){const r=n.codePointAt(s+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(n)}const Ut=["history","path","basename","stem","extname","dirname"];class wr{constructor(n){let s;n?dn(n)?s={path:n}:typeof n=="string"||ld(n)?s={value:n}:s=n:s={},this.cwd="cwd"in s?"":sd.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Ut.length;){const a=Ut[r];a in s&&s[a]!==void 0&&s[a]!==null&&(this[a]=a==="history"?[...s[a]]:s[a])}let i;for(i in s)Ut.includes(i)||(this[i]=s[i])}get basename(){return typeof this.path=="string"?_e.basename(this.path):void 0}set basename(n){Yt(n,"basename"),qt(n,"basename"),this.path=_e.join(this.dirname||"",n)}get dirname(){return typeof this.path=="string"?_e.dirname(this.path):void 0}set dirname(n){ks(this.basename,"dirname"),this.path=_e.join(n||"",this.basename)}get extname(){return typeof this.path=="string"?_e.extname(this.path):void 0}set extname(n){if(qt(n,"extname"),ks(this.dirname,"extname"),n){if(n.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(n.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=_e.join(this.dirname,this.stem+(n||""))}get path(){return this.history[this.history.length-1]}set path(n){dn(n)&&(n=id(n)),Yt(n,"path"),this.path!==n&&this.history.push(n)}get stem(){return typeof this.path=="string"?_e.basename(this.path,this.extname):void 0}set stem(n){Yt(n,"stem"),qt(n,"stem"),this.path=_e.join(this.dirname||"",n+(this.extname||""))}fail(n,s,r){const i=this.message(n,s,r);throw i.fatal=!0,i}info(n,s,r){const i=this.message(n,s,r);return i.fatal=void 0,i}message(n,s,r){const i=new fe(n,s,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(n){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(n||void 0).decode(this.value)}}function qt(t,n){if(t&&t.includes(_e.sep))throw new Error("`"+n+"` cannot be a path: did not expect `"+_e.sep+"`")}function Yt(t,n){if(!t)throw new Error("`"+n+"` cannot be empty")}function ks(t,n){if(!t)throw new Error("Setting `"+n+"` requires `path` to be set too")}function ld(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const od=function(t){const r=this.constructor.prototype,i=r[t],a=function(){return i.apply(a,arguments)};return Object.setPrototypeOf(a,r),a},cd={}.hasOwnProperty;class Mn extends od{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Yc()}copy(){const n=new Mn;let s=-1;for(;++s<this.attachers.length;){const r=this.attachers[s];n.use(...r)}return n.data(Bt(!0,{},this.namespace)),n}data(n,s){return typeof n=="string"?arguments.length===2?(Zt("data",this.frozen),this.namespace[n]=s,this):cd.call(this.namespace,n)&&this.namespace[n]||void 0:n?(Zt("data",this.frozen),this.namespace=n,this):this.namespace}freeze(){if(this.frozen)return this;const n=this;for(;++this.freezeIndex<this.attachers.length;){const[s,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=s.call(n,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(n){this.freeze();const s=Rt(n),r=this.parser||this.Parser;return Xt("parse",r),r(String(s),s)}process(n,s){const r=this;return this.freeze(),Xt("process",this.parser||this.Parser),Qt("process",this.compiler||this.Compiler),s?i(void 0,s):new Promise(i);function i(a,l){const o=Rt(n),c=r.parse(o);r.run(c,o,function(d,x,g){if(d||!x||!g)return m(d);const u=x,p=r.stringify(u,g);ud(p)?g.value=p:g.result=p,m(d,g)});function m(d,x){d||!x?l(d):a?a(x):s(void 0,x)}}}processSync(n){let s=!1,r;return this.freeze(),Xt("processSync",this.parser||this.Parser),Qt("processSync",this.compiler||this.Compiler),this.process(n,i),As("processSync","process",s),r;function i(a,l){s=!0,fs(a),r=l}}run(n,s,r){Ss(n),this.freeze();const i=this.transformers;return!r&&typeof s=="function"&&(r=s,s=void 0),r?a(void 0,r):new Promise(a);function a(l,o){const c=Rt(s);i.run(n,c,m);function m(d,x,g){const u=x||n;d?o(d):l?l(u):r(void 0,u,g)}}}runSync(n,s){let r=!1,i;return this.run(n,s,a),As("runSync","run",r),i;function a(l,o){fs(l),i=o,r=!0}}stringify(n,s){this.freeze();const r=Rt(s),i=this.compiler||this.Compiler;return Qt("stringify",i),Ss(n),i(n,r)}use(n,...s){const r=this.attachers,i=this.namespace;if(Zt("use",this.frozen),n!=null)if(typeof n=="function")c(n,s);else if(typeof n=="object")Array.isArray(n)?o(n):l(n);else throw new TypeError("Expected usable value, not `"+n+"`");return this;function a(m){if(typeof m=="function")c(m,[]);else if(typeof m=="object")if(Array.isArray(m)){const[d,...x]=m;c(d,x)}else l(m);else throw new TypeError("Expected usable value, not `"+m+"`")}function l(m){if(!("plugins"in m)&&!("settings"in m))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");o(m.plugins),m.settings&&(i.settings=Bt(!0,i.settings,m.settings))}function o(m){let d=-1;if(m!=null)if(Array.isArray(m))for(;++d<m.length;){const x=m[d];a(x)}else throw new TypeError("Expected a list of plugins, not `"+m+"`")}function c(m,d){let x=-1,g=-1;for(;++x<r.length;)if(r[x][0]===m){g=x;break}if(g===-1)r.push([m,...d]);else if(d.length>0){let[u,...p]=d;const h=r[g][1];cn(h)&&cn(u)&&(u=Bt(!0,h,u)),r[g]=[m,u,...p]}}}}const dd=new Mn().freeze();function Xt(t,n){if(typeof n!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function Qt(t,n){if(typeof n!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function Zt(t,n){if(n)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ss(t){if(!cn(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function As(t,n,s){if(!s)throw new Error("`"+t+"` finished async. Use `"+n+"` instead")}function Rt(t){return md(t)?t:new wr(t)}function md(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function ud(t){return typeof t=="string"||xd(t)}function xd(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const hd="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Ms=[],Rs={allowDangerousHtml:!0},gd=/^(https?|ircs?|mailto|xmpp)$/i,pd=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function fd(t){const n=bd(t),s=yd(t);return jd(n.runSync(n.parse(s),s),t)}function bd(t){const n=t.rehypePlugins||Ms,s=t.remarkPlugins||Ms,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...Rs}:Rs;return dd().use(Zo).use(s).use(Uc,r).use(n)}function yd(t){const n=t.children||"",s=new wr;return typeof n=="string"&&(s.value=n),s}function jd(t,n){const s=n.allowedElements,r=n.allowElement,i=n.components,a=n.disallowedElements,l=n.skipHtml,o=n.unwrapDisallowed,c=n.urlTransform||Nd;for(const d of pd)Object.hasOwn(n,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+hd+d.id,void 0);return Nr(t,m),Da(t,{Fragment:e.Fragment,components:i,ignoreInvalidStyle:!0,jsx:e.jsx,jsxs:e.jsxs,passKeys:!0,passNode:!0});function m(d,x,g){if(d.type==="raw"&&g&&typeof x=="number")return l?g.children.splice(x,1):g.children[x]={type:"text",value:d.value},x;if(d.type==="element"){let u;for(u in Wt)if(Object.hasOwn(Wt,u)&&Object.hasOwn(d.properties,u)){const p=d.properties[u],h=Wt[u];(h===null||h.includes(d.tagName))&&(d.properties[u]=c(String(p||""),u,d))}}if(d.type==="element"){let u=s?!s.includes(d.tagName):a?a.includes(d.tagName):!1;if(!u&&r&&typeof x=="number"&&(u=!r(d,x,g)),u&&g&&typeof x=="number")return o&&d.children?g.children.splice(x,1,...d.children):g.children.splice(x,1),x}}}function Nd(t){const n=t.indexOf(":"),s=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return n===-1||i!==-1&&n>i||s!==-1&&n>s||r!==-1&&n>r||gd.test(t.slice(0,n))?t:""}const vd=({athlete:t,biometricData:n,geneticProfiles:s,geneticSummary:r=[]})=>{const[i,a]=I.useState([]),[l,o]=I.useState(""),[c,m]=I.useState(!1),[d,x]=I.useState(!1),[g,u]=I.useState(!1),p=I.useRef(null);n.length>0&&n[0];const h=n.length>0&&n.some(M=>M.hrv_night&&M.hrv_night>0),v=()=>{p.current?.scrollIntoView({behavior:"smooth"})};I.useEffect(()=>{v()},[i]);const N=()=>{const M=n.slice(-7),A=s.reduce((C,S)=>(C[S.gene]=S.genotype,C),{}),V=r.reduce((C,S)=>{const T=S.Genes||S.genes||{};if(typeof T=="string")try{const D=JSON.parse(T);Object.assign(C,D)}catch{}else typeof T=="object"&&T!==null&&Object.entries(T).forEach(([D,G])=>{!D.startsWith("$")&&D!=="id"&&D!=="Id"&&D!=="ID"&&(C[D]=G)});return C},{}),w={name:t.name,sport:t.sport,age:t.age,team:t.team,biometricHistory:M.map(C=>({HrvNight:C.hrv_night,RestingHr:C.resting_hr,DeepSleepPct:C.deep_sleep_pct,RemSleepPct:C.rem_sleep_pct,SleepDurationH:C.sleep_duration_h,Spo2Night:C.spo2_night,TrainingLoadPct:C.training_load_pct,Date:C.date})),latestBiometrics:M[M.length-1]?{HrvNight:M[M.length-1].hrv_night,RestingHr:M[M.length-1].resting_hr,DeepSleepPct:M[M.length-1].deep_sleep_pct,RemSleepPct:M[M.length-1].rem_sleep_pct,SleepDurationH:M[M.length-1].sleep_duration_h,Spo2Night:M[M.length-1].spo2_night,TrainingLoadPct:M[M.length-1].training_load_pct,Date:M[M.length-1].date}:null,geneticProfile:{...A,...V},totalBiometricRecords:n.length,totalGeneticMarkers:s.length+Object.keys(V).length,geneticSummaryData:r};return w.latestBiometrics,w},y=async()=>{if(!l.trim()||c)return;const M={id:Date.now().toString(),role:"user",content:l.trim(),timestamp:new Date};if(a(A=>[...A,M]),o(""),m(!0),d){const A=N(),V=E(l,A),w={id:(Date.now()+1).toString(),role:"assistant",content:V,timestamp:new Date};a(C=>[...C,w]),m(!1);return}try{const A=N(),V=await Ar.askAI(M.content,A),w={id:(Date.now()+1).toString(),role:"assistant",content:V.response,timestamp:new Date};a(C=>[...C,w])}catch{const V=N(),w=E(l,V),C={id:(Date.now()+1).toString(),role:"assistant",content:`${w}

⚠️ **AI Service Unavailable** - Using intelligent offline analysis based on ${t.name}'s actual biometric and genetic data. (Online mode available in Azure production deployment)`,timestamp:new Date};a(S=>[...S,C])}finally{m(!1)}},k=M=>{M.key==="Enter"&&!M.shiftKey&&(M.preventDefault(),y())},E=(M,A)=>{const V=M.toLowerCase();if(V.includes("training")||V.includes("workout")||V.includes("exercise")){const w=A.latestBiometrics?.TrainingLoadPct||0;return w>85?`Based on ${t.name}'s current training load (${w}%), I recommend focusing on recovery today. Consider light technique work or active recovery sessions. High-intensity training might lead to overtraining given the current load.`:`${t.name} shows moderate training load (${w}%). This is a good day for quality training sessions. Focus on sport-specific skills and maintain good form.`}if(V.includes("sleep")||V.includes("rest")){const w=A.latestBiometrics?.SleepDurationH||0,C=A.latestBiometrics?.DeepSleepPct||0;return`Sleep analysis for ${t.name}: ${w} hours total with ${C}% deep sleep. ${w>=7?"Good sleep duration - recovery should be optimal.":"Sleep duration is below recommended 7+ hours. Consider adjusting bedtime routine."} Deep sleep percentage is ${C>20?"excellent":"moderate"}.`}if(V.includes("recovery")||V.includes("hrv")||V.includes("heart rate")){const w=A.latestBiometrics?.HrvNight||0,C=A.latestBiometrics?.RestingHr||0;return`Recovery status for ${t.name}: HRV at ${w}ms and resting HR at ${C}bpm. ${w>50?"Good recovery capacity detected.":"Recovery may need attention."} ${C<60?"Resting heart rate is optimal.":"Resting heart rate is elevated - monitor stress levels."}`}return V.includes("nutrition")||V.includes("diet")||V.includes("food")?`For ${t.name}'s ${t.sport} training, focus on: adequate protein (1.6-2.2g/kg body weight), complex carbohydrates for sustained energy, and proper hydration. Consider their genetic profile for personalized nutrition strategies.`:`I can help you analyze ${t.name}'s performance data including training load, sleep quality, recovery status, and nutrition recommendations. Ask me about specific aspects like "How is the training load today?" or "What does the sleep data show?"`};return e.jsxs("div",{className:"flex flex-col h-[600px] bg-white rounded-lg shadow-sm border border-gray-200",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gradient-to-r from-blue-50 to-purple-50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"🤖"}),"AI Assistant for ",t.name]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>u(!g),className:`px-3 py-1 text-xs rounded-full transition-colors ${g?"bg-purple-100 text-purple-700 border border-purple-300":"bg-gray-100 text-gray-700 border border-gray-300"}`,children:g?"📊 Hide Context":"📊 Show Context"}),e.jsx("button",{onClick:()=>x(!d),className:`px-3 py-1 text-xs rounded-full transition-colors ${d?"bg-green-100 text-green-700 border border-green-300":"bg-blue-100 text-blue-700 border border-blue-300"}`,children:d?"📱 Offline":"🌐 Azure"})]})]}),e.jsxs("p",{className:"text-sm text-gray-600",children:[d?"📱 AI Assistant using intelligent analysis of athlete data":"🌐 AI service available in Azure production deployment",h&&e.jsx("span",{className:"block text-xs text-green-600 mt-1",children:"✅ Connected to real biometric data from Current Metrics, Sleep Metrics, and other tabs"}),!h&&e.jsx("span",{className:"block text-xs text-yellow-600 mt-1",children:"⚠️ No biometric data available - check Current Metrics tab for data"})]})]}),g&&e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"📊"}),"Context Data Sent to AI"]}),e.jsx("div",{className:"bg-white rounded-lg p-3 border text-xs font-mono text-gray-800 max-h-60 overflow-y-auto",children:e.jsx("pre",{className:"whitespace-pre-wrap",children:JSON.stringify(N(),null,2)})}),e.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"This data includes athlete info, 7-day biometric history, and genetic profiles from both tables."})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[i.length===0&&e.jsxs("div",{className:"text-center py-8 text-gray-500",children:[e.jsx("div",{className:"text-4xl mb-3",children:"🤖"}),e.jsxs("p",{className:"font-medium mb-2",children:["AI Assistant for ",t.name]}),e.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-sm text-green-800 font-medium mb-2",children:"🤖 AI Assistant Active"}),e.jsxs("p",{className:"text-xs text-green-700",children:["Connected to AI service with access to ",t.name,"'s biometric data from Current Metrics, Sleep Metrics, and other tabs."]})]}),e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Ask me about:"}),e.jsxs("ul",{className:"text-xs text-gray-400 space-y-1",children:[e.jsx("li",{children:"• Training recommendations based on current load"}),e.jsx("li",{children:"• Sleep analysis and recovery status"}),e.jsx("li",{children:"• HRV and heart rate trends"}),e.jsxs("li",{children:["• Nutrition advice for ",t.sport]}),e.jsx("li",{children:"• Performance optimization strategies"})]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-3",children:'💡 Try: "How is the training load today?" or "What does the sleep data show?"'})]}),i.map(M=>e.jsx("div",{className:`flex ${M.role==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] p-3 rounded-lg ${M.role==="user"?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[M.role==="assistant"?e.jsx("div",{className:"text-sm prose prose-sm max-w-none",children:e.jsx(fd,{children:M.content})}):e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:M.content}),e.jsx("p",{className:`text-xs mt-2 ${M.role==="user"?"text-blue-100":"text-gray-500"}`,children:M.timestamp.toLocaleTimeString()})]})},M.id)),c&&e.jsx("div",{className:"flex justify-start",children:e.jsx("div",{className:"bg-gray-100 p-3 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]}),e.jsx("span",{className:"text-sm text-gray-600",children:"AI is thinking..."})]})})}),e.jsx("div",{ref:p})]}),e.jsx("div",{className:"p-4 border-t border-gray-200",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("textarea",{value:l,onChange:M=>o(M.target.value),onKeyPress:k,placeholder:"Ask about training, recovery, nutrition...",className:"flex-1 p-3 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-gray-900 bg-white",rows:2,disabled:c}),e.jsxs("button",{onClick:y,disabled:!l.trim()||c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors duration-200 flex items-center gap-2",children:[e.jsx("span",{children:"Send"}),e.jsx("span",{children:"📤"})]})]})})]})},wd=({athlete:t,geneticSummary:n,athleteId:s})=>{const r=n.flatMap(h=>{let v=h.Genes||{};if(typeof v=="string")try{v=JSON.parse(v)}catch{v={}}if(Array.isArray(v)){if(typeof v[0]=="object"&&v[0]!==null)return v.map(N=>({gene:N.gene||N.Gene||N.rsid||N.RSID||"Unknown",genotype:N.genotype||N.Genotype||"Unknown",rsid:N.rsid||N.RSID||"",category:h.Category||h.category||"Unknown",summary:h})).filter(N=>!N.gene.startsWith("$")&&N.gene!=="id"&&N.gene!=="Id"&&N.gene!=="ID");{const N=v.reduce((y,k)=>(y[k.Key||k.key]=k.Value||k.value,y),{});return Object.entries(N).filter(([y])=>!y.startsWith("$")&&y!=="id"&&y!=="Id"&&y!=="ID").map(([y,k])=>({gene:y,genotype:k,rsid:"",category:h.Category||h.category||"Unknown",summary:h}))}}else if(typeof v=="object"&&v!==null)return Object.entries(v).filter(([y])=>!y.startsWith("$")&&y!=="id"&&y!=="Id"&&y!=="ID").map(([y,k])=>({gene:y,genotype:k,rsid:"",category:h.Category||h.category||"Unknown",summary:h}));return[]}),i={"Core Sleep markers":{genes:{COMT:{rsid:"rs4680",analysis:{GG:{impact:"beneficial",description:"Better dopamine metabolism, improved sleep quality and cognitive function",color:"green"},GA:{impact:"neutral",description:"Moderate dopamine metabolism",color:"yellow"},AA:{impact:"challenging",description:"Slower dopamine metabolism, may affect sleep and stress response",color:"red"}}},"PER3 VNTR":{rsid:"rs57875989",analysis:{"4/4":{impact:"beneficial",description:"Morning chronotype, better sleep efficiency",color:"green"},"4/5":{impact:"neutral",description:"Intermediate chronotype",color:"yellow"},"5/5":{impact:"challenging",description:"Evening chronotype, may have sleep difficulties",color:"red"}}},CLOCK:{rsid:"rs1801260",analysis:{TT:{impact:"beneficial",description:"Better circadian rhythm regulation",color:"green"},TC:{impact:"neutral",description:"Moderate circadian regulation",color:"yellow"},CC:{impact:"challenging",description:"Evening preference, potential sleep issues",color:"red"}}},BDNF:{rsid:"rs6265",analysis:{"Val/Val":{impact:"beneficial",description:"Enhanced neuroplasticity and sleep quality",color:"green"},"Val/Met":{impact:"neutral",description:"Moderate neuroplasticity",color:"yellow"},"Met/Met":{impact:"challenging",description:"Reduced neuroplasticity, may affect sleep recovery",color:"red"}}},PPARGC1A:{rsid:"rs8192678",analysis:{GG:{impact:"beneficial",description:"Enhanced mitochondrial function and sleep recovery",color:"green"},GA:{impact:"neutral",description:"Moderate mitochondrial function",color:"yellow"},AA:{impact:"challenging",description:"Reduced mitochondrial efficiency",color:"red"}}},ACTN3:{rsid:"rs1815739",analysis:{RR:{impact:"beneficial",description:"Fast-twitch fiber dominance, explosive power",color:"green"},RX:{impact:"neutral",description:"Mixed fiber types",color:"yellow"},XX:{impact:"beneficial",description:"Slow-twitch fiber dominance, endurance focus",color:"green"}}},NOS3:{rsid:"rs1799983",analysis:{TT:{impact:"beneficial",description:"Optimal nitric oxide production",color:"green"},GT:{impact:"neutral",description:"Moderate nitric oxide production",color:"yellow"},GG:{impact:"challenging",description:"Reduced nitric oxide production",color:"red"}}},TPH2:{rsid:"rs4570625",analysis:{CC:{impact:"beneficial",description:"Optimal serotonin regulation",color:"green"},CT:{impact:"neutral",description:"Moderate serotonin regulation",color:"yellow"},TT:{impact:"challenging",description:"Altered serotonin regulation",color:"red"}}},GABRA6:{rsid:"rs3219151",analysis:{GG:{impact:"beneficial",description:"Enhanced GABA function, better sleep",color:"green"},GA:{impact:"neutral",description:"Moderate GABA function",color:"yellow"},AA:{impact:"challenging",description:"Reduced GABA function",color:"red"}}},GSK3B:{rsid:"",analysis:{default:{impact:"neutral",description:"Glycogen synthase kinase regulation",color:"blue"}}},PER2:{rsid:"",analysis:{default:{impact:"neutral",description:"Circadian rhythm regulation",color:"blue"}}}},description:"Genes influencing sleep quality, circadian rhythms, and sleep recovery"},"Mental Health":{genes:{COMT:{rsid:"rs4680",analysis:{GG:{impact:"beneficial",description:"Efficient dopamine metabolism, better stress response",color:"green"},GA:{impact:"neutral",description:"Balanced dopamine metabolism",color:"yellow"},AA:{impact:"challenging",description:"Slower dopamine clearance, may increase anxiety",color:"red"}}},"SLC6A4 5-HTTLPR":{rsid:"rs4795541",analysis:{LL:{impact:"beneficial",description:"Efficient serotonin transport, better mood regulation",color:"green"},LS:{impact:"neutral",description:"Moderate serotonin transport",color:"yellow"},SS:{impact:"challenging",description:"Reduced serotonin transport, higher anxiety risk",color:"red"}}},TPH2:{rsid:"rs4570625",analysis:{CC:{impact:"beneficial",description:"Optimal serotonin synthesis",color:"green"},CT:{impact:"neutral",description:"Moderate serotonin synthesis",color:"yellow"},TT:{impact:"challenging",description:"Reduced serotonin synthesis",color:"red"}}},BDNF:{rsid:"rs6265",analysis:{"Val/Val":{impact:"beneficial",description:"Enhanced neuroplasticity and resilience",color:"green"},"Val/Met":{impact:"neutral",description:"Moderate neuroplasticity",color:"yellow"},"Met/Met":{impact:"challenging",description:"Reduced neuroplasticity, higher depression risk",color:"red"}}},"MAO-A":{rsid:"rs6323",analysis:{TT:{impact:"beneficial",description:"Balanced neurotransmitter metabolism",color:"green"},TC:{impact:"neutral",description:"Moderate metabolism",color:"yellow"},CC:{impact:"challenging",description:"Altered metabolism, potential mood issues",color:"red"}}},FKBP5:{rsid:"rs1360780",analysis:{TT:{impact:"beneficial",description:"Better stress response regulation",color:"green"},CT:{impact:"neutral",description:"Moderate stress response",color:"yellow"},CC:{impact:"challenging",description:"Heightened stress response",color:"red"}}},GABRA6:{rsid:"rs3219151",analysis:{GG:{impact:"beneficial",description:"Enhanced GABA function, anxiety reduction",color:"green"},GA:{impact:"neutral",description:"Moderate GABA function",color:"yellow"},AA:{impact:"challenging",description:"Reduced GABA function, higher anxiety",color:"red"}}},HTR1A:{rsid:"rs6295",analysis:{GG:{impact:"beneficial",description:"Better serotonin receptor function",color:"green"},GC:{impact:"neutral",description:"Moderate receptor function",color:"yellow"},CC:{impact:"challenging",description:"Reduced receptor function",color:"red"}}},OXTR:{rsid:"rs53576",analysis:{GG:{impact:"beneficial",description:"Enhanced social bonding and trust",color:"green"},GA:{impact:"neutral",description:"Moderate social bonding",color:"yellow"},AA:{impact:"challenging",description:"Reduced social bonding capacity",color:"red"}}}},description:"Genes affecting mood regulation, anxiety, stress response, and mental resilience"},"Cardiovascular markers":{genes:{APOE:{rsid:"rs429358",analysis:{"E2/E2":{impact:"beneficial",description:"Lowest cardiovascular risk, better lipid metabolism",color:"green"},"E2/E3":{impact:"beneficial",description:"Low cardiovascular risk",color:"green"},"E3/E3":{impact:"neutral",description:"Average cardiovascular risk",color:"yellow"},"E2/E4":{impact:"neutral",description:"Moderate cardiovascular risk",color:"yellow"},"E3/E4":{impact:"challenging",description:"Elevated cardiovascular risk",color:"red"},"E4/E4":{impact:"challenging",description:"Highest cardiovascular risk",color:"red"}}},NOS3:{rsid:"rs1799983",analysis:{TT:{impact:"beneficial",description:"Optimal endothelial function and blood flow",color:"green"},GT:{impact:"neutral",description:"Moderate endothelial function",color:"yellow"},GG:{impact:"challenging",description:"Reduced endothelial function",color:"red"}}},ACE:{rsid:"rs4341",analysis:{II:{impact:"beneficial",description:"Lower blood pressure, better endurance",color:"green"},ID:{impact:"neutral",description:"Moderate ACE activity",color:"yellow"},DD:{impact:"challenging",description:"Higher blood pressure, power advantage",color:"red"}}},AGT:{rsid:"rs699",analysis:{CC:{impact:"beneficial",description:"Lower angiotensinogen levels",color:"green"},CT:{impact:"neutral",description:"Moderate angiotensinogen levels",color:"yellow"},TT:{impact:"challenging",description:"Higher angiotensinogen levels",color:"red"}}},ADRB2:{rsid:"rs1042713",analysis:{GG:{impact:"beneficial",description:"Better bronchodilation and cardiovascular response",color:"green"},GA:{impact:"neutral",description:"Moderate response",color:"yellow"},AA:{impact:"challenging",description:"Reduced bronchodilation",color:"red"}}},"MTHFR C677T":{rsid:"rs1801133",analysis:{CC:{impact:"beneficial",description:"Normal homocysteine metabolism",color:"green"},CT:{impact:"neutral",description:"Moderate homocysteine elevation risk",color:"yellow"},TT:{impact:"challenging",description:"Elevated homocysteine risk",color:"red"}}},LPA:{rsid:"rs3798220",analysis:{low:{impact:"beneficial",description:"Lower cardiovascular risk",color:"green"},high:{impact:"challenging",description:"Elevated cardiovascular risk",color:"red"}}},CRP:{rsid:"rs1205",analysis:{CC:{impact:"beneficial",description:"Lower inflammation risk",color:"green"},CG:{impact:"neutral",description:"Moderate inflammation risk",color:"yellow"},GG:{impact:"challenging",description:"Higher inflammation risk",color:"red"}}}},description:"Genes influencing heart health, blood pressure, cholesterol metabolism, and cardiovascular disease risk"},"Metabolic Health":{genes:{TCF7L2:{rsid:"rs7903146",analysis:{TT:{impact:"beneficial",description:"Lower type 2 diabetes risk",color:"green"},CT:{impact:"neutral",description:"Moderate diabetes risk",color:"yellow"},CC:{impact:"challenging",description:"Elevated type 2 diabetes risk",color:"red"}}},PPARG:{rsid:"rs1801282",analysis:{CC:{impact:"beneficial",description:"Better insulin sensitivity",color:"green"},CG:{impact:"neutral",description:"Moderate insulin sensitivity",color:"yellow"},GG:{impact:"challenging",description:"Reduced insulin sensitivity",color:"red"}}},FTO:{rsid:"rs9939609",analysis:{AA:{impact:"beneficial",description:"Lower obesity risk",color:"green"},AT:{impact:"neutral",description:"Moderate obesity risk",color:"yellow"},TT:{impact:"challenging",description:"Elevated obesity risk",color:"red"}}},MC4R:{rsid:"rs17782313",analysis:{CC:{impact:"beneficial",description:"Better appetite regulation",color:"green"},CT:{impact:"neutral",description:"Moderate appetite control",color:"yellow"},TT:{impact:"challenging",description:"Reduced appetite regulation",color:"red"}}},ADIPOQ:{rsid:"rs266729",analysis:{GG:{impact:"beneficial",description:"Better adiponectin function",color:"green"},GA:{impact:"neutral",description:"Moderate adiponectin function",color:"yellow"},AA:{impact:"challenging",description:"Reduced adiponectin function",color:"red"}}},SLC2A2:{rsid:"rs5400",analysis:{GG:{impact:"beneficial",description:"Better glucose transport",color:"green"},GA:{impact:"neutral",description:"Moderate glucose transport",color:"yellow"},AA:{impact:"challenging",description:"Reduced glucose transport",color:"red"}}},MTNR1B:{rsid:"rs10830963",analysis:{GG:{impact:"beneficial",description:"Lower diabetes risk",color:"green"},GC:{impact:"neutral",description:"Moderate diabetes risk",color:"yellow"},CC:{impact:"challenging",description:"Elevated diabetes risk",color:"red"}}},GCK:{rsid:"rs1799884",analysis:{AA:{impact:"beneficial",description:"Normal glucose sensing",color:"green"},AG:{impact:"neutral",description:"Moderate glucose sensing",color:"yellow"},GG:{impact:"challenging",description:"Altered glucose sensing",color:"red"}}}},description:"Genes affecting metabolism, insulin sensitivity, obesity risk, and type 2 diabetes"},"Power and Strength":{genes:{ACE:{rsid:"rs4341",analysis:{DD:{impact:"beneficial",description:"Power advantage, better strength gains",color:"green"},ID:{impact:"neutral",description:"Balanced power/endurance",color:"yellow"},II:{impact:"beneficial",description:"Endurance advantage",color:"green"}}},ACTN3:{rsid:"rs1815739",analysis:{RR:{impact:"beneficial",description:"Elite power genetics, fast-twitch dominance",color:"green"},RX:{impact:"neutral",description:"Mixed fiber types",color:"yellow"},XX:{impact:"beneficial",description:"Endurance genetics, slow-twitch dominance",color:"green"}}},AGT:{rsid:"rs699",analysis:{TT:{impact:"beneficial",description:"Better strength potential",color:"green"},CT:{impact:"neutral",description:"Moderate strength potential",color:"yellow"},CC:{impact:"challenging",description:"Reduced strength potential",color:"red"}}},CKM:{rsid:"rs8111989",analysis:{AA:{impact:"beneficial",description:"Enhanced creatine kinase activity",color:"green"},AG:{impact:"neutral",description:"Moderate creatine kinase activity",color:"yellow"},GG:{impact:"challenging",description:"Reduced creatine kinase activity",color:"red"}}},IL6:{rsid:"rs1800795",analysis:{CC:{impact:"beneficial",description:"Better inflammation control",color:"green"},CG:{impact:"neutral",description:"Moderate inflammation control",color:"yellow"},GG:{impact:"challenging",description:"Higher inflammation risk",color:"red"}}},NOS3:{rsid:"rs1799983",analysis:{TT:{impact:"beneficial",description:"Optimal blood flow to muscles",color:"green"},GT:{impact:"neutral",description:"Moderate blood flow",color:"yellow"},GG:{impact:"challenging",description:"Reduced blood flow",color:"red"}}},PPARA:{rsid:"rs4253778",analysis:{GG:{impact:"beneficial",description:"Enhanced fat metabolism",color:"green"},GA:{impact:"neutral",description:"Moderate fat metabolism",color:"yellow"},AA:{impact:"challenging",description:"Reduced fat metabolism",color:"red"}}},PPARGC1A:{rsid:"rs8192678",analysis:{GG:{impact:"beneficial",description:"Superior mitochondrial function",color:"green"},GA:{impact:"neutral",description:"Moderate mitochondrial function",color:"yellow"},AA:{impact:"challenging",description:"Reduced mitochondrial function",color:"red"}}},SOD2:{rsid:"rs4880",analysis:{TT:{impact:"beneficial",description:"Better antioxidant protection",color:"green"},CT:{impact:"neutral",description:"Moderate antioxidant protection",color:"yellow"},CC:{impact:"challenging",description:"Reduced antioxidant protection",color:"red"}}}},description:"Genes influencing muscle fiber composition, strength development, and power output"},"Endurance Capability":{genes:{ACE:{rsid:"rs4341",analysis:{II:{impact:"beneficial",description:"Superior endurance capacity",color:"green"},ID:{impact:"neutral",description:"Balanced capacity",color:"yellow"},DD:{impact:"beneficial",description:"Power advantage",color:"green"}}},ACTN3:{rsid:"rs1815739",analysis:{XX:{impact:"beneficial",description:"Elite endurance genetics",color:"green"},RX:{impact:"neutral",description:"Mixed capacity",color:"yellow"},RR:{impact:"beneficial",description:"Power genetics",color:"green"}}},COMT:{rsid:"rs4680",analysis:{GG:{impact:"beneficial",description:"Better pain tolerance",color:"green"},GA:{impact:"neutral",description:"Moderate pain tolerance",color:"yellow"},AA:{impact:"challenging",description:"Lower pain tolerance",color:"red"}}},CRP:{rsid:"rs1205",analysis:{CC:{impact:"beneficial",description:"Lower chronic inflammation",color:"green"},CG:{impact:"neutral",description:"Moderate inflammation",color:"yellow"},GG:{impact:"challenging",description:"Higher chronic inflammation",color:"red"}}},DRD4:{rsid:"rs1800955",analysis:{"4R/4R":{impact:"beneficial",description:"Better focus and endurance",color:"green"},"4R/7R":{impact:"neutral",description:"Moderate focus",color:"yellow"},"7R/7R":{impact:"challenging",description:"Reduced focus capacity",color:"red"}}},HFE:{rsid:"rs1799945",analysis:{CC:{impact:"beneficial",description:"Normal iron metabolism",color:"green"},CG:{impact:"neutral",description:"Moderate iron metabolism",color:"yellow"},GG:{impact:"challenging",description:"Altered iron metabolism",color:"red"}}},PPARA:{rsid:"rs4253778",analysis:{GG:{impact:"beneficial",description:"Enhanced aerobic capacity",color:"green"},GA:{impact:"neutral",description:"Moderate aerobic capacity",color:"yellow"},AA:{impact:"challenging",description:"Reduced aerobic capacity",color:"red"}}},UCP3:{rsid:"rs1800849",analysis:{CC:{impact:"beneficial",description:"Better energy efficiency",color:"green"},CT:{impact:"neutral",description:"Moderate energy efficiency",color:"yellow"},TT:{impact:"challenging",description:"Reduced energy efficiency",color:"red"}}},VEGFA:{rsid:"rs2010963",analysis:{CC:{impact:"beneficial",description:"Enhanced angiogenesis",color:"green"},CT:{impact:"neutral",description:"Moderate angiogenesis",color:"yellow"},TT:{impact:"challenging",description:"Reduced angiogenesis",color:"red"}}}},description:"Genes affecting aerobic capacity, fatigue resistance, and endurance performance"},"Injury Risk":{genes:{COL1A1:{rsid:"rs1800012",analysis:{GG:{impact:"beneficial",description:"Stronger collagen structure",color:"green"},GT:{impact:"neutral",description:"Moderate collagen strength",color:"yellow"},TT:{impact:"challenging",description:"Weaker collagen structure",color:"red"}}},COL5A1:{rsid:"rs12722",analysis:{CC:{impact:"beneficial",description:"Better tendon integrity",color:"green"},CT:{impact:"neutral",description:"Moderate tendon integrity",color:"yellow"},TT:{impact:"challenging",description:"Higher tendon injury risk",color:"red"}}},GDF5:{rsid:"rs143383",analysis:{TT:{impact:"beneficial",description:"Better joint health",color:"green"},TC:{impact:"neutral",description:"Moderate joint health",color:"yellow"},CC:{impact:"challenging",description:"Higher joint injury risk",color:"red"}}}},description:"Genes influencing connective tissue strength, tendon integrity, and injury susceptibility"},"Recovery & Adaptation":{genes:{PPARGC1A:{rsid:"rs8192678",analysis:{GG:{impact:"beneficial",description:"Superior recovery capacity",color:"green"},GA:{impact:"neutral",description:"Moderate recovery capacity",color:"yellow"},AA:{impact:"challenging",description:"Reduced recovery capacity",color:"red"}}},BDNF:{rsid:"rs6265",analysis:{"Val/Val":{impact:"beneficial",description:"Enhanced adaptation and learning",color:"green"},"Val/Met":{impact:"neutral",description:"Moderate adaptation",color:"yellow"},"Met/Met":{impact:"challenging",description:"Reduced adaptation capacity",color:"red"}}},COMT:{rsid:"rs4680",analysis:{GG:{impact:"beneficial",description:"Better stress recovery",color:"green"},GA:{impact:"neutral",description:"Moderate stress recovery",color:"yellow"},AA:{impact:"challenging",description:"Slower stress recovery",color:"red"}}}},description:"Genes affecting recovery rate, adaptation to training, and stress response"}},a=(h,v,N)=>{const k=i[h]?.genes??void 0;if(!k||!(v in k))return{impact:"unknown",description:"Analysis not available",color:"gray"};const E=k[v];return E?.analysis&&E.analysis[N]||E?.analysis?.default||{impact:"unknown",description:"Analysis not available",color:"gray"}},l=(h,v)=>{for(const[N,y]of Object.entries(i))if((y.genes||{})[h])return a(N,h,v);return{impact:"unknown",description:"Analysis not available",color:"gray"}},o=h=>(h||"").toUpperCase().replace(/\s+/g,""),c=h=>h==="beneficial"?1:h==="challenging"?-1:0,m=h=>{const v=new Set(h.map(o)),N=r.filter(E=>v.has(o(E.gene)));if(N.length===0)return 50;const k=N.reduce((E,M)=>E+c(l(M.gene,M.genotype).impact),0)/N.length;return Math.round((k+1)*50)},d=h=>h>=70?"bg-green-50 text-green-700 border-green-200":h>=50?"bg-yellow-50 text-yellow-700 border-yellow-200":"bg-red-50 text-red-700 border-red-200",x=[{key:"power",label:"Scrum/Collision Power",icon:"🏉",genes:["ACTN3","ACE","AGT","CKM","PPARGC1A","PPARA","IL6","SOD2","NOS3"]},{key:"endurance",label:"Sprint Repeatability",icon:"⚡",genes:["ACE","ACTN3","PPARA","UCP3","VEGFA","CRP","COMT"]},{key:"recovery",label:"Recovery Capacity",icon:"🔄",genes:["PPARGC1A","BDNF","COMT","NOS3"]},{key:"tissue",label:"Tissue Integrity Risk",icon:"🩹",genes:["COL1A1","COL5A1","GDF5","IL6"]},{key:"concussion",label:"Concussion/Contact Risk",icon:"🧠",genes:["APOE","MTHFR C677T","PEMT","CRP"]}],g=h=>{const v=new Set(h.map(o)),N=new Map;for(const y of r){const k=o(y.gene);v.has(k)&&(N.has(k)||N.set(k,y))}return Array.from(N.values())},u=[{name:"Core Sleep",genes:["COMT","PER3","CLOCK","BDNF","PPARGC1A","ACTN3","NOS3","TPH2","GABRA6","GSK3B","PER2"],icon:"😴"},{name:"Mental Health",genes:["COMT","SLC6A4","TPH2","BDNF","MAO-A","FKBP5","GABRA6","HTR1A","OXTR"],icon:"🧠"},{name:"Cardiovascular",genes:["APOE","NOS3","ACE","AGT","ADRB2","MTHFR","LPA","CRP"],icon:"❤️"},{name:"Metabolic Health",genes:["TCF7L2","PPARG","FTO","MC4R","ADIPOQ","SLC2A2","MTNR1B","GCK"],icon:"⚡"},{name:"Power and Strength",genes:["ACTN3","ACE","AGT","CKM","IL6","NOS3","PPARA","PPARGC1A","SOD2"],icon:"💪"},{name:"Endurance Capability",genes:["ACE","ACTN3","COMT","CRP","DRD4","HFE","PPARA","UCP3","VEGFA"],icon:"🏃"},{name:"Knee injury Risk",genes:["COL1A1","GDF5"],icon:"🦵"},{name:"Achilles Tendonitis Risk",genes:["COL5A1"],icon:"🦵"},{name:"Bone and Joint Health Risk",genes:["COL6A4P1","IL1R1","MCF2L","VDR","CYP2R1","NADSYN1","GC"],icon:"🦴"},{name:"Lower Back Pain risk",genes:["CILP","COL11A1","COL9A3"],icon:"🦴"},{name:"Soft tissue Injury Risk",genes:["AMPD1","GDF5","INS-IGF2"],icon:"🩹"},{name:"General Injury risk",genes:["COL5A1","GDF5","COL1A1"],icon:"🩹"},{name:"Anxiety risk",genes:["COMT","SLC6A4","TPH2","BDNF","MAO-A","FKBP5","HTR1A","IL1B","OPRM1","OXTR"],icon:"😰"},{name:"Cognitive Memory",genes:["ANK3","APOE","BDNF","CACNA1C","CETP","DRD2","TNF"],icon:"🧠"},{name:"Dopamine Reward",genes:["ANKK1","CACNA1C","COMT","DRD2","DRD4"],icon:"🎯"},{name:"HRV/Autonomic Stress",genes:["ADRB1","ADRB2","ACE","NOS3","CHRM2","RGS6"],icon:"❤️"},{name:"Methylation Pathways",genes:["MTHFR","MTRR","MTR","BHMT-02","CBS","SHMT1","PEMT","SLC19A1","TCN2","MTHFD1","FUT2","MAT1A","TPH2","VDR","GSTM1","GSTP1","GSTT1"],icon:"🧬"},{name:"Detox Phase 1",genes:["CYP1A1","CYP1A2","CYP1B1","CYP2A6","CYP2D6"],icon:"🛡️"},{name:"Detox Phase 2",genes:["GSTM1","GSTP1","GSTT1","NAT2","NQO1","SULT1A1"],icon:"🛡️"},{name:"Caffeine Metabolism",genes:["CYP1A2","AHR","POR","ADORA2A"],icon:"☕"},{name:"Estrogen Metabolism",genes:["COMT","CYP17A1","CYP19A1","GSTM1","GSTT1"],icon:"⚗️"},{name:"Sex hormone Metabolism",genes:["COMT","CYP1A1","CYP1B1","SULT1A1"],icon:"⚗️"},{name:"Vitamin B12 / Pernicious Anaemia",genes:["FUT2","MTR"],icon:"💊"},{name:"Gluten Sensitivity",genes:["TNF"],icon:"🌾"},{name:"Altitude Training Response",genes:["ACE","ADRB2","NOS3","PPARA"],icon:"⛰️"},{name:"Salt Sensitivity",genes:["ACE","AGT"],icon:"🧂"},{name:"Airway and Allergy",genes:["ADRB2","IL4","IL13","FCER1A","TSLP","FLG","HRH1","HRH4"],icon:"🌬️"},{name:"Bone Health Density",genes:["DBP","VDR"],icon:"🦴"},{name:"Inflammatory / Infection Response",genes:["IL6","TNF","TLR4","HLA-DQA1","HLA-DQB1","HLA-DRB1","PON1","SH2B3","PTPN22","SLC23A1","GPX1","FOXO3","IL1B","IRF5","SOCS2","CRP","GSTA1","IL17A","IL1A","IL1RN","HMOX1"],icon:"🦠"},{name:"Lactate Threshold",genes:["ACTN3","AMPD1","PPARGC1A","VEGFA"],icon:"⚡"},{name:"Energy production during Exercise",genes:["AMPD1","GABPB1","PPARA","PPARGC1A"],icon:"🔋"},{name:"Muscle building",genes:["ACTN3","ACE","MYH7","MSTN","FST","ACVR2B","IGF1","COL1A1","COL5A1","VDR","AR","CYP19A1","SHBG","IL6","TNF","SOD2"],icon:"🏋️"},{name:"Blood Clotting Risk",genes:["F2","F5"],icon:"🩸"},{name:"Blood Flow and Circulation",genes:["ACE","ADRB2","AGT","BDKRB2","NOS3"],icon:"💉"},{name:"Blood pressure Regulation",genes:["ACE","ADRB1","AGT","NOS3"],icon:"🩺"},{name:"Haemochromatosis Risk",genes:["HFE"],icon:"🩸"},{name:"Concussion Risk",genes:["APOE","MTHFR","PEMT"],icon:"🧠"}],p=["COL1A1","COL5A1","GDF5","IL6","CRP"];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-4xl font-bold text-white-900 mb-4",children:"🔬 Comprehensive Genetic Analysis"}),e.jsxs("p",{className:"text-xl text-gray-600 max-w-4xl mx-auto",children:["Athlete-specific genetic analysis for ",t.name,". Detailed analysis of ",r.filter(h=>!h.gene.startsWith("$")&&h.gene!=="id"&&h.gene!=="Id"&&h.gene!=="ID").length," genetic markers across ",Object.keys(i).length," health categories."]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-4 mb-8",children:u.map(h=>{const v=g(h.genes),N=h.genes.length,y=Math.min(v.length,N),k=v.filter(V=>l(V.gene,V.genotype).impact==="beneficial").length,E=v.filter(V=>l(V.gene,V.genotype).impact==="challenging").length,M=Math.min(k,y),A=Math.min(E,Math.max(y-M,0));return e.jsxs("div",{className:"card-enhanced p-4 text-center hover:shadow-lg transition-shadow",children:[e.jsx("div",{className:"text-2xl mb-2",children:h.icon}),e.jsx("div",{className:"text-sm font-semibold text-gray-900 mb-1 leading-tight",children:h.name}),e.jsxs("div",{className:"text-lg font-bold text-blue-600 mb-1",children:[y,"/",N]}),e.jsx("div",{className:"text-xs text-gray-500 mb-2",children:"markers"}),M>0&&e.jsxs("div",{className:"flex justify-center items-center gap-1 text-xs",children:[e.jsx("span",{className:"text-green-600",children:"●"}),e.jsx("span",{className:"text-green-600 font-medium",children:M})]}),A>0&&e.jsxs("div",{className:"flex justify-center items-center gap-1 text-xs mt-1",children:[e.jsx("span",{className:"text-red-600",children:"●"}),e.jsx("span",{className:"text-red-600 font-medium",children:A})]})]},h.name)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-green-700 mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"bg-green-100 p-2 rounded-full text-green-700",children:"💪"}),"Genetic Strengths"]}),e.jsxs("div",{className:"space-y-4",children:[r.filter(h=>l(h.gene,h.genotype).impact==="beneficial").slice(0,5).map((h,v)=>{const N=l(h.gene,h.genotype);return e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-green-50 rounded-lg border border-green-200",children:[e.jsx("span",{className:"text-green-600 mt-0.5",children:"✅"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-green-800 text-sm",children:[h.gene," (",h.genotype,")"]}),e.jsx("div",{className:"text-xs text-green-600 mt-1",children:N.description}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:h.category})]})]},v)}),r.filter(h=>l(h.gene,h.genotype).impact==="beneficial").length===0&&e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No significant genetic advantages identified"})]})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-orange-700 mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"bg-orange-100 p-2 rounded-full text-orange-700",children:"⚠️"}),"Areas for Attention"]}),e.jsxs("div",{className:"space-y-4",children:[r.filter(h=>l(h.gene,h.genotype).impact==="challenging").slice(0,5).map((h,v)=>{const N=l(h.gene,h.genotype);return e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-orange-50 rounded-lg border border-orange-200",children:[e.jsx("span",{className:"text-orange-600 mt-0.5",children:"⚠️"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium text-orange-800 text-sm",children:[h.gene," (",h.genotype,")"]}),e.jsx("div",{className:"text-xs text-orange-600 mt-1",children:N.description}),e.jsx("div",{className:"text-xs text-gray-500 mt-1",children:h.category})]})]},v)}),r.filter(h=>l(h.gene,h.genotype).impact==="challenging").length===0&&e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No significant genetic challenges identified"})]})]})]}),e.jsxs("div",{className:"card-enhanced p-6 mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-blue-700 mb-6 flex items-center gap-3",children:[e.jsx("span",{className:"bg-blue-100 p-2 rounded-full text-blue-700",children:"🎯"}),"Personalized Recommendations"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-blue-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"🏋️"}),"Training Focus"]}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[r.some(h=>h.gene==="ACTN3"&&l(h.gene,h.genotype).impact==="beneficial")&&e.jsx("li",{children:"• Prioritize explosive power training"}),r.some(h=>h.gene==="ACE"&&h.genotype.includes("II"))&&e.jsx("li",{children:"• Focus on endurance-based sessions"}),r.some(h=>h.gene==="COL5A1"&&l(h.gene,h.genotype).impact==="challenging")&&e.jsx("li",{children:"• Include extra mobility work"}),r.length>0&&!r.some(h=>["ACTN3","ACE"].includes(h.gene))&&e.jsx("li",{children:"• Balanced training approach recommended"})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-br from-green-50 to-green-100 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-green-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"🥗"}),"Nutrition Focus"]}),e.jsxs("ul",{className:"text-sm text-green-700 space-y-1",children:[r.some(h=>h.gene==="MTHFR"&&l(h.gene,h.genotype).impact==="challenging")&&e.jsx("li",{children:"• Consider methylated B vitamins"}),r.some(h=>h.gene==="PPARGC1A"&&l(h.gene,h.genotype).impact==="beneficial")&&e.jsx("li",{children:"• Higher carbohydrate tolerance"}),r.some(h=>h.gene==="FTO"&&l(h.gene,h.genotype).impact==="challenging")&&e.jsx("li",{children:"• Mindful portion control"}),r.length>0&&!r.some(h=>["MTHFR","PPARGC1A","FTO"].includes(h.gene))&&e.jsx("li",{children:"• Standard nutritional guidelines"})]})]}),e.jsxs("div",{className:"p-4 bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg",children:[e.jsxs("h4",{className:"font-semibold text-purple-800 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:"😴"}),"Recovery Focus"]}),e.jsxs("ul",{className:"text-sm text-purple-700 space-y-1",children:[r.some(h=>h.gene==="BDNF"&&l(h.gene,h.genotype).impact==="beneficial")&&e.jsx("li",{children:"• Excellent neuroplasticity for learning"}),r.some(h=>h.gene==="COMT"&&l(h.gene,h.genotype).impact==="challenging")&&e.jsx("li",{children:"• May need longer recovery periods"}),r.some(h=>h.gene==="PER3"&&h.genotype==="4/4")&&e.jsx("li",{children:"• Morning chronotype - early training optimal"}),r.length>0&&!r.some(h=>["BDNF","COMT","PER3"].includes(h.gene))&&e.jsx("li",{children:"• Standard recovery protocols"})]})]})]})]}),e.jsxs("div",{className:"card-enhanced p-6 mb-8",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center gap-3",children:[e.jsx("span",{className:"bg-gradient-to-r from-orange-100 to-red-100 p-2 rounded-full",children:"🏉"}),"Rugby Coach & Physio Toolkit"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6",children:x.map(h=>{const v=m(h.genes);return e.jsxs("div",{className:"p-4 rounded-lg border card-enhanced",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:h.icon}),e.jsx("div",{className:"text-sm font-semibold text-gray-900",children:h.label})]}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-bold border ${d(v)}`,children:v})]}),e.jsxs("ul",{className:"text-xs text-gray-700 space-y-1",children:[h.key==="power"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"• Heavy eccentrics/contrast if score ≥ 70"}),e.jsx("li",{children:"• Technique focus, progressive load if score < 50"})]}),h.key==="endurance"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"• Repeat sprints 6–10×30–40 m if score ≥ 60"}),e.jsx("li",{children:"• Extra aerobic base/tempo if score < 50"})]}),h.key==="recovery"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"• 48–72h between collision-heavy sessions if score < 50"}),e.jsx("li",{children:"• Morning HRV check-in on contact days"})]}),h.key==="tissue"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"• Tendon prep: isometrics, nordics 2×/week"}),e.jsx("li",{children:"• Avoid weekly sRPE spikes if score < 50"})]}),h.key==="concussion"&&e.jsxs(e.Fragment,{children:[e.jsx("li",{children:"• Neck strength 2–3×/week; strict HIA protocol"}),e.jsx("li",{children:"• Folate/B12 focus if MTHFR variants present"})]})]})]},h.key)})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Physio Watchlist"}),e.jsx("div",{className:"space-y-2",children:p.map(h=>{const v=r.find(E=>E.gene===h),y=(v?l(v.gene,v.genotype):{impact:"unknown",description:"No data",color:"gray"}).impact,k=y==="challenging"?"text-red-700 bg-red-50 border-red-200":y==="beneficial"?"text-green-700 bg-green-50 border-green-200":"text-yellow-700 bg-yellow-50 border-yellow-200";return e.jsxs("div",{className:`flex items-center justify-between p-2 rounded border ${k}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900",children:h}),e.jsx("span",{className:"font-mono text-gray-600 text-xs",children:v?.genotype||"—"})]}),e.jsx("span",{className:"text-xs font-semibold capitalize",children:y})]},h)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Return-to-Play Flags"}),e.jsxs("ul",{className:"text-sm text-gray-700 space-y-1",children:[e.jsx("li",{children:"• High tissue risk or low recovery score: limit collisions and sharp decelerations"}),e.jsx("li",{children:"• Concussion risk variants present: gradated contact exposure and strict monitoring"}),e.jsx("li",{children:"• Elevated inflammation profile (IL6/CRP): manage training load and recovery modalities"})]})]})]})]}),e.jsxs("section",{className:"card-enhanced p-8 bg-gradient-to-r from-blue-50 to-purple-50",children:[e.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"📊 Genetic Profile Summary"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-green-600 mb-2",children:r.filter(h=>l(h.gene,h.genotype).impact==="beneficial").length}),e.jsx("div",{className:"text-lg font-semibold text-green-800",children:"Beneficial Variants"}),e.jsx("div",{className:"text-sm text-green-600",children:"Genetic advantages identified"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-600 mb-2",children:r.filter(h=>l(h.gene,h.genotype).impact==="neutral").length}),e.jsx("div",{className:"text-lg font-semibold text-yellow-800",children:"Neutral Variants"}),e.jsx("div",{className:"text-sm text-yellow-600",children:"Average genetic profile"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-red-600 mb-2",children:r.filter(h=>l(h.gene,h.genotype).impact==="challenging").length}),e.jsx("div",{className:"text-lg font-semibold text-red-800",children:"Areas for Attention"}),e.jsx("div",{className:"text-sm text-red-600",children:"Potential optimization opportunities"})]})]}),e.jsxs("div",{className:"text-center text-gray-700",children:[e.jsx("p",{className:"text-lg mb-2",children:"This comprehensive genetic analysis provides personalized insights into your athletic potential, health risks, and optimization strategies."}),e.jsx("p",{className:"text-sm text-gray-600",children:"Remember: Genetics are one piece of the puzzle. Lifestyle, training, and nutrition play crucial roles in maximizing your genetic potential."})]})]})]})},kd=({geneticSummary:t})=>e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"text-center mb-8",children:e.jsx("h2",{className:"text-3xl font-bold text-white-900 mb-2",children:"🧬 Genetic Summary"})}),t.length>0?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"card-enhanced p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:t.length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Categories"})]}),e.jsxs("div",{className:"card-enhanced p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:t.reduce((n,s)=>{const r=s.Genes||s.genes||{};return n+Object.keys(r).filter(i=>!i.startsWith("$")&&i!=="id"&&i!=="Id"&&i!=="ID").length},0)}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Genes"})]}),e.jsxs("div",{className:"card-enhanced p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:new Set(t.flatMap(n=>{const s=n.Genes||n.genes||{};return Object.keys(s).filter(r=>!r.startsWith("$")&&r!=="id"&&r!=="Id"&&r!=="ID")})).size}),e.jsx("div",{className:"text-sm text-gray-600",children:"Unique Genes"})]}),e.jsxs("div",{className:"card-enhanced p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:t.filter(n=>{const s=n.Genes||n.genes||{};return Object.keys(s).length>0}).length}),e.jsx("div",{className:"text-sm text-gray-600",children:"Active Categories"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map((n,s)=>{const r=n.Category||n.category||"Unknown",i=n.Genes||n.genes||{},a=Object.keys(i).filter(c=>!c.startsWith("$")&&c!=="id"&&c!=="Id"&&c!=="ID").length,o={performance:{icon:"💪",color:"text-blue-600",bgColor:"bg-blue-50"},recovery:{icon:"🔄",color:"text-green-600",bgColor:"bg-green-50"},pharmacogenomics:{icon:"💊",color:"text-purple-600",bgColor:"bg-purple-50"},nutrigenomics:{icon:"🥗",color:"text-orange-600",bgColor:"bg-orange-50"},injury:{icon:"🛡️",color:"text-red-600",bgColor:"bg-red-50"},metabolism:{icon:"⚡",color:"text-yellow-600",bgColor:"bg-yellow-50"},cognition:{icon:"🧠",color:"text-indigo-600",bgColor:"bg-indigo-50"},sleep:{icon:"😴",color:"text-pink-600",bgColor:"bg-pink-50"}}[r.toLowerCase()]||{icon:"🧬",color:"text-gray-600",bgColor:"bg-gray-50"};return e.jsxs("div",{className:`card-enhanced p-6 ${o.bgColor} border-l-4`,style:{borderLeftColor:o.color.replace("text-","").replace("-600","")},children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-2xl",children:o.icon}),e.jsxs("div",{children:[e.jsx("h3",{className:`text-lg font-semibold ${o.color}`,children:String(r).replace(/_/g," ").replace(/\b\w/g,c=>c.toUpperCase())}),e.jsxs("p",{className:"text-sm text-gray-600",children:[Object.keys(i).filter(c=>!c.startsWith("$")&&c!=="id"&&c!=="Id"&&c!=="ID").length," ","genetic marker",Object.keys(i).filter(c=>!c.startsWith("$")&&c!=="id"&&c!=="Id"&&c!=="ID").length!==1?"s":""]})]})]}),a>0?e.jsxs("div",{className:"space-y-3",children:[Object.entries(i).filter(([c])=>!c.startsWith("$")&&c!=="id"&&c!=="Id"&&c!=="ID").slice(0,6).map(([c,m],d)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg shadow-sm",children:[e.jsx("div",{className:"font-medium text-gray-900",children:c}),e.jsx("div",{className:"font-mono font-bold text-blue-600",children:String(m)})]},d)),Object.keys(i).filter(c=>!c.startsWith("$")&&c!=="id"&&c!=="Id"&&c!=="ID").length>6&&e.jsxs("div",{className:"text-center text-sm text-gray-500 py-2",children:["+",Object.keys(i).filter(c=>!c.startsWith("$")&&c!=="id"&&c!=="Id"&&c!=="ID").length-6," ","more genes"]})]}):e.jsx("div",{className:"text-center py-4 text-gray-500",children:"No genetic data available for this category"})]},s)})})]}):e.jsxs("div",{className:"text-center py-12 card-enhanced",children:[e.jsx("div",{className:"text-6xl mb-4",children:"🧬"}),e.jsx("h4",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Genetic Summary Data"}),e.jsx("p",{className:"text-gray-600 max-w-md mx-auto",children:"No genetic summary data found in the athletegeneticsummary table for this athlete. Genetic testing results need to be uploaded to the database."})]})]}),yt=t=>{if(!t)return"";const n=new Date(t);return isNaN(n.getTime())?t:n.toLocaleDateString("en",{month:"short",day:"numeric"})},Sd=t=>{if(!t||t==="00:00")return null;const n=t.split(":");if(n.length<2)return null;const s=parseInt(n[0],10),r=parseInt(n[1],10);return isNaN(s)||isNaN(r)?null:s+r/60},De=(t,n,s,r)=>{const i=new Map;for(const a of t)a.date&&i.set(a.date,{date:a.date,dateLabel:yt(a.date),[s]:a.value});for(const a of n){if(!a.date)continue;const l=i.get(a.date);l?l[r]=a.value:i.set(a.date,{date:a.date,dateLabel:yt(a.date),[r]:a.value})}return Array.from(i.values()).sort((a,l)=>new Date(a.date).getTime()-new Date(l.date).getTime())},Ad=({athleteId:t,biometricData:n,geneticProfiles:s,className:r=""})=>{const[i,a]=I.useState([]),[l,o]=I.useState(!0);I.useEffect(()=>{let _=!0;return(async()=>{try{o(!0);const K=await Ts.getBloodResultsByAthlete(t);_&&a(Array.isArray(K)?K:[])}catch{_&&a([])}finally{_&&o(!1)}})(),()=>{_=!1}},[t]);const c=I.useMemo(()=>{const _=new Set;for(const K of s||[])K?.gene&&_.add(K.gene.toUpperCase());return _},[s]),m=_=>c.has(_.toUpperCase()),d=({genes:_})=>e.jsx("div",{className:"flex flex-wrap gap-2",children:_.map(K=>e.jsx("span",{className:`px-2 py-0.5 rounded-full text-xs border ${m(K)?"bg-purple-100 text-purple-700 border-purple-300":"bg-gray-100 text-gray-500 border-gray-200"}`,title:m(K)?"Detected in genetic profile":"Not detected in genetic profile",children:K},K))}),x=I.useMemo(()=>{const _=[...i||[]].filter(K=>!!K?.date);return _.sort((K,ne)=>new Date(K.date||"").getTime()-new Date(ne.date||"").getTime()),_},[i]),g=_=>x.map(K=>({date:K.date||"",value:typeof K[_]=="number"?K[_]:NaN})).filter(K=>K.date&&Number.isFinite(K.value)),u=I.useMemo(()=>[...n||[]].filter(_=>!!_?.date).sort((_,K)=>new Date(_.date).getTime()-new Date(K.date).getTime()),[n]),p=_=>u.map(K=>({date:K.date,value:Number(_(K))})).filter(K=>K.date&&Number.isFinite(K.value)),h=g("hba1c"),v=g("fasting_glucose"),N=De(h,v,"hba1c","fasting_glucose"),y=g("c_reactive_protein"),k=p(_=>_.hrv_night??null),E=De(y,k,"crp","hrv"),M=g("vitamin_d"),V=De(M,[],"vitamin_d","b12"),w=p(_=>_.training_load_pct??null),C=De(w,k,"training_load_pct","hrv"),S=I.useMemo(()=>{const _=[];for(const K of u){const ne=Sd(K.sleep_onset_time),Q=typeof K.deep_sleep_pct=="number"?K.deep_sleep_pct:null;ne!==null&&Q!==null&&Number.isFinite(ne)&&Number.isFinite(Q)&&_.push({onsetHour:ne,deep_pct:Q,dateLabel:yt(K.date)})}return _},[u]),T=g("testosterone"),D=g("cortisol_nmol_l"),G=I.useMemo(()=>{const _=new Map(T.map(ne=>[ne.date,ne.value])),K=[];for(const ne of D){const Q=_.get(ne.date);if(Number.isFinite(Q)&&Number.isFinite(ne.value)&&ne.value!==0){const he=Q/ne.value;K.push({date:ne.date,dateLabel:yt(ne.date),tcratio:he})}}return K.sort((ne,Q)=>new Date(ne.date).getTime()-new Date(Q.date).getTime())},[T,D]),Y=De(G.map(_=>({date:_.date,value:_.tcratio})),k,"tcratio","hrv"),q=g("hemoglobin"),R=g("erythrocyte_count"),$=p(_=>_.resting_hr??null),W=p(_=>_.spo2_night??null),P=De(q,R,"hemoglobin","rbc"),b=De($,W,"resting_hr","spo2"),X=I.useMemo(()=>{const _=[];for(const K of u){const ne=Number(K.hrv_night??NaN),Q=Number(K.resting_hr??NaN);if(Number.isFinite(ne)&&Number.isFinite(Q)){const he=Math.max(0,Math.min(1,(70-ne)/40)),Fe=Math.max(0,Math.min(1,(Q-50)/35)),Je=(he+Fe)/2;_.push({date:K.date,dateLabel:yt(K.date),hrv:ne,rhr:Q,stress_index:Number(Je.toFixed(3))})}}return _},[u]),O=p(_=>_.deep_sleep_pct??null);De(y,O,"crp","deep_sleep_pct");const f=p(_=>_.sleep_duration_h??null),z=De(M,f,"vitamin_d","sleep_h"),U=De(D,k,"cortisol","hrv");De(G.map(_=>({date:_.date,value:_.tcratio})),w,"tcratio","training_load_pct");const F=_=>e.jsx("div",{className:"card-enhanced p-6",children:_});return l?e.jsx("div",{className:`space-y-6 ${r}`,children:F(e.jsx("div",{className:"flex items-center justify-center text-gray-500 h-40",children:"Loading high-value comparisons..."}))}):e.jsxs("div",{className:`space-y-10 ${r}`,children:[F(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Insulin Resistance Risk"}),e.jsx("p",{className:"text-sm text-gray-600",children:"TCF7L2 / FTO → HbA1c & Fasting Glucose"})]}),e.jsx(d,{genes:["TCF7L2","FTO"]})]}),N.length>0?e.jsx(ie,{width:"100%",height:300,children:e.jsxs(Se,{data:N,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"dateLabel",stroke:"#6b7280"}),e.jsx(Z,{yAxisId:"left",stroke:"#6b7280",label:{value:"HbA1c (%)",angle:-90,position:"insideLeft"}}),e.jsx(Z,{yAxisId:"right",orientation:"right",stroke:"#6b7280",label:{value:"Glucose (mmol/L)",angle:90,position:"insideRight"}}),e.jsx(ae,{}),e.jsx(de,{}),e.jsx(J,{yAxisId:"left",type:"monotone",dataKey:"hba1c",name:"HbA1c (%)",stroke:"#8b5cf6",strokeWidth:3,dot:!0}),e.jsx(J,{yAxisId:"right",type:"monotone",dataKey:"fasting_glucose",name:"Fasting Glucose (mmol/L)",stroke:"#ef4444",strokeWidth:3,dot:!0})]})}):e.jsx("div",{className:"text-sm text-gray-500",children:"No HbA1c / Fasting Glucose data found."})]})),F(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Inflammation Expression"}),e.jsx("p",{className:"text-sm text-gray-600",children:"IL6 / TNFα → hs-CRP vs HRV"})]}),e.jsx(d,{genes:["IL6","TNFA","TNF"]})]}),E.length>0?e.jsx(ie,{width:"100%",height:300,children:e.jsxs(Se,{data:E,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"dateLabel",stroke:"#6b7280"}),e.jsx(Z,{yAxisId:"left",stroke:"#6b7280",label:{value:"HRV (ms)",angle:-90,position:"insideLeft"}}),e.jsx(Z,{yAxisId:"right",orientation:"right",stroke:"#6b7280",label:{value:"CRP (mg/L)",angle:90,position:"insideRight"}}),e.jsx(ae,{}),e.jsx(de,{}),e.jsx(Te,{yAxisId:"right",dataKey:"crp",name:"CRP (mg/L)",fill:"#f59e0b"}),e.jsx(J,{yAxisId:"left",type:"monotone",dataKey:"hrv",name:"HRV (ms)",stroke:"#10b981",strokeWidth:3,dot:!0})]})}):e.jsx("div",{className:"text-sm text-gray-500",children:"No CRP/HRV comparison data found."})]})),F(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Nutrient Utilization"}),e.jsx("p",{className:"text-sm text-gray-600",children:"VDR / MTHFR → Vitamin D & B12"})]}),e.jsx(d,{genes:["VDR","MTHFR"]})]}),V.length>0?e.jsx(ie,{width:"100%",height:260,children:e.jsxs(Me,{data:V,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"dateLabel",stroke:"#6b7280"}),e.jsx(Z,{stroke:"#6b7280"}),e.jsx(ae,{}),e.jsx(de,{}),e.jsx(J,{type:"monotone",dataKey:"vitamin_d",name:"Vitamin D (nmol/L)",stroke:"#3b82f6",strokeWidth:3,dot:!0}),V.some(_=>Number.isFinite(_.b12))&&e.jsx(J,{type:"monotone",dataKey:"b12",name:"Vitamin B12",stroke:"#ef4444",strokeWidth:3,dot:!0})]})}):e.jsx("div",{className:"text-sm text-gray-500",children:"No Vitamin D/B12 data found."})]})),F(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Power vs Endurance Alignment"}),e.jsx("p",{className:"text-sm text-gray-600",children:"ACTN3 / ACE → Training Load vs HRV"})]}),e.jsx(d,{genes:["ACTN3","ACE"]})]}),C.length>0?e.jsx(ie,{width:"100%",height:300,children:e.jsxs(Se,{data:C,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"dateLabel",stroke:"#6b7280"}),e.jsx(Z,{yAxisId:"left",stroke:"#6b7280",label:{value:"Load (%)",angle:-90,position:"insideLeft"}}),e.jsx(Z,{yAxisId:"right",orientation:"right",stroke:"#6b7280",label:{value:"HRV (ms)",angle:90,position:"insideRight"}}),e.jsx(ae,{}),e.jsx(de,{}),e.jsx(Te,{yAxisId:"left",dataKey:"training_load_pct",name:"Training Load (%)",fill:"#a78bfa"}),e.jsx(J,{yAxisId:"right",type:"monotone",dataKey:"hrv",name:"HRV (ms)",stroke:"#22c55e",strokeWidth:3,dot:!1})]})}):e.jsx("div",{className:"text-sm text-gray-500",children:"No training load/HRV data found."})]})),F(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Chronotype Match"}),e.jsx("p",{className:"text-sm text-gray-600",children:"CLOCK / PER3 → Sleep timing & Deep Sleep %"})]}),e.jsx(d,{genes:["CLOCK","PER3"]})]}),S.length>0?e.jsx(ie,{width:"100%",height:320,children:e.jsxs(mn,{children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{type:"number",dataKey:"onsetHour",name:"Sleep Onset",unit:"h",domain:[0,24],stroke:"#6b7280"}),e.jsx(Z,{type:"number",dataKey:"deep_pct",name:"Deep Sleep",unit:"%",domain:[0,100],stroke:"#6b7280"}),e.jsx(ae,{cursor:{strokeDasharray:"3 3"}}),e.jsx(de,{}),e.jsx(un,{name:"Onset vs Deep %",data:S,fill:"#f97316"})]})}):e.jsx("div",{className:"text-sm text-gray-500",children:"No sleep timing/deep sleep data found."})]})),F(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Anabolic Balance"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Testosterone / Cortisol ratio → HRV & training response"})]}),e.jsx(d,{genes:["COMT","NR3C1"]})]}),Y.length>0?e.jsx(ie,{width:"100%",height:300,children:e.jsxs(Se,{data:Y,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"dateLabel",stroke:"#6b7280"}),e.jsx(Z,{yAxisId:"left",stroke:"#6b7280",label:{value:"T/C Ratio",angle:-90,position:"insideLeft"}}),e.jsx(Z,{yAxisId:"right",orientation:"right",stroke:"#6b7280",label:{value:"HRV (ms)",angle:90,position:"insideRight"}}),e.jsx(ae,{}),e.jsx(de,{}),e.jsx(Te,{yAxisId:"left",dataKey:"tcratio",name:"T/C Ratio",fill:"#60a5fa"}),e.jsx(J,{yAxisId:"right",type:"monotone",dataKey:"hrv",name:"HRV (ms)",stroke:"#16a34a",strokeWidth:3,dot:!0})]})}):e.jsx("div",{className:"text-sm text-gray-500",children:"Insufficient testosterone/cortisol ratio data."})]})),F(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Oxygen-Carrying Efficiency"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Hb / RBC → Resting HR & SpO₂"})]}),e.jsx(d,{genes:["HFE"]})]}),P.length>0?e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx(ie,{width:"100%",height:280,children:e.jsxs(Se,{data:P,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"dateLabel",stroke:"#6b7280"}),e.jsx(Z,{yAxisId:"left",stroke:"#6b7280",label:{value:"Hemoglobin (g/dL)",angle:-90,position:"insideLeft"}}),e.jsx(Z,{yAxisId:"right",orientation:"right",stroke:"#6b7280",label:{value:"RBC (x10^12/L)",angle:90,position:"insideRight"}}),e.jsx(ae,{}),e.jsx(de,{}),e.jsx(J,{yAxisId:"left",type:"monotone",dataKey:"hemoglobin",name:"Hemoglobin",stroke:"#ef4444",strokeWidth:3,dot:!0}),e.jsx(J,{yAxisId:"right",type:"monotone",dataKey:"rbc",name:"RBC",stroke:"#a855f7",strokeWidth:3,dot:!0})]})}),b.length>0?e.jsx(ie,{width:"100%",height:280,children:e.jsxs(Se,{data:b,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"dateLabel",stroke:"#6b7280"}),e.jsx(Z,{yAxisId:"left",stroke:"#6b7280",label:{value:"Resting HR (bpm)",angle:-90,position:"insideLeft"}}),e.jsx(Z,{yAxisId:"right",orientation:"right",stroke:"#6b7280",label:{value:"SpO₂ (%)",angle:90,position:"insideRight"}}),e.jsx(ae,{}),e.jsx(de,{}),e.jsx(Te,{yAxisId:"left",dataKey:"resting_hr",name:"Resting HR",fill:"#fb7185"}),e.jsx(J,{yAxisId:"right",type:"monotone",dataKey:"spo2",name:"SpO₂",stroke:"#0ea5e9",strokeWidth:3,dot:!0})]})}):e.jsx("div",{className:"text-sm text-gray-500",children:"No Resting HR/SpO₂ time series found."})]}):e.jsx("div",{className:"text-sm text-gray-500",children:"No Hb/RBC data found."})]})),F(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Stress Resilience"}),e.jsx("p",{className:"text-sm text-gray-600",children:"COMT / SLC6A4 → HRV & derived stress index"})]}),e.jsx(d,{genes:["COMT","SLC6A4"]})]}),X.length>0?e.jsx(ie,{width:"100%",height:280,children:e.jsxs(Se,{data:X,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),F(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Micronutrient-Linked Recovery"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Ferritin / Vitamin D → Sleep quality & fatigue"})]}),e.jsx(d,{genes:["HFE","VDR","MTHFR"]})]}),z.length>0?e.jsx(ie,{width:"100%",height:260,children:e.jsxs(Se,{data:z,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"dateLabel",stroke:"#6b7280"}),e.jsx(Z,{yAxisId:"left",stroke:"#6b7280",label:{value:"Sleep (h)",angle:-90,position:"insideLeft"}}),e.jsx(Z,{yAxisId:"right",orientation:"right",stroke:"#6b7280",label:{value:"Vitamin D (nmol/L)",angle:90,position:"insideRight"}}),e.jsx(ae,{}),e.jsx(de,{}),e.jsx(Te,{yAxisId:"left",dataKey:"sleep_h",name:"Sleep (hours)",fill:"#06b6d4"}),e.jsx(J,{yAxisId:"right",type:"monotone",dataKey:"vitamin_d",name:"Vitamin D",stroke:"#3b82f6",strokeWidth:3,dot:!0})]})}):e.jsx("div",{className:"text-sm text-gray-500",children:"Ferritin not in current schema; charting Vitamin D vs Sleep hours as recovery proxy."})]})),F(e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Stress Load Integration"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Cortisol levels → Morning HRV trend"})]})}),U.length>0?e.jsx(ie,{width:"100%",height:280,children:e.jsxs(Se,{data:U,children:[e.jsx(ce,{strokeDasharray:"3 3",stroke:"#e5e7eb"}),e.jsx(oe,{dataKey:"dateLabel",stroke:"#6b7280"}),e.jsx(Z,{yAxisId:"left",stroke:"#6b7280",label:{value:"HRV (ms)",angle:-90,position:"insideLeft"}}),e.jsx(Z,{yAxisId:"right",orientation:"right",stroke:"#6b7280",label:{value:"Cortisol (nmol/L)",angle:90,position:"insideRight"}}),e.jsx(ae,{}),e.jsx(de,{}),e.jsx(J,{yAxisId:"left",type:"monotone",dataKey:"hrv",name:"HRV (ms)",stroke:"#10b981",strokeWidth:3,dot:!0}),e.jsx(Te,{yAxisId:"right",dataKey:"cortisol",name:"Cortisol (nmol/L)",fill:"#ef4444"})]})}):e.jsx("div",{className:"text-sm text-gray-500",children:"No Cortisol/HRV paired data found."})]})),e.jsx(oe,{dataKey:"dateLabel",stroke:"#6b7280"}),e.jsx(Z,{yAxisId:"left",stroke:"#6b7280",label:{value:"HRV (ms)",angle:-90,position:"insideLeft"}}),e.jsx(Z,{yAxisId:"right",orientation:"right",stroke:"#6b7280",label:{value:"Stress Index (0-1)",angle:90,position:"insideRight"}}),e.jsx(ae,{}),e.jsx(de,{}),e.jsx(J,{yAxisId:"left",type:"monotone",dataKey:"hrv",name:"HRV (ms)",stroke:"#34d399",strokeWidth:3,dot:!1}),e.jsx(Te,{yAxisId:"right",dataKey:"stress_index",name:"Stress Index",fill:"#f59e0b"})]})}):e.jsx("div",{className:"text-sm text-gray-500",children:"No HRV/stress trend data found."})]})),F(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Cholesterol Efficiency (Data Availability)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"APOE / LDLR → LDL & HDL levels"})]}),e.jsx(d,{genes:["APOE","LDLR"]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"LDL/HDL markers are not present in current blood results schema. When available, this section will chart LDL & HDL trends and relate them to training load and HRV."})]})),F(e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Stimulant Sensitivity (Data Availability)"}),e.jsx("p",{className:"text-sm text-gray-600",children:"CYP1A2 → Caffeine use vs sleep latency"})]}),e.jsx(d,{genes:["CYP1A2"]})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Caffeine intake and sleep latency are not currently tracked. Once available, a scatter will compare reported caffeine timing/dose to measured sleep onset latency and deep sleep percentage."})]}))]})},Md=({athleteId:t})=>{const[n,s]=I.useState([]),[r,i]=I.useState([]),[a,l]=I.useState(!0),[o,c]=I.useState(null),[m,d]=I.useState(""),x=[{substance:"Anabolic steroids",status:"banned",notes:"All anabolic steroids are banned in and out of competition",bannedInCompetition:!0,bannedOutOfCompetition:!0},{substance:"Beta-2 agonists",status:"restricted",notes:"Only salbutamol, formoterol, salmeterol, and vilanterol permitted with TUE",bannedInCompetition:!0,bannedOutOfCompetition:!1},{substance:"Masking agents",status:"banned",notes:"All masking agents are prohibited",bannedInCompetition:!0,bannedOutOfCompetition:!0},{substance:"Diuretics",status:"banned",notes:"Masking agents - banned in and out of competition",bannedInCompetition:!0,bannedOutOfCompetition:!0},{substance:"Blood doping",status:"banned",notes:"EPO, darbepoetin, blood transfusions - strictly banned",bannedInCompetition:!0,bannedOutOfCompetition:!0},{substance:"Stimulants",status:"banned",notes:"Most stimulants banned, some permitted with TUE",bannedInCompetition:!0,bannedOutOfCompetition:!1},{substance:"Hormone modulators",status:"banned",notes:"Growth hormone, IGF-1, etc. - banned",bannedInCompetition:!0,bannedOutOfCompetition:!0},{substance:"Creatine",status:"compliant",notes:"Permitted supplement, not banned",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Caffeine",status:"compliant",notes:"Permitted up to 12μg/ml in urine",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Beta-alanine",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Glutamine",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"BCAAs",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Omega-3",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Vitamin D",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Magnesium",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Zinc",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Iron",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Probiotics",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Collagen",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Curcumin",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Quercetin",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Resveratrol",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Coenzyme Q10",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"L-citrulline",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Beetroot extract",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Green tea extract",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Methylated folate",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Methylcobalamin B12",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1},{substance:"Methylmalonic acid",status:"compliant",notes:"Permitted supplement",bannedInCompetition:!1,bannedOutOfCompetition:!1}];I.useEffect(()=>{t&&(async()=>{try{l(!0),c(null);const N=parseInt(t,10);if(isNaN(N))throw new Error("Invalid athlete ID");const[y,k]=await Promise.all([Ke.getNutrigenomicsByAthlete(N),Ke.getGeneticProfileByAthlete(N)]),E=Array.isArray(y)?y.map((M,A)=>({gene:M.gene||M.GeneName||`GENE_${A}`,genetic_call:M.genetic_call||M.GeneticCall||M.genotype||"Unknown",known_call:M.known_call||M.KnownCall,category:M.category||M.Category||"General",priority:M.priority||M.Priority||M.summary_flag||"medium",summary_flag:M.summary_flag||M.SummaryFlag,interpretation_code:M.interpretation_code||M.InterpretationCode||M.rationale,supplement:M.supplement||M.Supplement,dosage:M.dosage||M.Dosage,timing:M.timing||M.Timing,created_at:M.created_at||M.CreatedAt,confidence_score:M.confidence_score||M.ConfidenceScore,risk_level:M.risk_level||M.RiskLevel||(M.priority==="high"?"high":M.priority==="medium"?"medium":"low")})):[];s(E),i(k),d(`Athlete ${t}`)}catch(N){c(N instanceof Error?N.message:"Failed to load genetic data")}finally{l(!1)}})()},[t]);const g=I.useMemo(()=>{const v=[];return n.length>0&&n.forEach((N,y)=>{if(N.supplement&&N.gene){const k=x.find(E=>E.substance.toLowerCase().includes(N.supplement.toLowerCase()))||{status:"compliant",notes:"No specific WADA restrictions identified",bannedInCompetition:!1,bannedOutOfCompetition:!1};v.push({supplement:N.supplement,gene:N.gene,genotype:N.genetic_call||N.known_call||"Unknown",rationale:N.interpretation_code||"Genetic-based recommendation",dosage:N.dosage||"Dosage not specified",timing:N.timing||"Timing not specified",trainingDays:"Standard dosage",nonTrainingDays:"Reduced dosage or skip",priority:(N.priority||N.summary_flag||"medium").toLowerCase(),category:N.category||"General",wadaStatus:k.status,wadaNotes:k.notes,avoidIf:[],confidence_score:N.confidence_score,risk_level:N.risk_level,genetic_mark_id:`mark_${y}`})}}),v.length===0&&(Array.isArray(r)?r:[]).forEach(y=>{switch(y.gene){case"MTHFR":(y.genotype==="TT"||y.genotype==="CT")&&v.push({supplement:"Methylated Folate (5-MTHF)",gene:y.gene,genotype:y.genotype,rationale:"Reduced enzyme activity affects folate metabolism and homocysteine levels",dosage:"400-800 mcg daily",timing:"With breakfast for better absorption",trainingDays:"Standard dosage",nonTrainingDays:"Standard dosage",priority:y.genotype==="TT"?"high":"medium",category:"Methylation Support",wadaStatus:"compliant",wadaNotes:"Permitted supplement, no WADA restrictions",avoidIf:["Pregnancy without medical supervision"],confidence_score:.85,risk_level:y.genotype==="TT"?"high":"medium"});break;case"VDR":(y.genotype==="FF"||y.genotype==="Ff")&&v.push({supplement:"Vitamin D3",gene:y.gene,genotype:y.genotype,rationale:"Reduced vitamin D receptor sensitivity affects calcium metabolism and immune function",dosage:"2000-4000 IU daily (with blood testing)",timing:"With fat-containing meal for better absorption",trainingDays:"Standard dosage",nonTrainingDays:"Standard dosage",priority:"high",category:"Vitamin Metabolism",wadaStatus:"compliant",wadaNotes:"Permitted supplement, no WADA restrictions",avoidIf:["Hypercalcemia","Kidney stones"],confidence_score:.9,risk_level:"high"});break;case"FTO":(y.genotype==="AA"||y.genotype==="AT")&&v.push({supplement:"Green Tea Extract (EGCG)",gene:y.gene,genotype:y.genotype,rationale:"Increased risk of weight gain, enhanced fat oxidation support",dosage:"250-500 mg EGCG daily",timing:"30 minutes before exercise",trainingDays:"Standard dosage",nonTrainingDays:"Standard dosage",priority:"medium",category:"Metabolism",wadaStatus:"compliant",wadaNotes:"Permitted supplement, no WADA restrictions",avoidIf:["Iron deficiency","Excessive caffeine sensitivity"],confidence_score:.75,risk_level:"medium"});break;case"ACTN3":y.genotype==="XX"?v.push({supplement:"Creatine Monohydrate",gene:y.gene,genotype:y.genotype,rationale:"Reduced power/strength potential, creatine can help maintain ATP stores",dosage:"3-5g daily",timing:"Post-workout with carbohydrates",trainingDays:"Standard dosage",nonTrainingDays:"2-3g daily or skip",priority:"medium",category:"Performance",wadaStatus:"compliant",wadaNotes:"Permitted supplement, no WADA restrictions",avoidIf:["Kidney disease","Dehydration"],confidence_score:.8,risk_level:"medium"}):y.genotype==="RR"&&v.push({supplement:"Beta-Alanine",gene:y.gene,genotype:y.genotype,rationale:"Enhanced power capacity, buffering support for high-intensity efforts",dosage:"3-5g daily (divided doses)",timing:"Pre-workout",trainingDays:"Standard dosage",nonTrainingDays:"2-3g daily",priority:"medium",category:"Performance",wadaStatus:"compliant",wadaNotes:"Permitted supplement, no WADA restrictions",avoidIf:["Paresthesia sensitivity"],confidence_score:.8,risk_level:"low"});break;case"PPARGC1A":y.genotype.includes("Ser")&&(v.push({supplement:"Resveratrol",gene:y.gene,genotype:y.genotype,rationale:"Enhanced mitochondrial biogenesis response",dosage:"250-500mg daily",timing:"With dinner",trainingDays:"Standard dosage",nonTrainingDays:"Standard dosage",priority:"medium",category:"Mitochondrial Function",wadaStatus:"compliant",wadaNotes:"Permitted supplement, no WADA restrictions",avoidIf:["Blood thinning medications"],confidence_score:.7,risk_level:"low"}),v.push({supplement:"Coenzyme Q10",gene:y.gene,genotype:y.genotype,rationale:"Mitochondrial support for energy production",dosage:"100-200mg daily",timing:"With breakfast",trainingDays:"Standard dosage",nonTrainingDays:"Standard dosage",priority:"medium",category:"Mitochondrial Function",wadaStatus:"compliant",wadaNotes:"Permitted supplement, no WADA restrictions",avoidIf:["Blood thinning medications"],confidence_score:.75,risk_level:"low"}));break;case"ADRB2":y.genotype==="Gly16Gly"&&v.push({supplement:"Caffeine",gene:y.gene,genotype:y.genotype,rationale:"Reduced fat mobilization, strategic caffeine use for performance",dosage:"100-200mg (lower than typical doses)",timing:"Pre-workout (avoid late in day)",trainingDays:"Standard dosage",nonTrainingDays:"Skip or minimal dose",priority:"medium",category:"Metabolism",wadaStatus:"compliant",wadaNotes:"Permitted up to 12μg/ml in urine",avoidIf:["Heart conditions","Anxiety disorders"],confidence_score:.65,risk_level:"medium"});break;case"NOS3":(y.genotype==="CC"||y.genotype==="CT")&&v.push({supplement:"L-Citrulline",gene:y.gene,genotype:y.genotype,rationale:"Enhanced nitric oxide production support for circulation",dosage:"6-8g daily",timing:"30 minutes before exercise",trainingDays:"Standard dosage",nonTrainingDays:"3-4g daily",priority:"medium",category:"Cardiovascular",wadaStatus:"compliant",wadaNotes:"Permitted supplement, no WADA restrictions",avoidIf:["Low blood pressure","Herpes virus"],confidence_score:.8,risk_level:"low"});break}}),v},[n,r]);if(a)return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Supplements Report"}),e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),e.jsx("span",{className:"ml-2 text-gray-600",children:"Loading genetic data..."})]})]})});if(o)return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Supplements Report"}),e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-red-500 mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Error Loading Genetic Data"}),e.jsx("p",{className:"text-gray-600 mb-4",children:o}),e.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"Retry"})]})]})});const u=g.filter(v=>v.wadaStatus==="compliant"),p=g.filter(v=>v.wadaStatus==="restricted"),h=g.filter(v=>v.wadaStatus==="banned");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Supplements Guide"}),e.jsxs("p",{className:"text-gray-600 mt-1",children:["WADA-compliant supplement recommendations for ",m]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[u.length," WADA Compliant"]}),e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[p.length," Restricted"]}),e.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[h.length," Banned"]})]})]}),e.jsxs("button",{onClick:()=>window.location.reload(),className:"px-3 py-1 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors flex items-center gap-1",title:"Refresh supplement data",children:[e.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]}),u.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-green-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-full mr-2"}),"WADA Compliant Supplements (",u.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:u.map((v,N)=>e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:v.supplement}),e.jsxs("div",{className:"flex gap-1",children:[e.jsxs("span",{className:`px-2 py-1 text-xs rounded-full font-medium ${v.priority==="high"?"bg-red-100 text-red-800":v.priority==="medium"?"bg-yellow-100 text-yellow-800":"bg-green-100 text-green-800"}`,children:[v.priority," priority"]}),e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-green-100 text-green-800 font-medium",children:"WADA ✓"})]})]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Gene:"})," ",v.gene," (",v.genotype,")"]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Rationale:"})," ",v.rationale]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Dosage:"}),e.jsx("p",{className:"text-gray-700",children:v.dosage})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900",children:"Timing:"}),e.jsx("p",{className:"text-gray-700",children:v.timing})]})]}),e.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Training Days:"})," ",v.trainingDays]}),e.jsxs("div",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Non-Training Days:"})," ",v.nonTrainingDays]}),v.avoidIf.length>0&&e.jsxs("div",{className:"text-sm text-red-700",children:[e.jsx("span",{className:"font-medium",children:"Avoid if:"})," ",v.avoidIf.join(", ")]})]},v.genetic_mark_id||N))})]}),p.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-yellow-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-yellow-500 rounded-full mr-2"}),"Restricted Supplements (",p.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:p.map((v,N)=>e.jsxs("div",{className:"p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:v.supplement}),e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-yellow-100 text-yellow-800 font-medium",children:"WADA Restricted"})]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Gene:"})," ",v.gene," (",v.genotype,")"]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Rationale:"})," ",v.rationale]}),e.jsxs("p",{className:"text-sm text-yellow-800 mb-2",children:[e.jsx("span",{className:"font-medium",children:"WADA Notes:"})," ",v.wadaNotes]}),e.jsx("div",{className:"text-sm text-red-700",children:e.jsx("span",{className:"font-medium",children:"⚠️ Requires Therapeutic Use Exemption (TUE)"})})]},v.genetic_mark_id||N))})]}),h.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-red-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-3 h-3 bg-red-500 rounded-full mr-2"}),"Banned Supplements (",h.length,")"]}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:h.map((v,N)=>e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:v.supplement}),e.jsx("span",{className:"px-2 py-1 text-xs rounded-full bg-red-100 text-red-800 font-medium",children:"WADA Banned"})]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Gene:"})," ",v.gene," (",v.genotype,")"]}),e.jsxs("p",{className:"text-sm text-gray-700 mb-2",children:[e.jsx("span",{className:"font-medium",children:"Rationale:"})," ",v.rationale]}),e.jsxs("p",{className:"text-sm text-red-800 mb-2",children:[e.jsx("span",{className:"font-medium",children:"WADA Status:"})," ",v.wadaNotes]}),e.jsx("div",{className:"text-sm text-red-700 font-medium",children:"🚫 DO NOT USE - Violation of anti-doping rules"})]},v.genetic_mark_id||N))})]}),g.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-4xl mb-4",children:"💊"}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Specific Genetic-Based Supplement Recommendations"}),e.jsx("p",{className:"text-gray-600",children:"Based on available genetic data, no specific supplement recommendations were identified. Consider general WADA-compliant supplements for athletic performance."})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-800 mb-4 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"WADA Compliance Guidelines"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsx("h4",{className:"font-semibold text-blue-800 mb-3",children:"Permitted Supplements"}),e.jsxs("ul",{className:"text-sm text-blue-700 space-y-1",children:[e.jsx("li",{children:"• Vitamins and minerals within RDA"}),e.jsx("li",{children:"• Caffeine (up to 12μg/ml in urine)"}),e.jsx("li",{children:"• Creatine monohydrate"}),e.jsx("li",{children:"• Beta-alanine"}),e.jsx("li",{children:"• Amino acids (BCAAs, glutamine)"}),e.jsx("li",{children:"• Plant extracts (curcumin, quercetin)"}),e.jsx("li",{children:"• Omega-3 fatty acids"})]})]}),e.jsxs("div",{className:"p-4 bg-red-50 rounded-lg border border-red-200",children:[e.jsx("h4",{className:"font-semibold text-red-800 mb-3",children:"Strictly Prohibited"}),e.jsxs("ul",{className:"text-sm text-red-700 space-y-1",children:[e.jsx("li",{children:"• Anabolic steroids"}),e.jsx("li",{children:"• Masking agents"}),e.jsx("li",{children:"• Blood doping substances"}),e.jsx("li",{children:"• Beta-2 agonists (without TUE)"}),e.jsx("li",{children:"• Diuretics and masking agents"}),e.jsx("li",{children:"• Gene doping"}),e.jsx("li",{children:"• Hormonal modulators"})]})]})]})]}),e.jsxs("div",{className:"p-5 bg-blue-50 rounded-lg border border-blue-100",children:[e.jsx("h3",{className:"text-lg font-semibold text-blue-800 mb-2",children:"Implementation Guidelines"}),e.jsxs("ul",{className:"text-blue-700 text-sm list-disc pl-5 space-y-1",children:[e.jsx("li",{children:"Start with high-priority supplements and monitor response for 4-6 weeks"}),e.jsx("li",{children:"Introduce one supplement at a time to assess individual effects and tolerance"}),e.jsx("li",{children:"Combine with regular blood testing to optimize dosages and monitor safety"}),e.jsx("li",{children:"Adjust dosages based on training intensity and recovery needs"}),e.jsx("li",{children:"Always check for interactions with medications or other supplements"}),e.jsx("li",{children:"Store supplements properly and check expiration dates"}),e.jsx("li",{children:"Choose third-party tested supplements from reputable manufacturers"}),e.jsx("li",{children:"Consult with a sports dietitian or physician before starting new regimens"})]})]})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Training vs Non-Training Day Protocol"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[e.jsxs("h4",{className:"font-semibold text-green-800 mb-3 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-green-500 rounded-full mr-2"}),"Training Days (High Intensity)"]}),e.jsxs("div",{className:"space-y-2 text-sm text-green-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pre-workout:"}),e.jsx("span",{children:"Caffeine, beta-alanine, citrulline"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Intra-workout:"}),e.jsx("span",{children:"BCAAs, electrolytes"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Post-workout:"}),e.jsx("span",{children:"Creatine, protein, carbs"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Recovery:"}),e.jsx("span",{children:"Magnesium, zinc, omega-3"})]})]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxs("h4",{className:"font-semibold text-blue-800 mb-3 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full mr-2"}),"Non-Training Days (Recovery)"]}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-700",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Morning:"}),e.jsx("span",{children:"Vitamin D, methylated folate"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Midday:"}),e.jsx("span",{children:"Reduced caffeine, green tea extract"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Evening:"}),e.jsx("span",{children:"Magnesium, resveratrol"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Maintenance:"}),e.jsx("span",{children:"Omega-3, CoQ10, probiotics"})]})]})]})})]}),e.jsxs("div",{className:"mt-6 p-4 bg-yellow-50 rounded-lg border border-yellow-200",children:[e.jsx("h5",{className:"font-semibold text-yellow-800 mb-2",children:"Important Notes"}),e.jsxs("ul",{className:"text-yellow-700 text-sm space-y-1",children:[e.jsx("li",{children:"• Adjust dosages based on body weight, training volume, and individual tolerance"}),e.jsx("li",{children:"• Monitor for side effects and discontinue if adverse reactions occur"}),e.jsx("li",{children:"• Stay hydrated, especially when using creatine or caffeine"}),e.jsx("li",{children:"• Cycle supplements periodically to prevent tolerance and assess continued benefits"}),e.jsx("li",{children:"• Regular blood work helps optimize supplementation and prevents deficiencies"})]})]})]})]})},Cs=t=>{if(!t||t==="00:00")return null;const n=t.split(":");if(n.length<2)return null;const s=parseInt(n[0],10),r=parseInt(n[1],10);return isNaN(s)||isNaN(r)?null:s*60+r},kr=(t,n,s)=>{const r=Cs(t),i=Cs(n);if(r!==null&&i!==null){let a=i-r;return a<0&&(a+=24*60),Math.max(0,a)/60}return typeof s=="number"&&s>0?s:0},Ds=(t,n)=>!Array.isArray(t)||t.length===0||!n?0:t.filter(s=>s.date===n).reduce((s,r)=>s+kr(r.sleep_onset_time,r.wake_time,r.sleep_duration_h),0),Rd=t=>{const n=new Map;for(const s of t||[]){if(!s?.date)continue;const r=kr(s.sleep_onset_time,s.wake_time,s.sleep_duration_h);n.set(s.date,(n.get(s.date)||0)+r)}return Array.from(n.entries()).map(([s,r])=>({date:s,totalHours:r})).sort((s,r)=>new Date(s.date).getTime()-new Date(r.date).getTime())},Od=()=>{const{id:t}=Mr(),n=Rr(),s=parseInt(t||"0"),[r,i]=I.useState("metrics"),a=I.useRef(null),[l,o]=I.useState([]),{athlete:c,biometricData:m,geneticProfiles:d,loading:x}=Lr(s,!0),{biometricData:g}=_r(!0);I.useEffect(()=>{s&&(async()=>{try{const T=await Ke.getGeneticSummaryByAthlete(s);o(T)}catch{}})()},[s]),Tr(c?.athlete_id||s.toString(),m,d);const u=Pr(m),p=Cn(u),h=Er(m),v=p?Ft(p):0,N=(()=>{const S=[...h];for(let T=S.length-1;T>=0;T--){const D=Ft(S[T]);if(D>0)return D}return 0})(),y=N>0?N:v;Fr(d);const k=p?Ds(m,p.date):0,M=Rd(m).slice(-7).map(S=>({date:S.date,value:S.totalHours})),A=(()=>{try{const S=new Map;for(const D of g||[]){if(!D?.athlete_id||String(D.athlete_id)===String(c?.athlete_id||s.toString()))continue;const G=String(D.athlete_id);S.has(G)||S.set(G,[]),S.get(G).push(D)}const T=[];return S.forEach(D=>{if(!D||D.length===0)return;const G=D.reduce((q,R)=>q?new Date(R.date).getTime()>new Date(q).getTime()?R.date:q:R.date,null);if(!G)return;const Y=Ds(D,G);Y>0&&T.push(Y)}),T.length===0?0:T.reduce((D,G)=>D+G,0)/T.length}catch{return 0}})(),[V,w]=I.useState([]);if(I.useEffect(()=>{if(r!=="trends")return;let S=!1;return(async()=>{try{const T=Math.min(28,Math.max(7,m.length||7));let D=await Rn(`/athletes/${s}/training-load`,{days:T,includeZeros:!0});D&&typeof D=="object"&&D.$values&&Array.isArray(D.$values)&&(D=D.$values);const G=Array.isArray(D)?D.map(Y=>({date:Y.date||Y.Date,compositeLoad:Number(Y.compositeLoad??Y.CompositeLoad??Y.load??Y.Load??0)})).filter(Y=>!!Y.date).sort((Y,q)=>new Date(Y.date).getTime()-new Date(q.date).getTime()):[];S||w(G)}catch{S||w([])}})(),()=>{S=!0}},[s,r,m.length]),I.useEffect(()=>{if(r!=="drills")return;let S=!1;return(async()=>{try{setDrillsLoading(!0),setDrillsError(null);let T=await Rn(`/athletes/${s}/drills`,{days:7,limit:50});T&&typeof T=="object"&&Array.isArray(T.$values)&&(T=T.$values);const D=Array.isArray(T)?T.map(G=>({name:G.name??G.Name,sessionType:G.sessionType??G.SessionType,start:G.startUtc??G.StartUtc,end:G.endUtc??G.EndUtc,durationMin:Number(G.durationMin??G.DurationMin??0),sRPE:Number(G.sRPE??G.srpe??G.SRPE??G.RPE??G.rpe??0),zoneWeightedLoad:Number(G.zoneWeightedLoad??G.ZoneWeightedLoad??0),zoneWeightedPerMin:Number(G.zoneWeightedPerMin??G.ZoneWeightedPerMin??0),metabolicPowerLoad:Number(G.metabolicPowerLoad??G.MetabolicPowerLoad??0),metabolicPowerPerMin:Number(G.metabolicPowerPerMin??G.MetabolicPowerPerMin??0),compositeLoad:Number(G.compositeLoad??G.CompositeLoad??0),compositePerMin:Number(G.compositePerMin??G.CompositePerMin??0)})):[];S||setDrills(D)}catch{S||setDrillsError("Failed to load drills")}finally{S||setDrillsLoading(!1)}})(),()=>{S=!0}},[s,r]),x)return e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-gray-600",children:"Loading athlete data..."})});if(!c)return e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-gray-600",children:"Athlete not found"}),e.jsx("button",{onClick:()=>n("/"),className:"mt-4 text-blue-600 hover:text-blue-800",children:"← Back to Team Overview"})]});const C=[{id:"metrics",label:"Current Metrics",icon:"📊",count:m.length>0?9:0},{id:"bloodResults",label:"Blood Results",icon:"🩸",count:1},{id:"circadian",label:"Circadian Rhythm",icon:"⏰",count:1},{id:"trends",label:"Trends & Analysis",icon:"📈",count:m.length},{id:"geneticSummary",label:"Genetic Summary",icon:"🧬",count:l.length},{id:"geneticAnalysis",label:"Genetic Analysis",icon:"🔬",count:l.length},{id:"scaleReport",label:"Scale Report",icon:"⚖️",count:1},{id:"digitalTwin",label:"Digital Twin",icon:"🌐",count:1},{id:"drills",label:"Drills",icon:"🏋️",count:drills.length},{id:"pharmacogenomics",label:"Pharmacogenomics",icon:"💊",count:l.filter(S=>(S.Category||S.category)==="pharmacogenomics").length||d.length},{id:"nutrigenomics",label:"Nutrigenomics",icon:"🥗",count:l.filter(S=>(S.Category||S.category)==="nutrigenomics").length||d.length},{id:"supplements",label:"Supplements",icon:"💊",count:l.filter(S=>(S.Category||S.category)==="supplements").length||d.length},{id:"recoveryGenes",label:"Recovery Genes",icon:"🧬",count:l.filter(S=>(S.Category||S.category)==="recovery").length||d.length},{id:"sleep",label:"Sleep Metrics",icon:"🌙",count:m.length},{id:"stress",label:"Stress Management",icon:"🧘",count:m.length},{id:"weather",label:"Weather Impact",icon:"🌤️",count:1},{id:"chatAI",label:"Chat With AI",icon:"🤖",count:1}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("button",{onClick:()=>n("/"),className:"flex items-center text-gray-700 hover:text-gray-900 transition-colors duration-200 mb-4",children:[e.jsx(Ur,{className:"w-5 h-5 mr-2"}),"Back to Team Overview"]})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold mb-2 text-gray-900",children:c.name}),e.jsx("p",{className:"text-xl text-gray-700 mb-1",children:c.sport}),e.jsxs("p",{className:"text-gray-600",children:["Age ",c.age," | ",c.team]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2 text-gray-900",children:"🧬 Genetic Profile"}),l.length>0?e.jsx(e.Fragment,{children:e.jsx("div",{className:"grid grid-cols-2 gap-2",children:l.slice(0,8).map((S,T)=>{let D=S.Genes||S.genes||{};if(typeof D=="string")try{D=JSON.parse(D)}catch{D={}}let G="Unknown",Y="Unknown";if(Array.isArray(D)&&D.length>0)if(typeof D[0]=="object"&&D[0]!==null){const q=D[0];G=q.gene||q.Gene||q.rsid||q.RSID||"Unknown",Y=q.genotype||q.Genotype||"Unknown"}else{D=D.reduce((R,$)=>(R[$.Key||$.key]=$.Value||$.value,R),{});const q=Object.entries(D);q.length>0&&(G=q[0][0],Y=q[0][1])}else if(typeof D=="object"&&D!==null){const q=Object.entries(D).filter(([R])=>!String(R).startsWith("$"));q.length>0&&(G=q[0][0],Y=q[0][1])}return e.jsxs("div",{className:"text-sm text-gray-700",children:[e.jsxs("strong",{children:[String(G||"Unknown"),":"]})," ",String(Y||"Unknown"),e.jsx("div",{className:"text-xs text-gray-500",children:S.Category||S.category||"Unknown"})]},T)})})}):e.jsx("div",{className:"text-sm text-gray-500",children:"No genetic data available"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl font-bold mb-2 text-gray-900",children:p?`${y.toFixed(0)}%`:"N/A"}),e.jsx("div",{className:"text-gray-600",children:"Readiness"}),e.jsx("div",{className:"text-sm text-gray-500 mt-1",children:p?"HRV, RHR, Sleep (duration + stages), SpO₂":"No biometric data available"})]})]})]}),e.jsx("div",{className:"border-b border-gray-200 mb-6",children:e.jsx("nav",{className:"flex flex-col sm:flex-row sm:flex-wrap gap-1 sm:gap-0",children:C.map(S=>{const T=r===S.id;return e.jsxs("button",{onClick:()=>{i(S.id),a.current&&a.current.scrollIntoView({behavior:"smooth",block:"start"})},className:`flex items-center justify-start sm:justify-center gap-2 px-4 py-3 sm:py-2 text-sm font-medium transition-all duration-200 relative group ${T?"text-white bg-purple-900":"text-gray-600 hover:text-purple-700 hover:bg-purple-700"}`,children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx("span",{children:S.icon}),e.jsx("span",{className:"sm:hidden text-white",children:S.label}),e.jsx("span",{className:"hidden sm:inline text-white",children:S.label})]}),S.count>0&&e.jsx("span",{className:`inline-flex items-center justify-center w-6 h-6 text-xs font-semibold rounded-full ${T?"bg-purple-700 text-white":"bg-purple-200 text-gray-700 group-hover:bg-gray-300"}`,children:S.count}),T&&e.jsx("span",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-purple-700"})]},S.id)})})}),e.jsxs("div",{ref:a,className:"mt-6",children:[r==="bloodResults"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"🩸 Blood Results"}),e.jsx(Di,{athleteId:s}),e.jsx("div",{className:"mt-8",children:e.jsx($s,{athleteId:s})})]}),r==="metrics"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-6 gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"📊 Current Readiness Metrics"}),p&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 bg-gray-100 px-3 py-1.5 rounded-full",children:[e.jsx("span",{className:`w-2 h-2 rounded-full ${y>75?"bg-green-500":y>50?"bg-yellow-500":"bg-red-500"}`}),c.name.split(" ")[0]," is ",y>75?"ready":y>50?"recovering":"fatigued"]})]}),p?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-5",children:[e.jsx(Le,{title:"HRV (Night)",value:p.hrv_night||0,unit:"ms",icon:"❤️",subtitle:v>75?"Excellent recovery":"Moderate recovery",trend:v>75?"up":"down",data:h.slice(-7).map(S=>({date:S.date,value:S.hrv_night||0})),teamAverage:He("hrv_night",c?.athlete_id||"",g),goalValue:50,goalLabel:"Target"}),e.jsx(Le,{title:"Resting HR (Sleeping HR)",value:p.resting_hr||0,unit:"bpm",icon:"❤️",subtitle:(p.resting_hr||0)<60?"Optimal":(p.resting_hr||0)<65?"Good":"Elevated",trend:(p.resting_hr||0)<60?"up":"down",data:h.slice(-7).map(S=>({date:S.date,value:S.resting_hr||0})),teamAverage:He("resting_hr",c?.athlete_id||"",g),goalValue:60,goalLabel:"Ideal"}),e.jsx(Le,{title:"Avg Heart Rate",value:p.avg_heart_rate||0,unit:"bpm",icon:"❤️",subtitle:(p.avg_heart_rate||0)<60?"Optimal":(p.avg_heart_rate||0)<65?"Good":"Elevated",trend:(p.avg_heart_rate||0)<60?"up":"down",data:h.slice(-7).map(S=>({date:S.date,value:S.avg_heart_rate||0})),teamAverage:He("avg_heart_rate",c?.athlete_id||"",g),goalValue:60,goalLabel:"Target"}),e.jsx(Le,{title:"Deep Sleep",value:p.deep_sleep_pct||0,unit:"%",icon:"💤",subtitle:(p.deep_sleep_pct||0)>20?"Restorative":"Low",trend:(p.deep_sleep_pct||0)>20?"up":"down",data:h.slice(-7).map(S=>({date:S.date,value:S.deep_sleep_pct||0})),teamAverage:He("deep_sleep_pct",c?.athlete_id||"",g),goalValue:20,goalLabel:"Min"}),e.jsx(Le,{title:"REM Sleep",value:p.rem_sleep_pct||0,unit:"%",icon:"🧠",subtitle:(p.rem_sleep_pct||0)>18?"Cognitive recovery":"Below ideal",trend:(p.rem_sleep_pct||0)>18?"up":"down",data:h.slice(-7).map(S=>({date:S.date,value:S.rem_sleep_pct||0})),teamAverage:He("rem_sleep_pct",c?.athlete_id||"",g),goalValue:18,goalLabel:"Target"}),e.jsx(Le,{title:"Sleep Duration",value:k||0,unit:"h",icon:"🌙",subtitle:(k||0)>=7?"Adequate":"Short",trend:(k||0)>=7?"up":"down",data:M,teamAverage:Number.isFinite(A)?Number(A.toFixed(1)):0,goalValue:7,goalLabel:"Recommended"}),e.jsx(Le,{title:"SpO₂ (Night)",value:p.spo2_night||0,unit:"%",icon:"🫁",subtitle:(p.spo2_night||0)>96?"Normal":"Monitor",trend:(p.spo2_night||0)>96?"up":"down",data:h.slice(-7).map(S=>({date:S.date,value:S.spo2_night||0})),teamAverage:He("spo2_night",c?.athlete_id||"",g),goalValue:96,goalLabel:"Healthy"}),e.jsx(Le,{title:"Respiratory Rate",value:p.resp_rate_night||0,unit:"/min",icon:"🌬️",subtitle:(p.resp_rate_night||0)<=16?"Normal":"Elevated",trend:(p.resp_rate_night||0)<=16?"up":"down",data:h.slice(-7).map(S=>({date:S.date,value:S.resp_rate_night||0})),teamAverage:He("resp_rate_night",c?.athlete_id||"",g),goalValue:16,goalLabel:"Max"}),e.jsx(Le,{title:"Skin Temp",value:p.temp_trend_c||0,unit:"°C",icon:"🌡️",subtitle:Math.abs((p.temp_trend_c||0)-36.8)<.3?"Stable":"Elevated",trend:Math.abs((p.temp_trend_c||0)-36.8)<.3?"up":"down",data:h.slice(-7).map(S=>({date:S.date,value:S.temp_trend_c||0})),teamAverage:He("temp_trend_c",c?.athlete_id||"",g),goalValue:36.8,goalLabel:"Normal"}),e.jsx(Le,{title:"Training Load",value:p.training_load_pct||0,unit:"%",icon:"💪",subtitle:(p.training_load_pct||0)>85?"High":"Moderate",trend:"neutral",data:h.slice(-7).map(S=>({date:S.date,value:S.training_load_pct||0})),teamAverage:He("training_load_pct",c?.athlete_id||"",g),goalValue:85,goalLabel:"Optimal"})]}),e.jsxs("div",{className:"mt-8 card-enhanced p-5",children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:"📋 Readiness Summary"}),e.jsx("p",{className:"text-gray-700 text-sm",children:v>75?`${c.name.split(" ")[0]} shows strong recovery markers. Ready for high-intensity training.`:v>50?"Recovery is moderate. Consider active recovery or technique work.":"Fatigue detected. Prioritize sleep, hydration, and low-intensity sessions."})]})]}):e.jsxs("div",{className:"text-center py-12 card-enhanced rounded-xl",children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"📊 No biometric data available"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Biometric data is required to display readiness metrics. Please ensure wearable data is being collected and synced."})]})]}),r==="circadian"&&e.jsx(_i,{biometricData:m,geneticData:l,athleteId:s.toString()}),r==="trends"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"Performance Trends"}),m.length>=2?e.jsx(Yr,{data:m.map(S=>({...S,hrv_night:S.hrv_night||0,resting_hr:S.resting_hr||0,spo2_night:S.spo2_night||0,resp_rate_night:S.resp_rate_night||0,deep_sleep_pct:S.deep_sleep_pct||0,rem_sleep_pct:S.rem_sleep_pct||0,light_sleep_pct:S.light_sleep_pct||0,sleep_duration_h:S.sleep_duration_h||0,temp_trend_c:S.temp_trend_c||0,training_load_pct:S.training_load_pct||0})),trainingLoadDaily:V}):e.jsxs("div",{className:"text-center py-12 card-enhanced rounded-xl",children:[e.jsx("p",{className:"text-gray-600 mb-2",children:"📊 Insufficient data for trend analysis"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Need at least 2 days of data. Current data points: ",m.length]})]})]}),r==="insights"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"🧠 High-Value Comparisons"}),e.jsx(Ad,{athleteId:s,biometricData:m,geneticProfiles:d})]}),r==="geneticSummary"&&e.jsx(kd,{geneticSummary:l}),r==="geneticAnalysis"&&e.jsx(wd,{athlete:c,geneticSummary:l,athleteId:s}),r==="scaleReport"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"⚖️ Scale Report"}),e.jsx(li,{athleteId:s.toString()})]}),r==="digitalTwin"&&e.jsx(Cr,{athleteId:s.toString()}),r==="drills"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"🏋️ Training Drills (Last 7 days)"}),drillsLoading&&e.jsx("div",{className:"card-enhanced p-6 text-gray-600",children:"Loading drill data..."}),drillsError&&e.jsxs("div",{className:"card-enhanced p-6 text-red-500",children:["Error: ",drillsError]}),!drillsLoading&&!drillsError&&e.jsxs(e.Fragment,{children:[(()=>{const S=P=>{if(!P)return null;const b=new Date(P);return isNaN(b.getTime())?null:b.toISOString().slice(0,10)},T=new Date,D=Array.from({length:7},(P,b)=>{const X=new Date(T);return X.setUTCDate(T.getUTCDate()-(6-b)),X.toISOString().slice(0,10)}),G=new Map;D.forEach(P=>G.set(P,{count:0,totalComposite:0,totalDuration:0}));for(const P of drills||[]){const b=S(P.start||P.end);if(b&&G.has(b)){const X=G.get(b);X.count+=1,X.totalComposite+=Number(P.compositeLoad||0),X.totalDuration+=typeof P.durationMin=="number"?P.durationMin:0}}const Y=D.map(P=>({date:P,...G.get(P)})),q=Y.reduce((P,b)=>P+b.totalComposite,0),R=Y.reduce((P,b)=>P+b.totalDuration,0),$=(drills||[]).length,W=q/7;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Drills (7 days)"}),e.jsx("div",{className:"text-2xl font-bold text-purple-700",children:$})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Composite"}),e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:q.toFixed(1)})]}),e.jsxs("div",{className:"bg-green-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Total Duration"}),e.jsxs("div",{className:"text-2xl font-bold text-green-700",children:[Math.round(R)," min"]})]}),e.jsxs("div",{className:"bg-amber-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Composite / day"}),e.jsx("div",{className:"text-2xl font-bold text-amber-700",children:W.toFixed(1)})]}),e.jsxs("div",{className:"bg-rose-50 p-4 rounded-lg",children:[e.jsx("div",{className:"text-sm text-gray-600",children:"Avg Intensity (comp/min)"}),e.jsx("div",{className:"text-2xl font-bold text-rose-700",children:(R>0?q/R:0).toFixed(2)})]})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("div",{className:"mb-3 text-gray-600 text-sm",children:"Composite Load per day"}),e.jsx("div",{className:"grid grid-cols-7 gap-3",children:Y.map((P,b)=>{const X=Number(P.totalComposite)||0,O=Math.min(100,Math.round(X)),f=X>=300?"bg-red-500":X>=200?"bg-orange-500":X>=100?"bg-yellow-500":"bg-green-500";return e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:P.date.slice(5)}),e.jsx("div",{className:"w-8 h-32 bg-gray-100 rounded flex items-end",children:e.jsx("div",{className:`${f} w-8 rounded`,style:{height:`${Math.max(4,O/100*100)}%`},title:`${P.date}: ${X.toFixed(1)}`})}),e.jsx("div",{className:"text-xs text-gray-600 mt-1",children:X.toFixed(0)})]},b)})})]}),(()=>{const P=new Map;for(const F of drills||[]){const _=F.sessionType||"Session",K=P.get(_)||{count:0,totalComposite:0,totalDuration:0};K.count+=1,K.totalComposite+=Number(F.compositeLoad||0),K.totalDuration+=typeof F.durationMin=="number"?F.durationMin:0,P.set(_,K)}const b=Array.from(P.entries()),X=F=>Number(F.compositePerMin)||(Number(F.compositeLoad)||0)/Math.max(1,Number(F.durationMin)||0),O=[...drills||[]].filter(F=>Number(F.compositeLoad)>0).sort((F,_)=>(Number(_.compositeLoad)||0)-(Number(F.compositeLoad)||0)).slice(0,5),f=[...drills||[]].map(F=>({...F,__intensity:X(F)})).filter(F=>F.__intensity>0).sort((F,_)=>_.__intensity-F.__intensity).slice(0,5),z=new Map;for(const F of drills||[]){const _=S(F.start||F.end);_&&(z.has(_)||z.set(_,[]),z.get(_).push(F))}const U=F=>{const _=Math.floor(F/60),K=Math.round(F%60);return _>0?`${_}h ${K}m`:`${K}m`};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"By Session Type"}),b.length===0?e.jsx("div",{className:"text-sm text-gray-600",children:"No drills categorized by session type."}):e.jsx("div",{className:"w-full overflow-x-auto",children:e.jsxs("div",{className:"min-w-[560px]",children:[e.jsxs("div",{className:"grid grid-cols-5 gap-2 text-xs text-gray-500 mb-2 px-1",children:[e.jsx("div",{children:"Type"}),e.jsx("div",{className:"text-right",children:"Sessions"}),e.jsx("div",{className:"text-right",children:"Composite"}),e.jsx("div",{className:"text-right",children:"Duration"}),e.jsx("div",{className:"text-right",children:"Avg Intensity"})]}),e.jsx("div",{className:"space-y-1",children:b.map(([F,_],K)=>e.jsxs("div",{className:"grid grid-cols-5 gap-2 bg-gray-50 rounded px-2 py-2 text-sm",children:[e.jsx("div",{className:"font-medium text-gray-900",children:F}),e.jsx("div",{className:"text-right text-gray-800",children:_.count}),e.jsx("div",{className:"text-right text-gray-800",children:_.totalComposite.toFixed(1)}),e.jsx("div",{className:"text-right text-gray-800",children:U(_.totalDuration)}),e.jsx("div",{className:"text-right text-gray-800",children:(_.totalDuration>0?_.totalComposite/_.totalDuration:0).toFixed(2)})]},K))})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Top Drills by Composite"}),O.length===0?e.jsx("div",{className:"text-sm text-gray-600",children:"No drills in the last 7 days."}):e.jsx("div",{className:"space-y-2",children:O.map((F,_)=>e.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium text-gray-900",children:F.name}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(F.start||F.end||"").toLocaleString()})]}),e.jsx("div",{className:"text-xs text-gray-500",children:F.sessionType||"Session"}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm mt-2",children:[e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded",children:["Composite: ",Number(F.compositeLoad||0).toFixed(1)]}),e.jsxs("span",{className:"px-2 py-1 bg-rose-100 text-rose-700 rounded",children:["Intensity: ",(Number(F.compositePerMin)||(Number(F.compositeLoad)||0)/Math.max(1,Number(F.durationMin)||0)).toFixed(2)]}),typeof F.durationMin=="number"&&F.durationMin>0&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded",children:U(F.durationMin)}),typeof F.sRPE=="number"&&F.sRPE>0&&e.jsxs("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded",children:["sRPE: ",Number(F.sRPE).toFixed(0)]})]})]},_))})]}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Top Drills by Intensity"}),f.length===0?e.jsx("div",{className:"text-sm text-gray-600",children:"No drills in the last 7 days."}):e.jsx("div",{className:"space-y-2",children:f.map((F,_)=>e.jsxs("div",{className:"bg-gray-50 rounded p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"font-medium text-gray-900",children:F.name}),e.jsx("div",{className:"text-xs text-gray-500",children:new Date(F.start||F.end||"").toLocaleString()})]}),e.jsx("div",{className:"text-xs text-gray-500",children:F.sessionType||"Session"}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm mt-2",children:[e.jsxs("span",{className:"px-2 py-1 bg-rose-100 text-rose-700 rounded",children:["Intensity: ",Number(F.__intensity||0).toFixed(2)]}),e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded",children:["Composite: ",Number(F.compositeLoad||0).toFixed(1)]}),typeof F.durationMin=="number"&&F.durationMin>0&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded",children:U(F.durationMin)}),typeof F.sRPE=="number"&&F.sRPE>0&&e.jsxs("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded",children:["sRPE: ",Number(F.sRPE).toFixed(0)]})]})]},_))})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:"Drills by Day"}),D.map(F=>{const _=z.get(F)||[];if(_.length===0)return null;const K=_.reduce((Q,he)=>Q+(Number(he.compositeLoad)||0),0),ne=_.reduce((Q,he)=>Q+(typeof he.durationMin=="number"?he.durationMin:0),0);return e.jsxs("div",{className:"card-enhanced p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:F}),e.jsxs("div",{className:"text-xs text-gray-500",children:[_.length," drills • ",K.toFixed(1)," comp • ",U(ne)]})]}),e.jsx("div",{className:"space-y-2",children:_.sort((Q,he)=>new Date(Q.start||Q.end||"").getTime()-new Date(he.start||he.end||"").getTime()).map((Q,he)=>e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between bg-gray-50 rounded p-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-gray-900",children:Q.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[Q.sessionType||"Session"," • ",new Date(Q.start||Q.end||"").toLocaleTimeString(),Q.end?` - ${new Date(Q.end).toLocaleTimeString()}`:""]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-sm mt-2 sm:mt-0",children:[e.jsxs("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded",children:["Composite: ",Number(Q.compositeLoad||0).toFixed(1)]}),e.jsxs("span",{className:"px-2 py-1 bg-rose-100 text-rose-700 rounded",children:["Intensity: ",(Number(Q.compositePerMin)||(Number(Q.compositeLoad)||0)/Math.max(1,Number(Q.durationMin)||0)).toFixed(2)]}),e.jsxs("span",{className:"px-2 py-1 bg-amber-100 text-amber-700 rounded",children:["Zone/min: ",Number(Q.zoneWeightedPerMin||0).toFixed(2)]}),e.jsxs("span",{className:"px-2 py-1 bg-teal-100 text-teal-700 rounded",children:["Metabolic/min: ",Number(Q.metabolicPowerPerMin||0).toFixed(2)]}),typeof Q.durationMin=="number"&&Q.durationMin>0&&e.jsx("span",{className:"px-2 py-1 bg-blue-100 text-blue-700 rounded",children:U(Q.durationMin)}),typeof Q.sRPE=="number"&&Q.sRPE>0&&e.jsxs("span",{className:"px-2 py-1 bg-yellow-100 text-yellow-700 rounded",children:["sRPE: ",Number(Q.sRPE).toFixed(0)]})]})]},he))})]},F)})]})]})})()]})})(),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Drills"}),e.jsxs("div",{className:"text-sm text-gray-500",children:[drills.length," items"]})]}),e.jsx("div",{className:"text-sm text-gray-600",children:"See detailed per-day drill breakdown above, including session types and intensity leaders."})]})]})]}),r==="pharmacogenomics"&&e.jsx(oi,{athleteId:s.toString()}),r==="nutrigenomics"&&e.jsx(ci,{athleteId:s.toString()}),r==="supplements"&&e.jsx(Md,{athleteId:s.toString()}),r==="recoveryGenes"&&e.jsx(di,{athleteId:s.toString()}),r==="sleep"&&e.jsx(Ni,{biometricData:m,athleteId:s.toString()}),r==="stress"&&e.jsx(Ai,{athleteId:s.toString(),biometricData:m}),r==="weather"&&e.jsx(qr,{athleteId:s.toString(),geneticData:l}),r==="chatAI"&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-6",children:"🤖 Chat With AI"}),e.jsxs("div",{className:"mb-4 p-4 bg-gray-100 rounded-lg",children:[e.jsx("h3",{className:"font-semibold text-gray-800 mb-2",children:"Data Status:"}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Athlete: ",c?.name]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Biometric Data Count: ",m.length]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Genetic Profiles Count: ",d.length]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Genetic Summary Count: ",l.length]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Athlete ID: ",c?.athlete_id]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Latest Biometric Date: ",Cn(m)?.date||"None"]}),m.length===0&&e.jsx("p",{className:"text-xs text-yellow-600 mt-2",children:"⚠️ No biometric data available. Check Current Metrics tab for data."})]}),e.jsx(vd,{athlete:c,biometricData:m,geneticProfiles:d,geneticSummary:l})]})]})]})};export{Od as AthleteProfile};
