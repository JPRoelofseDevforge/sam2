import{j as e}from"./index-094af1c7.js";import{r as N}from"./vendor-c778fe58.js";import{g as me,w as Ne}from"./weatherUtils-fe320b1d.js";import{D as E,s as T,p as he,y as W,t as I,W as _,E as C,z as A,G as je,o as pe,w as we,v as be,r as ge,I as ye,J as Ce}from"./ui-658ae121.js";const Se=c=>{const a={};if(!Array.isArray(c))return a;for(const i of c){const m=i?.gene??i?.Gene??i?.rsid??i?.RSID,j=i?.genotype??i?.Genotype??i?.value??i?.Value;m&&j&&(a[String(m).toUpperCase()]=String(j));let x=i?.Genes??i?.genes;if(typeof x=="string")try{x=JSON.parse(x)}catch{}if(Array.isArray(x))for(const h of x){const R=h?.gene??h?.Gene??h?.rsid??h?.RSID??h?.Key??h?.key,F=h?.genotype??h?.Genotype??h?.Value??h?.value;R&&F&&(a[String(R).toUpperCase()]=String(F))}else if(x&&typeof x=="object")for(const[h,R]of Object.entries(x))!String(h).startsWith("$")&&R!=null&&(a[String(h).toUpperCase()]=String(R))}return a},Y=(c,a,i)=>Math.min(i,Math.max(a,c)),Te=c=>c*9/5+32,Ae=c=>(c-32)*5/9,Re=(c,a)=>{const j=Math.log(a/100)+17.625*c/(243.04+c);return 243.04*j/(17.625-j)},Me=(c,a)=>{const i=Te(c),m=a,j=-42.379+2.04901523*i+10.14333127*m-.22475541*i*m-.00683783*i*i-.05481717*m*m+.00122874*i*i*m+85282e-8*i*m*m-199e-8*i*i*m*m;return Ae(j)},Ie=(c,a)=>{const i=Re(c,a),m=6.11*Math.exp(5417.753*(1/273.16-1/(i+273.15)));return c+5/9*(m-10)},Ge=(c,a)=>{if(c>10||a<=4.8)return c;const i=Math.pow(a,.16);return 13.12+.6215*c-11.37*i+.3965*c*i},ke=(c,a)=>{const m=6.105*Math.exp(17.27*c/(237.7+c))*(a/100);return .567*c+.393*m+3.94},Pe=c=>c<=30?{label:"low",color:"text-green-600"}:c<=60?{label:"moderate",color:"text-yellow-600"}:c<=80?{label:"high",color:"text-orange-600"}:{label:"extreme",color:"text-red-600"},We=({athleteId:c,geneticData:a})=>{const[i,m]=N.useState(null),[j,x]=N.useState(!0),[h,R]=N.useState("overview"),[F,ue]=N.useState(new Date),J={}.VITE_CITY||"Stellenbosch",X={}.VITE_STATE||"Western Cape",Z={}.VITE_COUNTRY||"South Africa";N.useEffect(()=>{const s=async()=>{try{x(!0);const l=await Ne.getCurrentWeather(J,X,Z);if(!l.success||!l.data)throw new Error(l.error||l.message||"Failed to fetch weather data");const o=l.data;m({temperature:o.current.temperature,humidity:o.current.humidity,aqi:o.current.air_quality_index||0,co:0,pm25:0,pm10:0,windSpeed:o.current.wind_speed,pressure:o.current.pressure,weatherCondition:o.current.weather_condition,lastUpdated:new Date().toLocaleTimeString(),uvIndex:o.current.uv_index,visibility:o.current.visibility,dewPoint:o.current.dew_point}),ue(new Date)}catch{m(null)}finally{x(!1)}};s();const n=setInterval(s,3e5);return()=>clearInterval(n)},[J,X,Z]);const xe=s=>{if(!s)return"☁️";switch(s){case"01d":return"☀️";case"01n":return"🌙";case"02d":return"⛅";case"02n":return"☁️";case"03d":case"03n":return"☁️";case"04d":case"04n":return"☁️";case"09d":case"09n":return"🌧️";case"10d":case"10n":return"🌧️";case"11d":case"11n":return"⛈️";case"13d":case"13n":return"❄️";case"50d":case"50n":return"🌫️";default:return"☁️"}},ve=s=>{if(!s)return"Unknown";switch(s){case"01d":case"01n":return"Clear";case"02d":case"02n":return"Few Clouds";case"03d":case"03n":return"Scattered Clouds";case"04d":case"04n":return"Broken Clouds";case"09d":case"09n":return"Shower Rain";case"10d":case"10n":return"Rain";case"11d":case"11n":return"Thunderstorm";case"13d":case"13n":return"Snow";case"50d":case"50n":return"Mist";default:return"Cloudy"}},p=N.useMemo(()=>{if(!i)return{available:!1,stressScore:0,risk:"low",riskColor:"text-gray-500",hi:0,humidex:0,windChill:0,wbgt:0,hydrationMlPerHour:0,sodiumMgPerHour:0,recommendations:[]};const s=i.temperature??0,n=i.humidity??0,l=i.windSpeed??0,o=i.aqi??0,d=Me(s,n),r=Ie(s,n),g=Ge(s,l),y=ke(s,n),u=(f,U,q)=>Y((f-U)/(q-U),0,1),k=s>=20?u(y,22,32):0,O=u(n,30,90),P=o?u(o,50,200):0,L=s<10?u(10-g,0,15):0,S=Math.round(Y(k*.5+O*.2+P*.2+L*.1,0,1)*100),V=Pe(S);let w=Y(500+(s-20)*30+(n-50)*5+l*5,400,1500);const B=!!a?.find(f=>f.gene==="AQP5"),G=!!a?.find(f=>f.gene==="CFTR"),H=!!a?.find(f=>f.gene==="SCNN1A");let M=1;B&&s>28&&(M+=.1),G&&s>25&&(M+=.15),H&&s>30&&(M+=.1),w=Math.round(w*M);const $=Math.round(w*.5),b=[];return S>=60&&b.push("Shorten intervals and extend rest; monitor RPE closely"),s>28&&b.push("Pre-cool (ice towel/vest) and use shade when possible"),n>75&&b.push("Use fan/airflow; prioritize evaporative cooling"),o>100&&b.push("Prefer indoor training; consider filtration/mask"),s<10&&l>10&&b.push("Layer clothing and extend warm-up to 15–20 min"),{available:!0,stressScore:S,risk:V.label,riskColor:V.color,hi:Math.round(d),humidex:Math.round(r),windChill:Math.round(g),wbgt:Math.round(y),hydrationMlPerHour:w,sodiumMgPerHour:$,recommendations:b}},[i,a]),ee=N.useMemo(()=>Se(a),[a]),se=N.useMemo(()=>{const s=[],n=l=>ee[l.toUpperCase()];return n("AQP5")&&s.push({gene:"AQP5",genotype:n("AQP5"),impact:"Sweat gland water channel; Trigger: Heat > 28°C or long-duration sessions",severity:"medium",recommendation:"Plan higher fluid intake; monitor sweat rate and cooling",icon:e.jsx(E,{className:"w-5 h-5"}),category:"recovery"}),n("CFTR")&&s.push({gene:"CFTR",genotype:n("CFTR"),impact:"Electrolyte loss risk; Trigger: Heat > 25°C, humid conditions",severity:"high",recommendation:"Use electrolyte drinks; consider sodium pre-load on hot days",icon:e.jsx(T,{className:"w-5 h-5"}),category:"recovery"}),n("SCNN1A")&&s.push({gene:"SCNN1A",genotype:n("SCNN1A"),impact:"Sodium balance in sweat; Trigger: Heat > 30°C, heavy sweating",severity:"medium",recommendation:"Increase sodium replacement; monitor cramps signs",icon:e.jsx(E,{className:"w-5 h-5"}),category:"recovery"}),n("NOS3")&&s.push({gene:"NOS3",genotype:n("NOS3"),impact:"Nitric oxide/circulation; Trigger: Cold < 10°C",severity:"low",recommendation:"Longer warm-up; add light aerobic priming",icon:e.jsx(he,{className:"w-5 h-5"}),category:"endurance"}),n("ADRB2")&&s.push({gene:"ADRB2",genotype:n("ADRB2"),impact:"Vasoconstriction response; Trigger: Cold/windy sessions",severity:"medium",recommendation:"Extra layering; protect extremities; progressive warm-ups",icon:e.jsx(W,{className:"w-5 h-5"}),category:"recovery"}),n("CLOCK")&&s.push({gene:"CLOCK",genotype:n("CLOCK"),impact:"Circadian sensitivity; Trigger: High UV, schedule shifts",severity:"medium",recommendation:"Keep consistent sleep/wake; manage late light exposure",icon:e.jsx(I,{className:"w-5 h-5"}),category:"stress"}),n("PER3")&&s.push({gene:"PER3",genotype:n("PER3"),impact:"Chronotype; Trigger: Late-evening sessions, bright light at night",severity:"low",recommendation:"Align training with chronotype; avoid screens pre-sleep",icon:e.jsx(I,{className:"w-5 h-5"}),category:"stress"}),n("IL13")&&s.push({gene:"IL13",genotype:n("IL13"),impact:"Airway sensitivity; Trigger: Humidity > 75%, allergens",severity:"high",recommendation:"Prefer dry indoor sessions; nasal breathing; warm-up longer",icon:e.jsx(_,{className:"w-5 h-5"}),category:"endurance"}),n("TNF")&&s.push({gene:"TNF",genotype:n("TNF"),impact:"Inflammatory response; Trigger: Cold, large load spikes",severity:"medium",recommendation:"Increase anti-inflammatory nutrition; manage load ramp",icon:e.jsx(T,{className:"w-5 h-5"}),category:"recovery"}),n("VDR")&&s.push({gene:"VDR",genotype:n("VDR"),impact:"Vitamin D receptor; Trigger: Low sun seasons",severity:"low",recommendation:"Check vitamin D status; time outdoor sessions with sun",icon:e.jsx(C,{className:"w-5 h-5"}),category:"metabolism"}),n("MC1R")&&s.push({gene:"MC1R",genotype:n("MC1R"),impact:"UV sensitivity; Trigger: UV index > 7, midday sun",severity:"high",recommendation:"Use sunscreen/UV eyewear; avoid midday exposures",icon:e.jsx(C,{className:"w-5 h-5"}),category:"recovery"}),n("TRPV1")&&s.push({gene:"TRPV1",genotype:n("TRPV1"),impact:"Barometric/wind sensitivity; Trigger: Wind > 20 km/h",severity:"high",recommendation:"Prefer sheltered routes; reduce exposure window",icon:e.jsx(A,{className:"w-5 h-5"}),category:"stress"}),n("BDNF")&&s.push({gene:"BDNF",genotype:n("BDNF"),impact:"Mood regulation; Trigger: UV < 4, low-light days",severity:"medium",recommendation:"Use morning bright-light exposure; keep training regular",icon:e.jsx(A,{className:"w-5 h-5"}),category:"stress"}),s},[ee]),K=N.useMemo(()=>{if(!a||!i)return[];const s=[],{temperature:n,humidity:l,windSpeed:o,aqi:d,uvIndex:r}=i,g=a.find(t=>t.gene==="UCP1")?.genotype;g&&n&&n<10&&s.push({gene:"UCP1",genotype:g,impact:"Cold tolerance and brown fat thermogenesis",severity:g.includes("A")?"low":"medium",recommendation:"Better cold adaptation, maintain training in cold weather",icon:e.jsx(W,{className:"w-5 h-5"}),category:"recovery"});const y=a.find(t=>t.gene==="ADRB3")?.genotype;y&&n&&n<15&&s.push({gene:"ADRB3",genotype:y,impact:"Cold-induced thermogenesis regulation",severity:"medium",recommendation:"Monitor cold exposure, ensure proper warm-up",icon:e.jsx(W,{className:"w-5 h-5"}),category:"recovery"});const u=a.find(t=>t.gene==="AQP5")?.genotype;u&&n&&n>28&&s.push({gene:"AQP5",genotype:u,impact:"Sweat gland water channel function",severity:"medium",recommendation:"Monitor hydration, optimize electrolyte balance",icon:e.jsx(E,{className:"w-5 h-5"}),category:"recovery"});const k=a.find(t=>t.gene==="CFTR")?.genotype;k&&n&&n>25&&k.includes("del")&&s.push({gene:"CFTR",genotype:k,impact:"Increased dehydration risk in heat",severity:"high",recommendation:"Aggressive hydration protocol, electrolyte monitoring",icon:e.jsx(T,{className:"w-5 h-5"}),category:"recovery"});const O=a.find(t=>t.gene==="SCNN1A")?.genotype;O&&n&&n>30&&s.push({gene:"SCNN1A",genotype:O,impact:"Salt retention and sweat electrolyte balance",severity:"medium",recommendation:"Monitor sodium levels, adjust electrolyte supplementation",icon:e.jsx(E,{className:"w-5 h-5"}),category:"recovery"});const P=a.find(t=>t.gene==="NOS3")?.genotype;P&&n&&n<10&&P==="TT"&&s.push({gene:"NOS3",genotype:P,impact:"Optimal nitric oxide production for circulation",severity:"low",recommendation:"Better blood flow in cold conditions",icon:e.jsx(he,{className:"w-5 h-5"}),category:"endurance"});const L=a.find(t=>t.gene==="ADRB2")?.genotype;L&&n&&n<15&&L==="Gly16Gly"&&s.push({gene:"ADRB2",genotype:L,impact:"Reduced vasoconstriction efficiency in cold",severity:"medium",recommendation:"Extra warm-up needed, monitor for cold stress",icon:e.jsx(W,{className:"w-5 h-5"}),category:"recovery"});const S=a.find(t=>t.gene==="CLOCK")?.genotype;S&&r&&r>6&&s.push({gene:"CLOCK",genotype:S,impact:"Circadian rhythm regulation affected by light exposure",severity:S==="AA"?"low":"medium",recommendation:S==="AA"?"Strong circadian drive, maintain light consistency":"Flexible rhythm, use light therapy if needed",icon:e.jsx(I,{className:"w-5 h-5"}),category:"stress"});const V=a.find(t=>t.gene==="PER2")?.genotype;V&&r&&r>8&&s.push({gene:"PER2",genotype:V,impact:"Light-sensitive circadian regulation",severity:"medium",recommendation:"Monitor sleep quality with high UV exposure",icon:e.jsx(I,{className:"w-5 h-5"}),category:"stress"});const w=a.find(t=>t.gene==="PER3")?.genotype;w&&r&&r>7&&s.push({gene:"PER3",genotype:w,impact:"Morning/evening preference influenced by light",severity:w==="long"?"medium":"low",recommendation:w==="long"?"Evening type, avoid bright light before bed":"Morning type, use morning light exposure",icon:e.jsx(I,{className:"w-5 h-5"}),category:"stress"});const B=a.find(t=>t.gene==="ARNTL")?.genotype;B&&r&&r>5&&s.push({gene:"ARNTL",genotype:B,impact:"BMAL1 protein affects light-dependent gene expression",severity:"medium",recommendation:"Optimize light exposure timing for circadian health",icon:e.jsx(I,{className:"w-5 h-5"}),category:"stress"});const G=a.find(t=>t.gene==="SLC6A4")?.genotype;G&&r&&r<3&&s.push({gene:"SLC6A4",genotype:G,impact:"Serotonin transporter affected by seasonal light changes",severity:G==="LL"?"low":"high",recommendation:G==="LL"?"Good serotonin regulation":"Monitor mood in low light seasons",icon:e.jsx(A,{className:"w-5 h-5"}),category:"stress"});const H=a.find(t=>t.gene==="TPH2")?.genotype;H&&r&&r<4&&s.push({gene:"TPH2",genotype:H,impact:"Serotonin synthesis affected by light availability",severity:"medium",recommendation:"Consider light therapy in low-sunlight periods",icon:e.jsx(A,{className:"w-5 h-5"}),category:"stress"});const M=a.find(t=>t.gene==="GC")?.genotype;M&&r&&r<5&&s.push({gene:"GC",genotype:M,impact:"Vitamin D binding protein affects UV utilization",severity:"medium",recommendation:"Monitor vitamin D levels, consider supplementation",icon:e.jsx(C,{className:"w-5 h-5"}),category:"metabolism"});const $=a.find(t=>t.gene==="CYP2R1")?.genotype;$&&r&&r<6&&s.push({gene:"CYP2R1",genotype:$,impact:"Vitamin D 25-hydroxylase enzyme efficiency",severity:"medium",recommendation:"May need higher UV exposure for vitamin D production",icon:e.jsx(C,{className:"w-5 h-5"}),category:"metabolism"});const b=a.find(t=>t.gene==="VDR")?.genotype;b&&r&&r>8&&s.push({gene:"VDR",genotype:b,impact:"Vitamin D receptor sensitivity to sunlight",severity:"low",recommendation:"Good vitamin D utilization from UV exposure",icon:e.jsx(C,{className:"w-5 h-5"}),category:"metabolism"});const f=a.find(t=>t.gene==="TRPV1")?.genotype;f&&o&&o>20&&s.push({gene:"TRPV1",genotype:f,impact:"Sensory nerve sensitivity to barometric pressure",severity:"high",recommendation:"Monitor for migraine triggers in windy conditions",icon:e.jsx(A,{className:"w-5 h-5"}),category:"stress"});const U=a.find(t=>t.gene==="CACNA1A")?.genotype;U&&o&&o>15&&s.push({gene:"CACNA1A",genotype:U,impact:"Calcium channel affects nerve excitability",severity:"medium",recommendation:"Wind may trigger neurological symptoms",icon:e.jsx(A,{className:"w-5 h-5"}),category:"stress"});const q=a.find(t=>t.gene==="IL6")?.genotype;q&&l&&l>80&&s.push({gene:"IL6",genotype:q,impact:"Inflammation response to humidity changes",severity:"medium",recommendation:"Monitor joint pain in high humidity",icon:e.jsx(T,{className:"w-5 h-5"}),category:"recovery"});const ne=a.find(t=>t.gene==="TNF")?.genotype;ne&&n&&n<10&&s.push({gene:"TNF",genotype:ne,impact:"Cold-triggered inflammation response",severity:"medium",recommendation:"Cold weather may increase joint inflammation",icon:e.jsx(T,{className:"w-5 h-5"}),category:"recovery"});const te=a.find(t=>t.gene==="COL1A1")?.genotype;te&&o&&o>15&&s.push({gene:"COL1A1",genotype:te,impact:"Collagen structure affects joint stability",severity:"medium",recommendation:"Wind may affect joint stability and pain",icon:e.jsx(T,{className:"w-5 h-5"}),category:"recovery"});const ae=a.find(t=>t.gene==="IL13")?.genotype;ae&&l&&l>75&&s.push({gene:"IL13",genotype:ae,impact:"Airway inflammation response to humidity",severity:"high",recommendation:"Monitor respiratory symptoms in humid conditions",icon:e.jsx(_,{className:"w-5 h-5"}),category:"endurance"});const re=a.find(t=>t.gene==="ORMDL3")?.genotype;re&&l&&l>70&&s.push({gene:"ORMDL3",genotype:re,impact:"Bronchial hyperresponsiveness to humidity",severity:"medium",recommendation:"Humidity may trigger asthma symptoms",icon:e.jsx(_,{className:"w-5 h-5"}),category:"endurance"});const D=a.find(t=>t.gene==="MC1R")?.genotype;D&&r&&r>7&&s.push({gene:"MC1R",genotype:D,impact:"Melanin production and UV protection",severity:D.includes("R")?"high":"low",recommendation:D.includes("R")?"Higher UV sensitivity, use sun protection":"Better natural UV protection",icon:e.jsx(C,{className:"w-5 h-5"}),category:"recovery"});const ce=a.find(t=>t.gene==="SLC24A5")?.genotype;ce&&r&&r>6&&s.push({gene:"SLC24A5",genotype:ce,impact:"Skin pigmentation and UV tolerance",severity:"medium",recommendation:"Monitor skin response to UV exposure",icon:e.jsx(C,{className:"w-5 h-5"}),category:"recovery"});const oe=a.find(t=>t.gene==="XPC")?.genotype;oe&&r&&r>8&&s.push({gene:"XPC",genotype:oe,impact:"DNA repair efficiency after UV damage",severity:"medium",recommendation:"Monitor for UV-induced skin damage",icon:e.jsx(T,{className:"w-5 h-5"}),category:"recovery"});const le=a.find(t=>t.gene==="ERCC2")?.genotype;le&&r&&r>7&&s.push({gene:"ERCC2",genotype:le,impact:"Nucleotide excision repair capacity",severity:"medium",recommendation:"UV exposure may affect DNA repair processes",icon:e.jsx(T,{className:"w-5 h-5"}),category:"recovery"});const de=a.find(t=>t.gene==="OPN1LW")?.genotype;de&&r&&r>9&&s.push({gene:"OPN1LW",genotype:de,impact:"Long-wavelength cone sensitivity to bright light",severity:"medium",recommendation:"Use UV-protective eyewear in bright sunlight",icon:e.jsx(C,{className:"w-5 h-5"}),category:"recovery"});const Q=a.find(t=>t.gene==="BDNF")?.genotype;Q&&r&&r<4&&s.push({gene:"BDNF",genotype:Q,impact:"Brain-derived neurotrophic factor and mood regulation",severity:Q==="Val/Val"?"low":"high",recommendation:Q==="Val/Val"?"Better mood stability":"Monitor mood in low-light conditions",icon:e.jsx(A,{className:"w-5 h-5"}),category:"stress"});const z=a.find(t=>t.gene==="COMT")?.genotype;return z&&n&&n<5&&s.push({gene:"COMT",genotype:z,impact:"Dopamine metabolism affected by cold stress",severity:z==="GG"?"low":"high",recommendation:z==="GG"?"Better cold stress response":"Cold may affect cognitive function",icon:e.jsx(A,{className:"w-5 h-5"}),category:"stress"}),s},[a,i]),fe=N.useMemo(()=>{if(!i)return{score:50,category:"moderate",factors:[],recommendations:[]};const{temperature:s,humidity:n,windSpeed:l,aqi:o}=i;let d=100;const r=[],g=[];s&&s>35?(d-=40,r.push("Extreme heat reduces performance by ~15-25%"),g.push("Consider indoor training or early morning sessions")):s&&s>30?(d-=25,r.push("High heat impacts endurance and power output"),g.push("Increase hydration, use cooling strategies")):s&&s<5?(d-=20,r.push("Cold weather reduces muscle performance"),g.push("Extended warm-up, appropriate layering")):s&&s>=15&&s<=25&&(d+=10,r.push("Optimal temperature range for performance")),n&&n>85?(d-=20,r.push("High humidity impairs heat dissipation"),g.push("Monitor core temperature, use fans")):n&&n<30&&(d-=10,r.push("Low humidity increases respiratory stress"),g.push("Stay well hydrated")),l&&l>15&&(d-=15,r.push("Strong winds affect pacing and energy expenditure"),g.push("Adjust pacing strategy, consider protected routes")),o&&o>150?(d-=30,r.push("Poor air quality reduces lung function"),g.push("Consider indoor training, use air filtration")):o&&o>100&&(d-=15,r.push("Moderate air pollution affects respiratory performance"),g.push("Monitor breathing rate, consider masks")),K.forEach(u=>{u.severity==="high"?d-=15:u.severity==="medium"&&(d-=8)}),p.available&&(d-=Math.round(p.stressScore*.3),p.recommendations.slice(0,3).forEach(u=>g.push(u)),r.push(`Environmental stress: ${p.risk.toUpperCase()}`)),d=Math.max(0,Math.min(100,d));let y;return d>=80?y="optimal":d>=65?y="good":d>=45?y="moderate":d>=25?y="challenging":y="dangerous",{score:d,category:y,factors:r,recommendations:g}},[i,K]);if(j)return e.jsxs("div",{className:"space-y-6 animate-pulse",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold text-white-900",children:"🌤️ Weather Impact Analysis"}),e.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[e.jsx(je,{className:"w-4 h-4 animate-spin"}),e.jsx("span",{children:"Updating..."})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[1,2,3,4].map(s=>e.jsxs("div",{className:"card-enhanced p-4",children:[e.jsx("div",{className:"h-16 bg-gray-300 rounded mb-2"}),e.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"})]},s))}),e.jsxs("div",{className:"card-enhanced p-6",children:[e.jsx("div",{className:"h-6 bg-gray-300 rounded w-1/3 mb-4"}),e.jsx("div",{className:"space-y-3",children:[1,2,3].map(s=>e.jsx("div",{className:"h-4 bg-gray-300 rounded"},s))})]})]});const v=fe,ie=K;return e.jsxs("div",{className:"weather-impact-container",children:[e.jsxs("div",{className:"weather-impact-header",children:[e.jsxs("div",{className:"header-left",children:[e.jsxs("div",{className:"weather-indicator-enhanced",children:[e.jsx("div",{className:"indicator-pulse-enhanced"}),e.jsx("div",{className:"indicator-dot-enhanced"})]}),e.jsxs("div",{className:"header-content",children:[e.jsx("h2",{className:"weather-impact-title",children:"Weather Impact Analysis"}),e.jsx("p",{className:"weather-impact-subtitle",children:"Genetic × Environmental Performance Factors"})]})]}),e.jsxs("div",{className:"header-status",children:[e.jsxs("div",{className:"live-indicator",children:[e.jsx("span",{className:"live-dot"}),e.jsx("span",{className:"live-text",children:"LIVE"})]}),e.jsxs("div",{className:"update-time",children:[e.jsx(I,{className:"w-4 h-4"}),e.jsxs("span",{children:["Updated ",F.toLocaleTimeString()]})]})]})]}),e.jsxs("div",{className:"performance-overview-card",children:[e.jsxs("div",{className:"performance-header",children:[e.jsx("h3",{className:"performance-title",children:"Performance Impact Score"}),e.jsx("div",{className:`performance-badge ${v.category}`,children:v.category.toUpperCase()})]}),e.jsxs("div",{className:"performance-content",children:[e.jsx("div",{className:"performance-gauge",children:e.jsxs("div",{className:"gauge-container",children:[e.jsxs("svg",{className:"performance-gauge-svg",viewBox:"0 0 120 120",children:[e.jsx("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"currentColor",strokeWidth:"8",className:"gauge-background"}),e.jsx("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"currentColor",strokeWidth:"8",strokeDasharray:`${3.14*v.score} 314`,className:`gauge-progress ${v.category}`,strokeLinecap:"round",transform:"rotate(-90 60 60)"})]}),e.jsxs("div",{className:"gauge-value",children:[e.jsx("span",{className:"gauge-number",children:v.score}),e.jsx("span",{className:"gauge-percent",children:"%"})]})]})}),e.jsx("div",{className:"performance-factors",children:e.jsx("div",{className:"factors-list",children:v.factors?.slice(0,3).map((s,n)=>e.jsxs("div",{className:"factor-item",children:[e.jsx(pe,{className:"w-4 h-4 text-amber-500 flex-shrink-0"}),e.jsx("span",{className:"factor-text",children:s})]},n))})})]})]}),e.jsx("div",{className:"weather-tabs-container",children:e.jsx("div",{className:"weather-tabs",children:[{id:"overview",label:"Overview",icon:"📊",color:"blue"},{id:"genetics",label:"Genetics",icon:"🧬",color:"purple"},{id:"performance",label:"Performance",icon:"⚡",color:"green"}].map(s=>e.jsxs("button",{onClick:()=>R(s.id),className:`weather-tab ${h===s.id?"active":""}`,children:[e.jsx("span",{className:"tab-icon",children:s.icon}),e.jsx("span",{className:"tab-label",children:s.label}),h===s.id&&e.jsx("div",{className:`tab-indicator ${s.color}`})]},s.id))})}),e.jsxs("div",{className:"weather-tab-content",children:[h==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"overview-tab",children:[e.jsxs("div",{className:"conditions-grid",children:[e.jsxs("div",{className:"condition-card ",children:[e.jsx("div",{className:"condition-icon",children:i?xe(i.weatherCondition):"❓"}),e.jsxs("div",{className:"condition-info text-white",children:[e.jsx("div",{className:"condition-name text-white",children:i?ve(i.weatherCondition):"Weather Unavailable"}),e.jsx("div",{className:"condition-label text-white",children:"Current Conditions"})]})]}),e.jsxs("div",{className:"condition-card",children:[e.jsx(W,{className:"w-6 h-6 text-orange-500"}),e.jsxs("div",{className:"condition-info",children:[e.jsx("div",{className:"condition-value temp-value-enhanced",children:i?`${i.temperature}°C`:"--°C"}),e.jsx("div",{className:"condition-label",children:"Temperature"})]}),e.jsx("div",{className:"condition-trend",children:i&&i.temperature>25?e.jsx(we,{className:"w-4 h-4 text-red-500"}):i&&i.temperature<15?e.jsx(be,{className:"w-4 h-4 text-blue-500"}):e.jsx(ge,{className:"w-4 h-4 text-green-500"})})]}),e.jsxs("div",{className:"condition-card",children:[e.jsx(E,{className:"w-6 h-6 text-blue-500"}),e.jsxs("div",{className:"condition-info",children:[e.jsx("div",{className:"condition-value humidity-value-enhanced",children:i?`${i.humidity}%`:"--%"}),e.jsx("div",{className:"condition-label",children:"Humidity"})]}),e.jsx("div",{className:"condition-bar",children:e.jsx("div",{className:"condition-progress humidity-progress",style:{width:`${i?i.humidity:0}%`}})})]}),e.jsxs("div",{className:"condition-card",children:[e.jsx(_,{className:"w-6 h-6 text-gray-500"}),e.jsxs("div",{className:"condition-info",children:[e.jsx("div",{className:"condition-value wind-value-enhanced",children:i?`${i.windSpeed} km/h`:"-- km/h"}),e.jsx("div",{className:"condition-label",children:"Wind Speed"})]}),e.jsx("div",{className:"wind-intensity",children:i&&i.windSpeed<5?"Calm":i&&i.windSpeed<15?"Light":i&&i.windSpeed<25?"Moderate":"Strong"})]})]}),e.jsxs("div",{className:"secondary-metrics",children:[e.jsxs("div",{className:"metric-secondary",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("h4",{className:"metric-title",children:"Air Quality"}),e.jsx("div",{className:`aqi-badge ${me(i?.aqi||0).class}`,children:me(i?.aqi||0).label})]}),e.jsx("div",{className:"metric-value-large aqi-value-enhanced",children:i?i.aqi:"--"}),e.jsx("div",{className:"metric-subtitle",children:"AQI Index"})]}),e.jsxs("div",{className:"metric-secondary",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("h4",{className:"metric-title",children:"UV Index"}),e.jsx("div",{className:`uv-badge ${i&&(i.uvIndex||0)<=2?"low":i&&(i.uvIndex||0)<=5?"moderate":i&&(i.uvIndex||0)<=7?"high":"extreme"}`,children:i&&(i.uvIndex||0)<=2?"Low":i&&(i.uvIndex||0)<=5?"Moderate":i&&(i.uvIndex||0)<=7?"High":"Extreme"})]}),e.jsx("div",{className:"metric-value-large",children:i?i.uvIndex||0:"--"}),e.jsx("div",{className:"metric-subtitle",children:"UV Index"})]}),e.jsxs("div",{className:"metric-secondary",children:[e.jsxs("div",{className:"metric-header",children:[e.jsx("h4",{className:"metric-title",children:"Visibility"}),e.jsx(C,{className:"w-5 h-5 text-gray-600"})]}),e.jsx("div",{className:"metric-value-large",children:i?`${i.visibility||10} km`:"-- km"}),e.jsx("div",{className:"metric-subtitle",children:"Visibility Range"})]})]})]}),e.jsx("div",{className:"card-enhanced p-6 mt-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Environmental Stress"}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative w-32 h-32",children:[e.jsxs("svg",{className:"w-full h-full",viewBox:"0 0 120 120",children:[e.jsx("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"#e5e7eb",strokeWidth:"10"}),e.jsx("circle",{cx:"60",cy:"60",r:"50",fill:"none",stroke:"currentColor",strokeWidth:"10",className:p.stressScore<=30?"text-green-500":p.stressScore<=60?"text-yellow-500":p.stressScore<=80?"text-orange-500":"text-red-500",strokeDasharray:`${Math.PI*2*50*(p.stressScore/100)} ${Math.PI*2*50}`,strokeLinecap:"round",transform:"rotate(-90 60 60)"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-extrabold text-gray-900",children:p.stressScore}),e.jsx("div",{className:`text-xs font-semibold ${p.riskColor}`,children:String(p.risk).toUpperCase()})]})})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-2 gap-3 text-sm",children:[e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-gray-500",children:"WBGT"}),e.jsxs("div",{className:"text-gray-900 font-bold",children:[p.wbgt,"°C"]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-gray-500",children:"Heat Index"}),e.jsxs("div",{className:"text-gray-900 font-bold",children:[p.hi,"°C"]})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-gray-500",children:"Humidex"}),e.jsx("div",{className:"text-gray-900 font-bold",children:p.humidex})]}),e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"text-gray-500",children:"Wind Chill"}),e.jsxs("div",{className:"text-gray-900 font-bold",children:[p.windChill,"°C"]})]})]})]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Hydration & Electrolytes"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("div",{className:"text-blue-600 text-sm",children:"Recommended Fluid"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-700",children:[p.hydrationMlPerHour," ml/h"]}),e.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Adjust by body mass and session duration"})]}),e.jsxs("div",{className:"p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx("div",{className:"text-purple-600 text-sm",children:"Sodium Target"}),e.jsxs("div",{className:"text-2xl font-bold text-purple-700",children:[p.sodiumMgPerHour," mg/h"]}),e.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"Increase if heavy sweater/genotype risk"})]})]}),p.recommendations.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-sm font-medium text-gray-900 mb-1",children:"Immediate Actions"}),e.jsx("ul",{className:"list-disc pl-5 space-y-1 text-sm text-gray-700",children:p.recommendations.slice(0,3).map((s,n)=>e.jsx("li",{children:s},n))})]})]})]})})]}),h==="genetics"&&e.jsx("div",{className:"genetics-tab",children:ie.length>0?e.jsx("div",{className:"genetic-impacts-grid",children:ie.map((s,n)=>e.jsxs("div",{className:`genetic-impact-card ${s.category}`,children:[e.jsxs("div",{className:"impact-header",children:[e.jsx("div",{className:"impact-icon-container",children:s.icon}),e.jsxs("div",{className:"impact-gene-info",children:[e.jsx("h4",{className:"impact-gene",children:s.gene}),e.jsxs("p",{className:"impact-genotype",children:["Genotype: ",s.genotype]})]}),e.jsx("div",{className:`impact-severity ${s.severity}`,children:s.severity.toUpperCase()})]}),e.jsxs("div",{className:"impact-content",children:[e.jsx("p",{className:"impact-description",children:s.impact}),e.jsxs("div",{className:"impact-recommendation",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{children:s.recommendation})]})]}),e.jsx("div",{className:`impact-category-badge ${s.category}`,children:s.category})]},n))}):e.jsx(e.Fragment,{children:se.length>0?e.jsxs("div",{children:[e.jsx("h4",{className:"text-md font-semibold text-gray-900 mb-3",children:"Sensitivity Watchlist (weather-triggered)"}),e.jsx("div",{className:"genetic-impacts-grid",children:se.map((s,n)=>e.jsxs("div",{className:`genetic-impact-card ${s.category}`,children:[e.jsxs("div",{className:"impact-header",children:[e.jsx("div",{className:"impact-icon-container",children:s.icon}),e.jsxs("div",{className:"impact-gene-info",children:[e.jsx("h4",{className:"impact-gene",children:s.gene}),e.jsxs("p",{className:"impact-genotype",children:["Genotype: ",s.genotype]})]}),e.jsx("div",{className:`impact-severity ${s.severity}`,children:s.severity.toUpperCase()})]}),e.jsxs("div",{className:"impact-content",children:[e.jsx("p",{className:"impact-description",children:s.impact}),e.jsxs("div",{className:"impact-recommendation",children:[e.jsx(ye,{className:"w-4 h-4"}),e.jsx("span",{children:s.recommendation})]})]}),e.jsx("div",{className:`impact-category-badge ${s.category}`,children:s.category})]},n))})]}):e.jsxs("div",{className:"no-genetic-impacts",children:[e.jsx(Ce,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h4",{className:"no-impacts-title",children:"No Genetic Data Parsed"}),e.jsx("p",{className:"no-impacts-text",children:"We couldn’t match any weather-relevant genotypes. Ensure genetic summary includes gene and genotype fields."})]})})}),h==="performance"&&e.jsx("div",{className:"performance-tab",children:e.jsxs("div",{className:"performance-recommendations",children:[e.jsxs("div",{className:"recommendations-section",children:[e.jsx("h3",{className:"section-title",children:"Training Recommendations"}),e.jsxs("div",{className:"recommendations-grid",children:[e.jsxs("div",{className:"recommendation-card",children:[e.jsx(ge,{className:"w-6 h-6 text-green-500"}),e.jsx("h4",{className:"rec-title",children:"Recommended Actions"}),e.jsx("ul",{className:"rec-list",children:v.recommendations?.map((s,n)=>e.jsx("li",{className:"rec-item",children:s},n))})]}),e.jsxs("div",{className:"recommendation-card",children:[e.jsx(pe,{className:"w-6 h-6 text-red-500"}),e.jsx("h4",{className:"rec-title",children:"Avoid These"}),e.jsxs("ul",{className:"rec-list",children:[e.jsx("li",{className:"rec-item",children:"Ignore hydration needs"}),e.jsx("li",{className:"rec-item",children:"Push through extreme discomfort"}),e.jsx("li",{className:"rec-item",children:"Train without monitoring vital signs"}),e.jsx("li",{className:"rec-item",children:"Skip warm-up in cold conditions"})]})]})]})]}),e.jsxs("div",{className:"training-intensity-section",children:[e.jsx("h3",{className:"section-title",children:"Training Intensity Guide"}),e.jsxs("div",{className:"intensity-cards",children:[e.jsxs("div",{className:"intensity-card",children:[e.jsx("div",{className:"intensity-icon",children:"🏃‍♂️"}),e.jsxs("div",{className:"intensity-info",children:[e.jsx("div",{className:"intensity-name",children:"Cardiovascular"}),e.jsx("div",{className:"intensity-level",children:v.score>70?"High intensity OK":v.score>50?"Moderate intensity":"Low intensity only"})]})]}),e.jsxs("div",{className:"intensity-card",children:[e.jsx("div",{className:"intensity-icon",children:"💪"}),e.jsxs("div",{className:"intensity-info",children:[e.jsx("div",{className:"intensity-name",children:"Strength Training"}),e.jsx("div",{className:"intensity-level",children:v.score>60?"Full strength work":"Light weights only"})]})]}),e.jsxs("div",{className:"intensity-card",children:[e.jsx("div",{className:"intensity-icon",children:"🎯"}),e.jsxs("div",{className:"intensity-info",children:[e.jsx("div",{className:"intensity-name",children:"Skill Work"}),e.jsx("div",{className:"intensity-level",children:v.score>40?"Technical training OK":"Focus on recovery"})]})]})]})]})]})}),h==="forecast"&&e.jsx("div",{className:"forecast-tab",children:e.jsxs("div",{className:"forecast-placeholder",children:[e.jsx("div",{className:"forecast-icon",children:"🔮"}),e.jsx("h3",{className:"forecast-title",children:"Advanced Weather Forecasting"}),e.jsx("p",{className:"forecast-description",children:"5-day weather predictions and trend analysis"}),e.jsxs("div",{className:"forecast-features",children:[e.jsxs("div",{className:"forecast-feature",children:[e.jsx("span",{className:"feature-icon",children:"📈"}),e.jsx("span",{className:"feature-text",children:"Performance trend analysis"})]}),e.jsxs("div",{className:"forecast-feature",children:[e.jsx("span",{className:"feature-icon",children:"🎯"}),e.jsx("span",{className:"feature-text",children:"Optimal training windows"})]}),e.jsxs("div",{className:"forecast-feature",children:[e.jsx("span",{className:"feature-icon",children:"⚠️"}),e.jsx("span",{className:"feature-text",children:"Weather risk alerts"})]})]}),e.jsx("div",{className:"forecast-coming-soon",children:"Coming Soon - Q2 2024"})]})})]})]})};export{We as W};
